const CR=0,LF=1,Control=2,Extend=3,Regional_Indicator=4,SpacingMark=5,L=6,V=7,T=8,LV=9,LVT=10,Other=11,Skin_Tone=12;function codePointAt(t,e){e=e||0;const i=t.charCodeAt(e);if(55296<=i&&i<=56319&&e<t.length-1){const s=i,a=t.charCodeAt(e+1);return 56320<=a&&a<=57343?1024*(s-55296)+(a-56320)+65536:s}if(56320<=i&&i<=57343&&e>=1){const s=t.charCodeAt(e-1),a=i;return 55296<=s&&s<=56319?1024*(s-55296)+(a-56320)+65536:a}return i}function nextBreak(t,e){if((e=e||0)<0)return 0;if(e>=t.length-1)return t.length;let i=getGraphemeBreakProperty(codePointAt(t,e));for(let n=e+1;n<t.length;n++){if(55296<=t.charCodeAt(n-1)&&t.charCodeAt(n-1)<=56319&&56320<=t.charCodeAt(n)&&t.charCodeAt(n)<=57343)continue;const e=getGraphemeBreakProperty(codePointAt(t,n));if(a=e,!((s=i)===Other&&a===Skin_Tone||s===Extend&&a===Other||s===Other&&a===Extend||s===CR&&a===LF||s!==Control&&s!==CR&&s!==LF&&a!==Control&&a!==CR&&a!==LF&&(s===L&&(a===L||a===V||a===LV||a===LVT)||!(s!==LV&&s!==V||a!==V&&a!==T)||(s===LVT||s===T)&&a===T||s===Regional_Indicator&&a===Regional_Indicator||a===Extend||a===SpacingMark)))return n;i=e}var s,a;return t.length}function getGraphemeBreakProperty(t){return 13===t?CR:10===t?LF:0<=t&&t<=9||11<=t&&t<=12||14<=t&&t<=31||127<=t&&t<=159||173===t||1536<=t&&t<=1541||1564===t||1757===t||1807===t||6158===t||8203===t||8206<=t&&t<=8207||8232===t||8233===t||8234<=t&&t<=8238||8288<=t&&t<=8292||8293===t||8294<=t&&t<=8303||55296<=t&&t<=57343||65279===t||65520<=t&&t<=65528||65529<=t&&t<=65531||69821===t||113824<=t&&t<=113827||119155<=t&&t<=119162||917504===t||917505===t||917506<=t&&t<=917535||917536<=t&&t<=917631||917632<=t&&t<=917759||918e3<=t&&t<=921599?Control:768<=t&&t<=879||1155<=t&&t<=1159||1160<=t&&t<=1161||1425<=t&&t<=1469||1471===t||1473<=t&&t<=1474||1476<=t&&t<=1477||1479===t||1552<=t&&t<=1562||1611<=t&&t<=1631||1648===t||1750<=t&&t<=1756||1759<=t&&t<=1764||1767<=t&&t<=1768||1770<=t&&t<=1773||1809===t||1840<=t&&t<=1866||1958<=t&&t<=1968||2027<=t&&t<=2035||2070<=t&&t<=2073||2075<=t&&t<=2083||2085<=t&&t<=2087||2089<=t&&t<=2093||2137<=t&&t<=2139||2275<=t&&t<=2306||2362===t||2364===t||2369<=t&&t<=2376||2381===t||2385<=t&&t<=2391||2402<=t&&t<=2403||2433===t||2492===t||2494===t||2497<=t&&t<=2500||2509===t||2519===t||2530<=t&&t<=2531||2561<=t&&t<=2562||2620===t||2625<=t&&t<=2626||2631<=t&&t<=2632||2635<=t&&t<=2637||2641===t||2672<=t&&t<=2673||2677===t||2689<=t&&t<=2690||2748===t||2753<=t&&t<=2757||2759<=t&&t<=2760||2765===t||2786<=t&&t<=2787||2817===t||2876===t||2878===t||2879===t||2881<=t&&t<=2884||2893===t||2902===t||2903===t||2914<=t&&t<=2915||2946===t||3006===t||3008===t||3021===t||3031===t||3072===t||3134<=t&&t<=3136||3142<=t&&t<=3144||3146<=t&&t<=3149||3157<=t&&t<=3158||3170<=t&&t<=3171||3201===t||3260===t||3263===t||3266===t||3270===t||3276<=t&&t<=3277||3285<=t&&t<=3286||3298<=t&&t<=3299||3329===t||3390===t||3393<=t&&t<=3396||3405===t||3415===t||3426<=t&&t<=3427||3530===t||3535===t||3538<=t&&t<=3540||3542===t||3551===t||3633===t||3636<=t&&t<=3642||3655<=t&&t<=3662||3761===t||3764<=t&&t<=3769||3771<=t&&t<=3772||3784<=t&&t<=3789||3864<=t&&t<=3865||3893===t||3895===t||3897===t||3953<=t&&t<=3966||3968<=t&&t<=3972||3974<=t&&t<=3975||3981<=t&&t<=3991||3993<=t&&t<=4028||4038===t||4141<=t&&t<=4144||4146<=t&&t<=4151||4153<=t&&t<=4154||4157<=t&&t<=4158||4184<=t&&t<=4185||4190<=t&&t<=4192||4209<=t&&t<=4212||4226===t||4229<=t&&t<=4230||4237===t||4253===t||4957<=t&&t<=4959||5906<=t&&t<=5908||5938<=t&&t<=5940||5970<=t&&t<=5971||6002<=t&&t<=6003||6068<=t&&t<=6069||6071<=t&&t<=6077||6086===t||6089<=t&&t<=6099||6109===t||6155<=t&&t<=6157||6313===t||6432<=t&&t<=6434||6439<=t&&t<=6440||6450===t||6457<=t&&t<=6459||6679<=t&&t<=6680||6683===t||6742===t||6744<=t&&t<=6750||6752===t||6754===t||6757<=t&&t<=6764||6771<=t&&t<=6780||6783===t||6832<=t&&t<=6845||6846===t||6912<=t&&t<=6915||6964===t||6966<=t&&t<=6970||6972===t||6978===t||7019<=t&&t<=7027||7040<=t&&t<=7041||7074<=t&&t<=7077||7080<=t&&t<=7081||7083<=t&&t<=7085||7142===t||7144<=t&&t<=7145||7149===t||7151<=t&&t<=7153||7212<=t&&t<=7219||7222<=t&&t<=7223||7376<=t&&t<=7378||7380<=t&&t<=7392||7394<=t&&t<=7400||7405===t||7412===t||7416<=t&&t<=7417||7616<=t&&t<=7669||7676<=t&&t<=7679||8204<=t&&t<=8205||8400<=t&&t<=8412||8413<=t&&t<=8416||8417===t||8418<=t&&t<=8420||8421<=t&&t<=8432||11503<=t&&t<=11505||11647===t||11744<=t&&t<=11775||12330<=t&&t<=12333||12334<=t&&t<=12335||12441<=t&&t<=12442||42607===t||42608<=t&&t<=42610||42612<=t&&t<=42621||42654<=t&&t<=42655||42736<=t&&t<=42737||43010===t||43014===t||43019===t||43045<=t&&t<=43046||43204===t||43232<=t&&t<=43249||43302<=t&&t<=43309||43335<=t&&t<=43345||43392<=t&&t<=43394||43443===t||43446<=t&&t<=43449||43452===t||43493===t||43561<=t&&t<=43566||43569<=t&&t<=43570||43573<=t&&t<=43574||43587===t||43596===t||43644===t||43696===t||43698<=t&&t<=43700||43703<=t&&t<=43704||43710<=t&&t<=43711||43713===t||43756<=t&&t<=43757||43766===t||44005===t||44008===t||44013===t||64286===t||65024<=t&&t<=65039||65056<=t&&t<=65071||65438<=t&&t<=65439||66045===t||66272===t||66422<=t&&t<=66426||68097<=t&&t<=68099||68101<=t&&t<=68102||68108<=t&&t<=68111||68152<=t&&t<=68154||68159===t||68325<=t&&t<=68326||69633===t||69688<=t&&t<=69702||69759<=t&&t<=69761||69811<=t&&t<=69814||69817<=t&&t<=69818||69888<=t&&t<=69890||69927<=t&&t<=69931||69933<=t&&t<=69940||70003===t||70016<=t&&t<=70017||70070<=t&&t<=70078||70090<=t&&t<=70092||70191<=t&&t<=70193||70196===t||70198<=t&&t<=70199||70367===t||70371<=t&&t<=70378||70400<=t&&t<=70401||70460===t||70462===t||70464===t||70487===t||70502<=t&&t<=70508||70512<=t&&t<=70516||70832===t||70835<=t&&t<=70840||70842===t||70845===t||70847<=t&&t<=70848||70850<=t&&t<=70851||71087===t||71090<=t&&t<=71093||71100<=t&&t<=71101||71103<=t&&t<=71104||71132<=t&&t<=71133||71219<=t&&t<=71226||71229===t||71231<=t&&t<=71232||71339===t||71341===t||71344<=t&&t<=71349||71351===t||71453<=t&&t<=71455||71458<=t&&t<=71461||71463<=t&&t<=71467||92912<=t&&t<=92916||92976<=t&&t<=92982||94095<=t&&t<=94098||113821<=t&&t<=113822||119141===t||119143<=t&&t<=119145||119150<=t&&t<=119154||119163<=t&&t<=119170||119173<=t&&t<=119179||119210<=t&&t<=119213||119362<=t&&t<=119364||121344<=t&&t<=121398||121403<=t&&t<=121452||121461===t||121476===t||121499<=t&&t<=121503||121505<=t&&t<=121519||125136<=t&&t<=125142||917760<=t&&t<=917999?Extend:127462<=t&&t<=127487?Regional_Indicator:127995<=t&&t<=127999?Skin_Tone:2307===t||2363===t||2366<=t&&t<=2368||2377<=t&&t<=2380||2382<=t&&t<=2383||2434<=t&&t<=2435||2495<=t&&t<=2496||2503<=t&&t<=2504||2507<=t&&t<=2508||2563===t||2622<=t&&t<=2624||2691===t||2750<=t&&t<=2752||2761===t||2763<=t&&t<=2764||2818<=t&&t<=2819||2880===t||2887<=t&&t<=2888||2891<=t&&t<=2892||3007===t||3009<=t&&t<=3010||3014<=t&&t<=3016||3018<=t&&t<=3020||3073<=t&&t<=3075||3137<=t&&t<=3140||3202<=t&&t<=3203||3262===t||3264<=t&&t<=3265||3267<=t&&t<=3268||3271<=t&&t<=3272||3274<=t&&t<=3275||3330<=t&&t<=3331||3391<=t&&t<=3392||3398<=t&&t<=3400||3402<=t&&t<=3404||3458<=t&&t<=3459||3536<=t&&t<=3537||3544<=t&&t<=3550||3570<=t&&t<=3571||3635===t||3763===t||3902<=t&&t<=3903||3967===t||4145===t||4155<=t&&t<=4156||4182<=t&&t<=4183||4228===t||6070===t||6078<=t&&t<=6085||6087<=t&&t<=6088||6435<=t&&t<=6438||6441<=t&&t<=6443||6448<=t&&t<=6449||6451<=t&&t<=6456||6681<=t&&t<=6682||6741===t||6743===t||6765<=t&&t<=6770||6916===t||6965===t||6971===t||6973<=t&&t<=6977||6979<=t&&t<=6980||7042===t||7073===t||7078<=t&&t<=7079||7082===t||7143===t||7146<=t&&t<=7148||7150===t||7154<=t&&t<=7155||7204<=t&&t<=7211||7220<=t&&t<=7221||7393===t||7410<=t&&t<=7411||43043<=t&&t<=43044||43047===t||43136<=t&&t<=43137||43188<=t&&t<=43203||43346<=t&&t<=43347||43395===t||43444<=t&&t<=43445||43450<=t&&t<=43451||43453<=t&&t<=43456||43567<=t&&t<=43568||43571<=t&&t<=43572||43597===t||43755===t||43758<=t&&t<=43759||43765===t||44003<=t&&t<=44004||44006<=t&&t<=44007||44009<=t&&t<=44010||44012===t||69632===t||69634===t||69762===t||69808<=t&&t<=69810||69815<=t&&t<=69816||69932===t||70018===t||70067<=t&&t<=70069||70079<=t&&t<=70080||70188<=t&&t<=70190||70194<=t&&t<=70195||70197===t||70368<=t&&t<=70370||70402<=t&&t<=70403||70463===t||70465<=t&&t<=70468||70471<=t&&t<=70472||70475<=t&&t<=70477||70498<=t&&t<=70499||70833<=t&&t<=70834||70841===t||70843<=t&&t<=70844||70846===t||70849===t||71088<=t&&t<=71089||71096<=t&&t<=71099||71102===t||71216<=t&&t<=71218||71227<=t&&t<=71228||71230===t||71340===t||71342<=t&&t<=71343||71350===t||71456<=t&&t<=71457||71462===t||94033<=t&&t<=94078||119142===t||119149===t?SpacingMark:4352<=t&&t<=4447||43360<=t&&t<=43388?L:4448<=t&&t<=4519||55216<=t&&t<=55238?V:4520<=t&&t<=4607||55243<=t&&t<=55291?T:44032===t||44060===t||44088===t||44116===t||44144===t||44172===t||44200===t||44228===t||44256===t||44284===t||44312===t||44340===t||44368===t||44396===t||44424===t||44452===t||44480===t||44508===t||44536===t||44564===t||44592===t||44620===t||44648===t||44676===t||44704===t||44732===t||44760===t||44788===t||44816===t||44844===t||44872===t||44900===t||44928===t||44956===t||44984===t||45012===t||45040===t||45068===t||45096===t||45124===t||45152===t||45180===t||45208===t||45236===t||45264===t||45292===t||45320===t||45348===t||45376===t||45404===t||45432===t||45460===t||45488===t||45516===t||45544===t||45572===t||45600===t||45628===t||45656===t||45684===t||45712===t||45740===t||45768===t||45796===t||45824===t||45852===t||45880===t||45908===t||45936===t||45964===t||45992===t||46020===t||46048===t||46076===t||46104===t||46132===t||46160===t||46188===t||46216===t||46244===t||46272===t||46300===t||46328===t||46356===t||46384===t||46412===t||46440===t||46468===t||46496===t||46524===t||46552===t||46580===t||46608===t||46636===t||46664===t||46692===t||46720===t||46748===t||46776===t||46804===t||46832===t||46860===t||46888===t||46916===t||46944===t||46972===t||47e3===t||47028===t||47056===t||47084===t||47112===t||47140===t||47168===t||47196===t||47224===t||47252===t||47280===t||47308===t||47336===t||47364===t||47392===t||47420===t||47448===t||47476===t||47504===t||47532===t||47560===t||47588===t||47616===t||47644===t||47672===t||47700===t||47728===t||47756===t||47784===t||47812===t||47840===t||47868===t||47896===t||47924===t||47952===t||47980===t||48008===t||48036===t||48064===t||48092===t||48120===t||48148===t||48176===t||48204===t||48232===t||48260===t||48288===t||48316===t||48344===t||48372===t||48400===t||48428===t||48456===t||48484===t||48512===t||48540===t||48568===t||48596===t||48624===t||48652===t||48680===t||48708===t||48736===t||48764===t||48792===t||48820===t||48848===t||48876===t||48904===t||48932===t||48960===t||48988===t||49016===t||49044===t||49072===t||49100===t||49128===t||49156===t||49184===t||49212===t||49240===t||49268===t||49296===t||49324===t||49352===t||49380===t||49408===t||49436===t||49464===t||49492===t||49520===t||49548===t||49576===t||49604===t||49632===t||49660===t||49688===t||49716===t||49744===t||49772===t||49800===t||49828===t||49856===t||49884===t||49912===t||49940===t||49968===t||49996===t||50024===t||50052===t||50080===t||50108===t||50136===t||50164===t||50192===t||50220===t||50248===t||50276===t||50304===t||50332===t||50360===t||50388===t||50416===t||50444===t||50472===t||50500===t||50528===t||50556===t||50584===t||50612===t||50640===t||50668===t||50696===t||50724===t||50752===t||50780===t||50808===t||50836===t||50864===t||50892===t||50920===t||50948===t||50976===t||51004===t||51032===t||51060===t||51088===t||51116===t||51144===t||51172===t||51200===t||51228===t||51256===t||51284===t||51312===t||51340===t||51368===t||51396===t||51424===t||51452===t||51480===t||51508===t||51536===t||51564===t||51592===t||51620===t||51648===t||51676===t||51704===t||51732===t||51760===t||51788===t||51816===t||51844===t||51872===t||51900===t||51928===t||51956===t||51984===t||52012===t||52040===t||52068===t||52096===t||52124===t||52152===t||52180===t||52208===t||52236===t||52264===t||52292===t||52320===t||52348===t||52376===t||52404===t||52432===t||52460===t||52488===t||52516===t||52544===t||52572===t||52600===t||52628===t||52656===t||52684===t||52712===t||52740===t||52768===t||52796===t||52824===t||52852===t||52880===t||52908===t||52936===t||52964===t||52992===t||53020===t||53048===t||53076===t||53104===t||53132===t||53160===t||53188===t||53216===t||53244===t||53272===t||53300===t||53328===t||53356===t||53384===t||53412===t||53440===t||53468===t||53496===t||53524===t||53552===t||53580===t||53608===t||53636===t||53664===t||53692===t||53720===t||53748===t||53776===t||53804===t||53832===t||53860===t||53888===t||53916===t||53944===t||53972===t||54e3===t||54028===t||54056===t||54084===t||54112===t||54140===t||54168===t||54196===t||54224===t||54252===t||54280===t||54308===t||54336===t||54364===t||54392===t||54420===t||54448===t||54476===t||54504===t||54532===t||54560===t||54588===t||54616===t||54644===t||54672===t||54700===t||54728===t||54756===t||54784===t||54812===t||54840===t||54868===t||54896===t||54924===t||54952===t||54980===t||55008===t||55036===t||55064===t||55092===t||55120===t||55148===t||55176===t?LV:44033<=t&&t<=44059||44061<=t&&t<=44087||44089<=t&&t<=44115||44117<=t&&t<=44143||44145<=t&&t<=44171||44173<=t&&t<=44199||44201<=t&&t<=44227||44229<=t&&t<=44255||44257<=t&&t<=44283||44285<=t&&t<=44311||44313<=t&&t<=44339||44341<=t&&t<=44367||44369<=t&&t<=44395||44397<=t&&t<=44423||44425<=t&&t<=44451||44453<=t&&t<=44479||44481<=t&&t<=44507||44509<=t&&t<=44535||44537<=t&&t<=44563||44565<=t&&t<=44591||44593<=t&&t<=44619||44621<=t&&t<=44647||44649<=t&&t<=44675||44677<=t&&t<=44703||44705<=t&&t<=44731||44733<=t&&t<=44759||44761<=t&&t<=44787||44789<=t&&t<=44815||44817<=t&&t<=44843||44845<=t&&t<=44871||44873<=t&&t<=44899||44901<=t&&t<=44927||44929<=t&&t<=44955||44957<=t&&t<=44983||44985<=t&&t<=45011||45013<=t&&t<=45039||45041<=t&&t<=45067||45069<=t&&t<=45095||45097<=t&&t<=45123||45125<=t&&t<=45151||45153<=t&&t<=45179||45181<=t&&t<=45207||45209<=t&&t<=45235||45237<=t&&t<=45263||45265<=t&&t<=45291||45293<=t&&t<=45319||45321<=t&&t<=45347||45349<=t&&t<=45375||45377<=t&&t<=45403||45405<=t&&t<=45431||45433<=t&&t<=45459||45461<=t&&t<=45487||45489<=t&&t<=45515||45517<=t&&t<=45543||45545<=t&&t<=45571||45573<=t&&t<=45599||45601<=t&&t<=45627||45629<=t&&t<=45655||45657<=t&&t<=45683||45685<=t&&t<=45711||45713<=t&&t<=45739||45741<=t&&t<=45767||45769<=t&&t<=45795||45797<=t&&t<=45823||45825<=t&&t<=45851||45853<=t&&t<=45879||45881<=t&&t<=45907||45909<=t&&t<=45935||45937<=t&&t<=45963||45965<=t&&t<=45991||45993<=t&&t<=46019||46021<=t&&t<=46047||46049<=t&&t<=46075||46077<=t&&t<=46103||46105<=t&&t<=46131||46133<=t&&t<=46159||46161<=t&&t<=46187||46189<=t&&t<=46215||46217<=t&&t<=46243||46245<=t&&t<=46271||46273<=t&&t<=46299||46301<=t&&t<=46327||46329<=t&&t<=46355||46357<=t&&t<=46383||46385<=t&&t<=46411||46413<=t&&t<=46439||46441<=t&&t<=46467||46469<=t&&t<=46495||46497<=t&&t<=46523||46525<=t&&t<=46551||46553<=t&&t<=46579||46581<=t&&t<=46607||46609<=t&&t<=46635||46637<=t&&t<=46663||46665<=t&&t<=46691||46693<=t&&t<=46719||46721<=t&&t<=46747||46749<=t&&t<=46775||46777<=t&&t<=46803||46805<=t&&t<=46831||46833<=t&&t<=46859||46861<=t&&t<=46887||46889<=t&&t<=46915||46917<=t&&t<=46943||46945<=t&&t<=46971||46973<=t&&t<=46999||47001<=t&&t<=47027||47029<=t&&t<=47055||47057<=t&&t<=47083||47085<=t&&t<=47111||47113<=t&&t<=47139||47141<=t&&t<=47167||47169<=t&&t<=47195||47197<=t&&t<=47223||47225<=t&&t<=47251||47253<=t&&t<=47279||47281<=t&&t<=47307||47309<=t&&t<=47335||47337<=t&&t<=47363||47365<=t&&t<=47391||47393<=t&&t<=47419||47421<=t&&t<=47447||47449<=t&&t<=47475||47477<=t&&t<=47503||47505<=t&&t<=47531||47533<=t&&t<=47559||47561<=t&&t<=47587||47589<=t&&t<=47615||47617<=t&&t<=47643||47645<=t&&t<=47671||47673<=t&&t<=47699||47701<=t&&t<=47727||47729<=t&&t<=47755||47757<=t&&t<=47783||47785<=t&&t<=47811||47813<=t&&t<=47839||47841<=t&&t<=47867||47869<=t&&t<=47895||47897<=t&&t<=47923||47925<=t&&t<=47951||47953<=t&&t<=47979||47981<=t&&t<=48007||48009<=t&&t<=48035||48037<=t&&t<=48063||48065<=t&&t<=48091||48093<=t&&t<=48119||48121<=t&&t<=48147||48149<=t&&t<=48175||48177<=t&&t<=48203||48205<=t&&t<=48231||48233<=t&&t<=48259||48261<=t&&t<=48287||48289<=t&&t<=48315||48317<=t&&t<=48343||48345<=t&&t<=48371||48373<=t&&t<=48399||48401<=t&&t<=48427||48429<=t&&t<=48455||48457<=t&&t<=48483||48485<=t&&t<=48511||48513<=t&&t<=48539||48541<=t&&t<=48567||48569<=t&&t<=48595||48597<=t&&t<=48623||48625<=t&&t<=48651||48653<=t&&t<=48679||48681<=t&&t<=48707||48709<=t&&t<=48735||48737<=t&&t<=48763||48765<=t&&t<=48791||48793<=t&&t<=48819||48821<=t&&t<=48847||48849<=t&&t<=48875||48877<=t&&t<=48903||48905<=t&&t<=48931||48933<=t&&t<=48959||48961<=t&&t<=48987||48989<=t&&t<=49015||49017<=t&&t<=49043||49045<=t&&t<=49071||49073<=t&&t<=49099||49101<=t&&t<=49127||49129<=t&&t<=49155||49157<=t&&t<=49183||49185<=t&&t<=49211||49213<=t&&t<=49239||49241<=t&&t<=49267||49269<=t&&t<=49295||49297<=t&&t<=49323||49325<=t&&t<=49351||49353<=t&&t<=49379||49381<=t&&t<=49407||49409<=t&&t<=49435||49437<=t&&t<=49463||49465<=t&&t<=49491||49493<=t&&t<=49519||49521<=t&&t<=49547||49549<=t&&t<=49575||49577<=t&&t<=49603||49605<=t&&t<=49631||49633<=t&&t<=49659||49661<=t&&t<=49687||49689<=t&&t<=49715||49717<=t&&t<=49743||49745<=t&&t<=49771||49773<=t&&t<=49799||49801<=t&&t<=49827||49829<=t&&t<=49855||49857<=t&&t<=49883||49885<=t&&t<=49911||49913<=t&&t<=49939||49941<=t&&t<=49967||49969<=t&&t<=49995||49997<=t&&t<=50023||50025<=t&&t<=50051||50053<=t&&t<=50079||50081<=t&&t<=50107||50109<=t&&t<=50135||50137<=t&&t<=50163||50165<=t&&t<=50191||50193<=t&&t<=50219||50221<=t&&t<=50247||50249<=t&&t<=50275||50277<=t&&t<=50303||50305<=t&&t<=50331||50333<=t&&t<=50359||50361<=t&&t<=50387||50389<=t&&t<=50415||50417<=t&&t<=50443||50445<=t&&t<=50471||50473<=t&&t<=50499||50501<=t&&t<=50527||50529<=t&&t<=50555||50557<=t&&t<=50583||50585<=t&&t<=50611||50613<=t&&t<=50639||50641<=t&&t<=50667||50669<=t&&t<=50695||50697<=t&&t<=50723||50725<=t&&t<=50751||50753<=t&&t<=50779||50781<=t&&t<=50807||50809<=t&&t<=50835||50837<=t&&t<=50863||50865<=t&&t<=50891||50893<=t&&t<=50919||50921<=t&&t<=50947||50949<=t&&t<=50975||50977<=t&&t<=51003||51005<=t&&t<=51031||51033<=t&&t<=51059||51061<=t&&t<=51087||51089<=t&&t<=51115||51117<=t&&t<=51143||51145<=t&&t<=51171||51173<=t&&t<=51199||51201<=t&&t<=51227||51229<=t&&t<=51255||51257<=t&&t<=51283||51285<=t&&t<=51311||51313<=t&&t<=51339||51341<=t&&t<=51367||51369<=t&&t<=51395||51397<=t&&t<=51423||51425<=t&&t<=51451||51453<=t&&t<=51479||51481<=t&&t<=51507||51509<=t&&t<=51535||51537<=t&&t<=51563||51565<=t&&t<=51591||51593<=t&&t<=51619||51621<=t&&t<=51647||51649<=t&&t<=51675||51677<=t&&t<=51703||51705<=t&&t<=51731||51733<=t&&t<=51759||51761<=t&&t<=51787||51789<=t&&t<=51815||51817<=t&&t<=51843||51845<=t&&t<=51871||51873<=t&&t<=51899||51901<=t&&t<=51927||51929<=t&&t<=51955||51957<=t&&t<=51983||51985<=t&&t<=52011||52013<=t&&t<=52039||52041<=t&&t<=52067||52069<=t&&t<=52095||52097<=t&&t<=52123||52125<=t&&t<=52151||52153<=t&&t<=52179||52181<=t&&t<=52207||52209<=t&&t<=52235||52237<=t&&t<=52263||52265<=t&&t<=52291||52293<=t&&t<=52319||52321<=t&&t<=52347||52349<=t&&t<=52375||52377<=t&&t<=52403||52405<=t&&t<=52431||52433<=t&&t<=52459||52461<=t&&t<=52487||52489<=t&&t<=52515||52517<=t&&t<=52543||52545<=t&&t<=52571||52573<=t&&t<=52599||52601<=t&&t<=52627||52629<=t&&t<=52655||52657<=t&&t<=52683||52685<=t&&t<=52711||52713<=t&&t<=52739||52741<=t&&t<=52767||52769<=t&&t<=52795||52797<=t&&t<=52823||52825<=t&&t<=52851||52853<=t&&t<=52879||52881<=t&&t<=52907||52909<=t&&t<=52935||52937<=t&&t<=52963||52965<=t&&t<=52991||52993<=t&&t<=53019||53021<=t&&t<=53047||53049<=t&&t<=53075||53077<=t&&t<=53103||53105<=t&&t<=53131||53133<=t&&t<=53159||53161<=t&&t<=53187||53189<=t&&t<=53215||53217<=t&&t<=53243||53245<=t&&t<=53271||53273<=t&&t<=53299||53301<=t&&t<=53327||53329<=t&&t<=53355||53357<=t&&t<=53383||53385<=t&&t<=53411||53413<=t&&t<=53439||53441<=t&&t<=53467||53469<=t&&t<=53495||53497<=t&&t<=53523||53525<=t&&t<=53551||53553<=t&&t<=53579||53581<=t&&t<=53607||53609<=t&&t<=53635||53637<=t&&t<=53663||53665<=t&&t<=53691||53693<=t&&t<=53719||53721<=t&&t<=53747||53749<=t&&t<=53775||53777<=t&&t<=53803||53805<=t&&t<=53831||53833<=t&&t<=53859||53861<=t&&t<=53887||53889<=t&&t<=53915||53917<=t&&t<=53943||53945<=t&&t<=53971||53973<=t&&t<=53999||54001<=t&&t<=54027||54029<=t&&t<=54055||54057<=t&&t<=54083||54085<=t&&t<=54111||54113<=t&&t<=54139||54141<=t&&t<=54167||54169<=t&&t<=54195||54197<=t&&t<=54223||54225<=t&&t<=54251||54253<=t&&t<=54279||54281<=t&&t<=54307||54309<=t&&t<=54335||54337<=t&&t<=54363||54365<=t&&t<=54391||54393<=t&&t<=54419||54421<=t&&t<=54447||54449<=t&&t<=54475||54477<=t&&t<=54503||54505<=t&&t<=54531||54533<=t&&t<=54559||54561<=t&&t<=54587||54589<=t&&t<=54615||54617<=t&&t<=54643||54645<=t&&t<=54671||54673<=t&&t<=54699||54701<=t&&t<=54727||54729<=t&&t<=54755||54757<=t&&t<=54783||54785<=t&&t<=54811||54813<=t&&t<=54839||54841<=t&&t<=54867||54869<=t&&t<=54895||54897<=t&&t<=54923||54925<=t&&t<=54951||54953<=t&&t<=54979||54981<=t&&t<=55007||55009<=t&&t<=55035||55037<=t&&t<=55063||55065<=t&&t<=55091||55093<=t&&t<=55119||55121<=t&&t<=55147||55149<=t&&t<=55175||55177<=t&&t<=55203?LVT:Other}var GraphemeSplitter={splitGraphemes:function(t){if(/^[\x20-\xFF]*$/.test(t))return t;const e=[];let i,s=0;for(;(i=nextBreak(t,s))<t.length;)e.push(t.slice(s,i)),s=i;return s<t.length&&e.push(t.slice(s)),e},countGraphemes:function(t){let e,i=0,s=0;for(;(e=nextBreak(t,s))<t.length;)s=e,i++;return s<t.length&&i++,i},nextBreak:nextBreak};class Token{constructor(t,e){this.type=t,this.value=e}}class Lexer{constructor(t){this.s=GraphemeSplitter.splitGraphemes(t),this.pos=0}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:null}peek(){return this.pos<this.s.length?this.s[this.pos]:null}scan(t){let e;return(e="string"==typeof this.s?t.exec(this.s.slice(this.pos)):t.exec(this.s.slice(this.pos).join("")))?(this.pos+=e[0].length,e[0]):null}isWhiteSpace(){return-1!==" \f\n\r\t\vÂ \u2028\u2029".indexOf(this.s[this.pos])}skipWhiteSpace(){const t=this.pos;for(;!this.end()&&this.isWhiteSpace();)this.get();return this.pos-t}makeToken(){if(this.end())return null;if(this.skipWhiteSpace()>0)return new Token("space");let t=null;if("\\"===this.peek()){if(this.get(),!this.end()){let e=this.scan(/^[a-zA-Z*]+/);e||(e=this.get()),t="bgroup"===e?new Token("{"):"egroup"===e?new Token("}"):new Token("command",e)}}else if("{"===this.peek()||"}"===this.peek())t=new Token(this.get());else if("#"===this.peek()){if(this.get(),!this.end()){let e=!1,i=this.peek();if(/[0-9?]/.test(i)&&(e=!0,this.pos+1<this.s.length)){const t=this.s[this.pos+1];e=/[^0-9A-Za-z]/.test(t)}e?(t=new Token("#"),i=this.get(),t.value=i>="0"&&i<="9"?parseInt(i):"?"):t=new Token("literal","#")}}else"^"===this.peek()?t=new Token(this.get()):"_"===this.peek()?t=new Token(this.get()):"~"===this.peek()?(this.get(),t=new Token("command","space")):""===this.peek()?t=new Token("esc",this.get()):"$"===this.peek()?(this.get(),"$"===this.peek()?(this.get(),t=new Token("$$")):t=new Token("$")):t=new Token("literal",this.get());return t}}var Lexer$1={tokenize:function(t){const e=[],i=t.toString().split(/\r?\n/);let s="";for(const t of i){let e="";for(let i=0;i<t.length;i++){const a=t.charAt(i);if("%"===a&&"\\"!==e)break;s+=a,e=a}}const a=new Lexer(s);for(;!a.end();){const t=a.makeToken();t&&e.push(t)}return e}},metricMap={"AMS-Regular":{65:[0,.68889,0,0],66:[0,.68889,0,0],67:[0,.68889,0,0],68:[0,.68889,0,0],69:[0,.68889,0,0],70:[0,.68889,0,0],71:[0,.68889,0,0],72:[0,.68889,0,0],73:[0,.68889,0,0],74:[.16667,.68889,0,0],75:[0,.68889,0,0],76:[0,.68889,0,0],77:[0,.68889,0,0],78:[0,.68889,0,0],79:[.16667,.68889,0,0],80:[0,.68889,0,0],81:[.16667,.68889,0,0],82:[0,.68889,0,0],83:[0,.68889,0,0],84:[0,.68889,0,0],85:[0,.68889,0,0],86:[0,.68889,0,0],87:[0,.68889,0,0],88:[0,.68889,0,0],89:[0,.68889,0,0],90:[0,.68889,0,0],107:[0,.68889,0,0],165:[0,.675,.025,0],174:[.15559,.69224,0,0],240:[0,.68889,0,0],295:[0,.68889,0,0],710:[0,.825,0,0],732:[0,.9,0,0],770:[0,.825,0,0],771:[0,.9,0,0],989:[.08167,.58167,0,0],1008:[0,.43056,.04028,0],8245:[0,.54986,0,0],8463:[0,.68889,0,0],8487:[0,.68889,0,0],8498:[0,.68889,0,0],8502:[0,.68889,0,0],8503:[0,.68889,0,0],8504:[0,.68889,0,0],8513:[0,.68889,0,0],8592:[-.03598,.46402,0,0],8594:[-.03598,.46402,0,0],8602:[-.13313,.36687,0,0],8603:[-.13313,.36687,0,0],8606:[.01354,.52239,0,0],8608:[.01354,.52239,0,0],8610:[.01354,.52239,0,0],8611:[.01354,.52239,0,0],8619:[0,.54986,0,0],8620:[0,.54986,0,0],8621:[-.13313,.37788,0,0],8622:[-.13313,.36687,0,0],8624:[0,.69224,0,0],8625:[0,.69224,0,0],8630:[0,.43056,0,0],8631:[0,.43056,0,0],8634:[.08198,.58198,0,0],8635:[.08198,.58198,0,0],8638:[.19444,.69224,0,0],8639:[.19444,.69224,0,0],8642:[.19444,.69224,0,0],8643:[.19444,.69224,0,0],8644:[.1808,.675,0,0],8646:[.1808,.675,0,0],8647:[.1808,.675,0,0],8648:[.19444,.69224,0,0],8649:[.1808,.675,0,0],8650:[.19444,.69224,0,0],8651:[.01354,.52239,0,0],8652:[.01354,.52239,0,0],8653:[-.13313,.36687,0,0],8654:[-.13313,.36687,0,0],8655:[-.13313,.36687,0,0],8666:[.13667,.63667,0,0],8667:[.13667,.63667,0,0],8669:[-.13313,.37788,0,0],8672:[-.064,.437,0,0],8674:[-.064,.437,0,0],8705:[0,.825,0,0],8708:[0,.68889,0,0],8709:[.08167,.58167,0,0],8717:[0,.43056,0,0],8722:[-.03598,.46402,0,0],8724:[.08198,.69224,0,0],8726:[.08167,.58167,0,0],8733:[0,.69224,0,0],8736:[0,.69224,0,0],8737:[0,.69224,0,0],8738:[.03517,.52239,0,0],8739:[.08167,.58167,0,0],8740:[.25142,.74111,0,0],8741:[.08167,.58167,0,0],8742:[.25142,.74111,0,0],8756:[0,.69224,0,0],8757:[0,.69224,0,0],8764:[-.13313,.36687,0,0],8765:[-.13313,.37788,0,0],8769:[-.13313,.36687,0,0],8770:[-.03625,.46375,0,0],8774:[.30274,.79383,0,0],8776:[-.01688,.48312,0,0],8778:[.08167,.58167,0,0],8782:[.06062,.54986,0,0],8783:[.06062,.54986,0,0],8785:[.08198,.58198,0,0],8786:[.08198,.58198,0,0],8787:[.08198,.58198,0,0],8790:[0,.69224,0,0],8791:[.22958,.72958,0,0],8796:[.08198,.91667,0,0],8806:[.25583,.75583,0,0],8807:[.25583,.75583,0,0],8808:[.25142,.75726,0,0],8809:[.25142,.75726,0,0],8812:[.25583,.75583,0,0],8814:[.20576,.70576,0,0],8815:[.20576,.70576,0,0],8816:[.30274,.79383,0,0],8817:[.30274,.79383,0,0],8818:[.22958,.72958,0,0],8819:[.22958,.72958,0,0],8822:[.1808,.675,0,0],8823:[.1808,.675,0,0],8828:[.13667,.63667,0,0],8829:[.13667,.63667,0,0],8830:[.22958,.72958,0,0],8831:[.22958,.72958,0,0],8832:[.20576,.70576,0,0],8833:[.20576,.70576,0,0],8840:[.30274,.79383,0,0],8841:[.30274,.79383,0,0],8842:[.13597,.63597,0,0],8843:[.13597,.63597,0,0],8847:[.03517,.54986,0,0],8848:[.03517,.54986,0,0],8858:[.08198,.58198,0,0],8859:[.08198,.58198,0,0],8861:[.08198,.58198,0,0],8862:[0,.675,0,0],8863:[0,.675,0,0],8864:[0,.675,0,0],8865:[0,.675,0,0],8872:[0,.69224,0,0],8873:[0,.69224,0,0],8874:[0,.69224,0,0],8876:[0,.68889,0,0],8877:[0,.68889,0,0],8878:[0,.68889,0,0],8879:[0,.68889,0,0],8882:[.03517,.54986,0,0],8883:[.03517,.54986,0,0],8884:[.13667,.63667,0,0],8885:[.13667,.63667,0,0],8888:[0,.54986,0,0],8890:[.19444,.43056,0,0],8891:[.19444,.69224,0,0],8892:[.19444,.69224,0,0],8901:[0,.54986,0,0],8903:[.08167,.58167,0,0],8905:[.08167,.58167,0,0],8906:[.08167,.58167,0,0],8907:[0,.69224,0,0],8908:[0,.69224,0,0],8909:[-.03598,.46402,0,0],8910:[0,.54986,0,0],8911:[0,.54986,0,0],8912:[.03517,.54986,0,0],8913:[.03517,.54986,0,0],8914:[0,.54986,0,0],8915:[0,.54986,0,0],8916:[0,.69224,0,0],8918:[.0391,.5391,0,0],8919:[.0391,.5391,0,0],8920:[.03517,.54986,0,0],8921:[.03517,.54986,0,0],8922:[.38569,.88569,0,0],8923:[.38569,.88569,0,0],8926:[.13667,.63667,0,0],8927:[.13667,.63667,0,0],8928:[.30274,.79383,0,0],8929:[.30274,.79383,0,0],8934:[.23222,.74111,0,0],8935:[.23222,.74111,0,0],8936:[.23222,.74111,0,0],8937:[.23222,.74111,0,0],8938:[.20576,.70576,0,0],8939:[.20576,.70576,0,0],8940:[.30274,.79383,0,0],8941:[.30274,.79383,0,0],8994:[.19444,.69224,0,0],8995:[.19444,.69224,0,0],9416:[.15559,.69224,0,0],9484:[0,.69224,0,0],9488:[0,.69224,0,0],9492:[0,.37788,0,0],9496:[0,.37788,0,0],9585:[.19444,.68889,0,0],9586:[.19444,.74111,0,0],9632:[0,.675,0,0],9633:[0,.675,0,0],9650:[0,.54986,0,0],9651:[0,.54986,0,0],9654:[.03517,.54986,0,0],9660:[0,.54986,0,0],9661:[0,.54986,0,0],9664:[.03517,.54986,0,0],9674:[.11111,.69224,0,0],9733:[.19444,.69224,0,0],10003:[0,.69224,0,0],10016:[0,.69224,0,0],10731:[.11111,.69224,0,0],10846:[.19444,.75583,0,0],10877:[.13667,.63667,0,0],10878:[.13667,.63667,0,0],10885:[.25583,.75583,0,0],10886:[.25583,.75583,0,0],10887:[.13597,.63597,0,0],10888:[.13597,.63597,0,0],10889:[.26167,.75726,0,0],10890:[.26167,.75726,0,0],10891:[.48256,.98256,0,0],10892:[.48256,.98256,0,0],10901:[.13667,.63667,0,0],10902:[.13667,.63667,0,0],10933:[.25142,.75726,0,0],10934:[.25142,.75726,0,0],10935:[.26167,.75726,0,0],10936:[.26167,.75726,0,0],10937:[.26167,.75726,0,0],10938:[.26167,.75726,0,0],10949:[.25583,.75583,0,0],10950:[.25583,.75583,0,0],10955:[.28481,.79383,0,0],10956:[.28481,.79383,0,0],57350:[.08167,.58167,0,0],57351:[.08167,.58167,0,0],57352:[.08167,.58167,0,0],57353:[0,.43056,.04028,0],57356:[.25142,.75726,0,0],57357:[.25142,.75726,0,0],57358:[.41951,.91951,0,0],57359:[.30274,.79383,0,0],57360:[.30274,.79383,0,0],57361:[.41951,.91951,0,0],57366:[.25142,.75726,0,0],57367:[.25142,.75726,0,0],57368:[.25142,.75726,0,0],57369:[.25142,.75726,0,0],57370:[.13597,.63597,0,0],57371:[.13597,.63597,0,0]},"Caligraphic-Regular":{48:[0,.43056,0,0],49:[0,.43056,0,0],50:[0,.43056,0,0],51:[.19444,.43056,0,0],52:[.19444,.43056,0,0],53:[.19444,.43056,0,0],54:[0,.64444,0,0],55:[.19444,.43056,0,0],56:[0,.64444,0,0],57:[.19444,.43056,0,0],65:[0,.68333,0,.19445],66:[0,.68333,.03041,.13889],67:[0,.68333,.05834,.13889],68:[0,.68333,.02778,.08334],69:[0,.68333,.08944,.11111],70:[0,.68333,.09931,.11111],71:[.09722,.68333,.0593,.11111],72:[0,.68333,.00965,.11111],73:[0,.68333,.07382,0],74:[.09722,.68333,.18472,.16667],75:[0,.68333,.01445,.05556],76:[0,.68333,0,.13889],77:[0,.68333,0,.13889],78:[0,.68333,.14736,.08334],79:[0,.68333,.02778,.11111],80:[0,.68333,.08222,.08334],81:[.09722,.68333,0,.11111],82:[0,.68333,0,.08334],83:[0,.68333,.075,.13889],84:[0,.68333,.25417,0],85:[0,.68333,.09931,.08334],86:[0,.68333,.08222,0],87:[0,.68333,.08222,.08334],88:[0,.68333,.14643,.13889],89:[.09722,.68333,.08222,.08334],90:[0,.68333,.07944,.13889]},"Fraktur-Regular":{33:[0,.69141,0,0],34:[0,.69141,0,0],38:[0,.69141,0,0],39:[0,.69141,0,0],40:[.24982,.74947,0,0],41:[.24982,.74947,0,0],42:[0,.62119,0,0],43:[.08319,.58283,0,0],44:[0,.10803,0,0],45:[.08319,.58283,0,0],46:[0,.10803,0,0],47:[.24982,.74947,0,0],48:[0,.47534,0,0],49:[0,.47534,0,0],50:[0,.47534,0,0],51:[.18906,.47534,0,0],52:[.18906,.47534,0,0],53:[.18906,.47534,0,0],54:[0,.69141,0,0],55:[.18906,.47534,0,0],56:[0,.69141,0,0],57:[.18906,.47534,0,0],58:[0,.47534,0,0],59:[.12604,.47534,0,0],61:[-.13099,.36866,0,0],63:[0,.69141,0,0],65:[0,.69141,0,0],66:[0,.69141,0,0],67:[0,.69141,0,0],68:[0,.69141,0,0],69:[0,.69141,0,0],70:[.12604,.69141,0,0],71:[0,.69141,0,0],72:[.06302,.69141,0,0],73:[0,.69141,0,0],74:[.12604,.69141,0,0],75:[0,.69141,0,0],76:[0,.69141,0,0],77:[0,.69141,0,0],78:[0,.69141,0,0],79:[0,.69141,0,0],80:[.18906,.69141,0,0],81:[.03781,.69141,0,0],82:[0,.69141,0,0],83:[0,.69141,0,0],84:[0,.69141,0,0],85:[0,.69141,0,0],86:[0,.69141,0,0],87:[0,.69141,0,0],88:[0,.69141,0,0],89:[.18906,.69141,0,0],90:[.12604,.69141,0,0],91:[.24982,.74947,0,0],93:[.24982,.74947,0,0],94:[0,.69141,0,0],97:[0,.47534,0,0],98:[0,.69141,0,0],99:[0,.47534,0,0],100:[0,.62119,0,0],101:[0,.47534,0,0],102:[.18906,.69141,0,0],103:[.18906,.47534,0,0],104:[.18906,.69141,0,0],105:[0,.69141,0,0],106:[0,.69141,0,0],107:[0,.69141,0,0],108:[0,.69141,0,0],109:[0,.47534,0,0],110:[0,.47534,0,0],111:[0,.47534,0,0],112:[.18906,.52396,0,0],113:[.18906,.47534,0,0],114:[0,.47534,0,0],115:[0,.47534,0,0],116:[0,.62119,0,0],117:[0,.47534,0,0],118:[0,.52396,0,0],119:[0,.52396,0,0],120:[.18906,.47534,0,0],121:[.18906,.47534,0,0],122:[.18906,.47534,0,0],8216:[0,.69141,0,0],8217:[0,.69141,0,0],58112:[0,.62119,0,0],58113:[0,.62119,0,0],58114:[.18906,.69141,0,0],58115:[.18906,.69141,0,0],58116:[.18906,.47534,0,0],58117:[0,.69141,0,0],58118:[0,.62119,0,0],58119:[0,.47534,0,0]},"Main-Bold":{33:[0,.69444,0,0],34:[0,.69444,0,0],35:[.19444,.69444,0,0],36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:[0,.69444,0,0],39:[0,.69444,0,0],40:[.25,.75,0,0],41:[.25,.75,0,0],42:[0,.75,0,0],43:[.13333,.63333,0,0],44:[.19444,.15556,0,0],45:[0,.44444,0,0],46:[0,.15556,0,0],47:[.25,.75,0,0],48:[0,.64444,0,0],49:[0,.64444,0,0],50:[0,.64444,0,0],51:[0,.64444,0,0],52:[0,.64444,0,0],53:[0,.64444,0,0],54:[0,.64444,0,0],55:[0,.64444,0,0],56:[0,.64444,0,0],57:[0,.64444,0,0],58:[0,.44444,0,0],59:[.19444,.44444,0,0],60:[.08556,.58556,0,0],61:[-.10889,.39111,0,0],62:[.08556,.58556,0,0],63:[0,.69444,0,0],64:[0,.69444,0,0],65:[0,.68611,0,0],66:[0,.68611,0,0],67:[0,.68611,0,0],68:[0,.68611,0,0],69:[0,.68611,0,0],70:[0,.68611,0,0],71:[0,.68611,0,0],72:[0,.68611,0,0],73:[0,.68611,0,0],74:[0,.68611,0,0],75:[0,.68611,0,0],76:[0,.68611,0,0],77:[0,.68611,0,0],78:[0,.68611,0,0],79:[0,.68611,0,0],80:[0,.68611,0,0],81:[.19444,.68611,0,0],82:[0,.68611,0,0],83:[0,.68611,0,0],84:[0,.68611,0,0],85:[0,.68611,0,0],86:[0,.68611,.01597,0],87:[0,.68611,.01597,0],88:[0,.68611,0,0],89:[0,.68611,.02875,0],90:[0,.68611,0,0],91:[.25,.75,0,0],92:[.25,.75,0,0],93:[.25,.75,0,0],94:[0,.69444,0,0],95:[.31,.13444,.03194,0],96:[0,.69444,0,0],97:[0,.44444,0,0],98:[0,.69444,0,0],99:[0,.44444,0,0],100:[0,.69444,0,0],101:[0,.44444,0,0],102:[0,.69444,.10903,0],103:[.19444,.44444,.01597,0],104:[0,.69444,0,0],105:[0,.69444,0,0],106:[.19444,.69444,0,0],107:[0,.69444,0,0],108:[0,.69444,0,0],109:[0,.44444,0,0],110:[0,.44444,0,0],111:[0,.44444,0,0],112:[.19444,.44444,0,0],113:[.19444,.44444,0,0],114:[0,.44444,0,0],115:[0,.44444,0,0],116:[0,.63492,0,0],117:[0,.44444,0,0],118:[0,.44444,.01597,0],119:[0,.44444,.01597,0],120:[0,.44444,0,0],121:[.19444,.44444,.01597,0],122:[0,.44444,0,0],123:[.25,.75,0,0],124:[.25,.75,0,0],125:[.25,.75,0,0],126:[.35,.34444,0,0],168:[0,.69444,0,0],172:[0,.44444,0,0],175:[0,.59611,0,0],176:[0,.69444,0,0],177:[.13333,.63333,0,0],180:[0,.69444,0,0],215:[.13333,.63333,0,0],247:[.13333,.63333,0,0],305:[0,.44444,0,0],567:[.19444,.44444,0,0],710:[0,.69444,0,0],711:[0,.63194,0,0],713:[0,.59611,0,0],714:[0,.69444,0,0],715:[0,.69444,0,0],728:[0,.69444,0,0],729:[0,.69444,0,0],730:[0,.69444,0,0],732:[0,.69444,0,0],768:[0,.69444,0,0],769:[0,.69444,0,0],770:[0,.69444,0,0],771:[0,.69444,0,0],772:[0,.59611,0,0],774:[0,.69444,0,0],775:[0,.69444,0,0],776:[0,.69444,0,0],778:[0,.69444,0,0],779:[0,.69444,0,0],780:[0,.63194,0,0],824:[.19444,.69444,0,0],915:[0,.68611,0,0],916:[0,.68611,0,0],920:[0,.68611,0,0],923:[0,.68611,0,0],926:[0,.68611,0,0],928:[0,.68611,0,0],931:[0,.68611,0,0],933:[0,.68611,0,0],934:[0,.68611,0,0],936:[0,.68611,0,0],937:[0,.68611,0,0],8211:[0,.44444,.03194,0],8212:[0,.44444,.03194,0],8216:[0,.69444,0,0],8217:[0,.69444,0,0],8220:[0,.69444,0,0],8221:[0,.69444,0,0],8224:[.19444,.69444,0,0],8225:[.19444,.69444,0,0],8242:[0,.55556,0,0],8407:[0,.72444,.15486,0],8463:[0,.69444,0,0],8465:[0,.69444,0,0],8467:[0,.69444,0,0],8472:[.19444,.44444,0,0],8476:[0,.69444,0,0],8501:[0,.69444,0,0],8592:[-.10889,.39111,0,0],8593:[.19444,.69444,0,0],8594:[-.10889,.39111,0,0],8595:[.19444,.69444,0,0],8596:[-.10889,.39111,0,0],8597:[.25,.75,0,0],8598:[.19444,.69444,0,0],8599:[.19444,.69444,0,0],8600:[.19444,.69444,0,0],8601:[.19444,.69444,0,0],8636:[-.10889,.39111,0,0],8637:[-.10889,.39111,0,0],8640:[-.10889,.39111,0,0],8641:[-.10889,.39111,0,0],8656:[-.10889,.39111,0,0],8657:[.19444,.69444,0,0],8658:[-.10889,.39111,0,0],8659:[.19444,.69444,0,0],8660:[-.10889,.39111,0,0],8661:[.25,.75,0,0],8704:[0,.69444,0,0],8706:[0,.69444,.06389,0],8707:[0,.69444,0,0],8709:[.05556,.75,0,0],8711:[0,.68611,0,0],8712:[.08556,.58556,0,0],8715:[.08556,.58556,0,0],8722:[.13333,.63333,0,0],8723:[.13333,.63333,0,0],8725:[.25,.75,0,0],8726:[.25,.75,0,0],8727:[-.02778,.47222,0,0],8728:[-.02639,.47361,0,0],8729:[-.02639,.47361,0,0],8730:[.18,.82,0,0],8733:[0,.44444,0,0],8734:[0,.44444,0,0],8736:[0,.69224,0,0],8739:[.25,.75,0,0],8741:[.25,.75,0,0],8743:[0,.55556,0,0],8744:[0,.55556,0,0],8745:[0,.55556,0,0],8746:[0,.55556,0,0],8747:[.19444,.69444,.12778,0],8764:[-.10889,.39111,0,0],8768:[.19444,.69444,0,0],8771:[.00222,.50222,0,0],8776:[.02444,.52444,0,0],8781:[.00222,.50222,0,0],8801:[.00222,.50222,0,0],8804:[.19667,.69667,0,0],8805:[.19667,.69667,0,0],8810:[.08556,.58556,0,0],8811:[.08556,.58556,0,0],8826:[.08556,.58556,0,0],8827:[.08556,.58556,0,0],8834:[.08556,.58556,0,0],8835:[.08556,.58556,0,0],8838:[.19667,.69667,0,0],8839:[.19667,.69667,0,0],8846:[0,.55556,0,0],8849:[.19667,.69667,0,0],8850:[.19667,.69667,0,0],8851:[0,.55556,0,0],8852:[0,.55556,0,0],8853:[.13333,.63333,0,0],8854:[.13333,.63333,0,0],8855:[.13333,.63333,0,0],8856:[.13333,.63333,0,0],8857:[.13333,.63333,0,0],8866:[0,.69444,0,0],8867:[0,.69444,0,0],8868:[0,.69444,0,0],8869:[0,.69444,0,0],8900:[-.02639,.47361,0,0],8901:[-.02639,.47361,0,0],8902:[-.02778,.47222,0,0],8968:[.25,.75,0,0],8969:[.25,.75,0,0],8970:[.25,.75,0,0],8971:[.25,.75,0,0],8994:[-.13889,.36111,0,0],8995:[-.13889,.36111,0,0],9651:[.19444,.69444,0,0],9657:[-.02778,.47222,0,0],9661:[.19444,.69444,0,0],9667:[-.02778,.47222,0,0],9711:[.19444,.69444,0,0],9824:[.12963,.69444,0,0],9825:[.12963,.69444,0,0],9826:[.12963,.69444,0,0],9827:[.12963,.69444,0,0],9837:[0,.75,0,0],9838:[.19444,.69444,0,0],9839:[.19444,.69444,0,0],10216:[.25,.75,0,0],10217:[.25,.75,0,0],10815:[0,.68611,0,0],10927:[.19667,.69667,0,0],10928:[.19667,.69667,0,0]},"Main-Italic":{33:[0,.69444,.12417,0],34:[0,.69444,.06961,0],35:[.19444,.69444,.06616,0],37:[.05556,.75,.13639,0],38:[0,.69444,.09694,0],39:[0,.69444,.12417,0],40:[.25,.75,.16194,0],41:[.25,.75,.03694,0],42:[0,.75,.14917,0],43:[.05667,.56167,.03694,0],44:[.19444,.10556,0,0],45:[0,.43056,.02826,0],46:[0,.10556,0,0],47:[.25,.75,.16194,0],48:[0,.64444,.13556,0],49:[0,.64444,.13556,0],50:[0,.64444,.13556,0],51:[0,.64444,.13556,0],52:[.19444,.64444,.13556,0],53:[0,.64444,.13556,0],54:[0,.64444,.13556,0],55:[.19444,.64444,.13556,0],56:[0,.64444,.13556,0],57:[0,.64444,.13556,0],58:[0,.43056,.0582,0],59:[.19444,.43056,.0582,0],61:[-.13313,.36687,.06616,0],63:[0,.69444,.1225,0],64:[0,.69444,.09597,0],65:[0,.68333,0,0],66:[0,.68333,.10257,0],67:[0,.68333,.14528,0],68:[0,.68333,.09403,0],69:[0,.68333,.12028,0],70:[0,.68333,.13305,0],71:[0,.68333,.08722,0],72:[0,.68333,.16389,0],73:[0,.68333,.15806,0],74:[0,.68333,.14028,0],75:[0,.68333,.14528,0],76:[0,.68333,0,0],77:[0,.68333,.16389,0],78:[0,.68333,.16389,0],79:[0,.68333,.09403,0],80:[0,.68333,.10257,0],81:[.19444,.68333,.09403,0],82:[0,.68333,.03868,0],83:[0,.68333,.11972,0],84:[0,.68333,.13305,0],85:[0,.68333,.16389,0],86:[0,.68333,.18361,0],87:[0,.68333,.18361,0],88:[0,.68333,.15806,0],89:[0,.68333,.19383,0],90:[0,.68333,.14528,0],91:[.25,.75,.1875,0],93:[.25,.75,.10528,0],94:[0,.69444,.06646,0],95:[.31,.12056,.09208,0],97:[0,.43056,.07671,0],98:[0,.69444,.06312,0],99:[0,.43056,.05653,0],100:[0,.69444,.10333,0],101:[0,.43056,.07514,0],102:[.19444,.69444,.21194,0],103:[.19444,.43056,.08847,0],104:[0,.69444,.07671,0],105:[0,.65536,.1019,0],106:[.19444,.65536,.14467,0],107:[0,.69444,.10764,0],108:[0,.69444,.10333,0],109:[0,.43056,.07671,0],110:[0,.43056,.07671,0],111:[0,.43056,.06312,0],112:[.19444,.43056,.06312,0],113:[.19444,.43056,.08847,0],114:[0,.43056,.10764,0],115:[0,.43056,.08208,0],116:[0,.61508,.09486,0],117:[0,.43056,.07671,0],118:[0,.43056,.10764,0],119:[0,.43056,.10764,0],120:[0,.43056,.12042,0],121:[.19444,.43056,.08847,0],122:[0,.43056,.12292,0],126:[.35,.31786,.11585,0],163:[0,.69444,0,0],305:[0,.43056,0,.02778],567:[.19444,.43056,0,.08334],768:[0,.69444,0,0],769:[0,.69444,.09694,0],770:[0,.69444,.06646,0],771:[0,.66786,.11585,0],772:[0,.56167,.10333,0],774:[0,.69444,.10806,0],775:[0,.66786,.11752,0],776:[0,.66786,.10474,0],778:[0,.69444,0,0],779:[0,.69444,.1225,0],780:[0,.62847,.08295,0],915:[0,.68333,.13305,0],916:[0,.68333,0,0],920:[0,.68333,.09403,0],923:[0,.68333,0,0],926:[0,.68333,.15294,0],928:[0,.68333,.16389,0],931:[0,.68333,.12028,0],933:[0,.68333,.11111,0],934:[0,.68333,.05986,0],936:[0,.68333,.11111,0],937:[0,.68333,.10257,0],8211:[0,.43056,.09208,0],8212:[0,.43056,.09208,0],8216:[0,.69444,.12417,0],8217:[0,.69444,.12417,0],8220:[0,.69444,.1685,0],8221:[0,.69444,.06961,0],8463:[0,.68889,0,0]},"Main-Regular":{32:[0,0,0,0],33:[0,.69444,0,0],34:[0,.69444,0,0],35:[.19444,.69444,0,0],36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:[0,.69444,0,0],39:[0,.69444,0,0],40:[.25,.75,0,0],41:[.25,.75,0,0],42:[0,.75,0,0],43:[.08333,.58333,0,0],44:[.19444,.10556,0,0],45:[0,.43056,0,0],46:[0,.10556,0,0],47:[.25,.75,0,0],48:[0,.64444,0,0],49:[0,.64444,0,0],50:[0,.64444,0,0],51:[0,.64444,0,0],52:[0,.64444,0,0],53:[0,.64444,0,0],54:[0,.64444,0,0],55:[0,.64444,0,0],56:[0,.64444,0,0],57:[0,.64444,0,0],58:[0,.43056,0,0],59:[.19444,.43056,0,0],60:[.0391,.5391,0,0],61:[-.13313,.36687,0,0],62:[.0391,.5391,0,0],63:[0,.69444,0,0],64:[0,.69444,0,0],65:[0,.68333,0,0],66:[0,.68333,0,0],67:[0,.68333,0,0],68:[0,.68333,0,0],69:[0,.68333,0,0],70:[0,.68333,0,0],71:[0,.68333,0,0],72:[0,.68333,0,0],73:[0,.68333,0,0],74:[0,.68333,0,0],75:[0,.68333,0,0],76:[0,.68333,0,0],77:[0,.68333,0,0],78:[0,.68333,0,0],79:[0,.68333,0,0],80:[0,.68333,0,0],81:[.19444,.68333,0,0],82:[0,.68333,0,0],83:[0,.68333,0,0],84:[0,.68333,0,0],85:[0,.68333,0,0],86:[0,.68333,.01389,0],87:[0,.68333,.01389,0],88:[0,.68333,0,0],89:[0,.68333,.025,0],90:[0,.68333,0,0],91:[.25,.75,0,0],92:[.25,.75,0,0],93:[.25,.75,0,0],94:[0,.69444,0,0],95:[.31,.12056,.02778,0],96:[0,.69444,0,0],97:[0,.43056,0,0],98:[0,.69444,0,0],99:[0,.43056,0,0],100:[0,.69444,0,0],101:[0,.43056,0,0],102:[0,.69444,.07778,0],103:[.19444,.43056,.01389,0],104:[0,.69444,0,0],105:[0,.66786,0,0],106:[.19444,.66786,0,0],107:[0,.69444,0,0],108:[0,.69444,0,0],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,0],112:[.19444,.43056,0,0],113:[.19444,.43056,0,0],114:[0,.43056,0,0],115:[0,.43056,0,0],116:[0,.61508,0,0],117:[0,.43056,0,0],118:[0,.43056,.01389,0],119:[0,.43056,.01389,0],120:[0,.43056,0,0],121:[.19444,.43056,.01389,0],122:[0,.43056,0,0],123:[.25,.75,0,0],124:[.25,.75,0,0],125:[.25,.75,0,0],126:[.35,.31786,0,0],160:[0,0,0,0],168:[0,.66786,0,0],172:[0,.43056,0,0],175:[0,.56778,0,0],176:[0,.69444,0,0],177:[.08333,.58333,0,0],180:[0,.69444,0,0],215:[.08333,.58333,0,0],247:[.08333,.58333,0,0],305:[0,.43056,0,0],567:[.19444,.43056,0,0],710:[0,.69444,0,0],711:[0,.62847,0,0],713:[0,.56778,0,0],714:[0,.69444,0,0],715:[0,.69444,0,0],728:[0,.69444,0,0],729:[0,.66786,0,0],730:[0,.69444,0,0],732:[0,.66786,0,0],768:[0,.69444,0,0],769:[0,.69444,0,0],770:[0,.69444,0,0],771:[0,.66786,0,0],772:[0,.56778,0,0],774:[0,.69444,0,0],775:[0,.66786,0,0],776:[0,.66786,0,0],778:[0,.69444,0,0],779:[0,.69444,0,0],780:[0,.62847,0,0],824:[.19444,.69444,0,0],915:[0,.68333,0,0],916:[0,.68333,0,0],920:[0,.68333,0,0],923:[0,.68333,0,0],926:[0,.68333,0,0],928:[0,.68333,0,0],931:[0,.68333,0,0],933:[0,.68333,0,0],934:[0,.68333,0,0],936:[0,.68333,0,0],937:[0,.68333,0,0],8211:[0,.43056,.02778,0],8212:[0,.43056,.02778,0],8216:[0,.69444,0,0],8217:[0,.69444,0,0],8220:[0,.69444,0,0],8221:[0,.69444,0,0],8224:[.19444,.69444,0,0],8225:[.19444,.69444,0,0],8230:[0,.12,0,0],8242:[0,.55556,0,0],8407:[0,.71444,.15382,0],8463:[0,.68889,0,0],8465:[0,.69444,0,0],8467:[0,.69444,0,.11111],8472:[.19444,.43056,0,.11111],8476:[0,.69444,0,0],8501:[0,.69444,0,0],8592:[-.13313,.36687,0,0],8593:[.19444,.69444,0,0],8594:[-.13313,.36687,0,0],8595:[.19444,.69444,0,0],8596:[-.13313,.36687,0,0],8597:[.25,.75,0,0],8598:[.19444,.69444,0,0],8599:[.19444,.69444,0,0],8600:[.19444,.69444,0,0],8601:[.19444,.69444,0,0],8614:[.011,.511,0,0],8617:[.011,.511,0,0],8618:[.011,.511,0,0],8636:[-.13313,.36687,0,0],8637:[-.13313,.36687,0,0],8640:[-.13313,.36687,0,0],8641:[-.13313,.36687,0,0],8652:[.011,.671,0,0],8656:[-.13313,.36687,0,0],8657:[.19444,.69444,0,0],8658:[-.13313,.36687,0,0],8659:[.19444,.69444,0,0],8660:[-.13313,.36687,0,0],8661:[.25,.75,0,0],8704:[0,.69444,0,0],8706:[0,.69444,.05556,.08334],8707:[0,.69444,0,0],8709:[.05556,.75,0,0],8711:[0,.68333,0,0],8712:[.0391,.5391,0,0],8715:[.0391,.5391,0,0],8722:[.08333,.58333,0,0],8723:[.08333,.58333,0,0],8725:[.25,.75,0,0],8726:[.25,.75,0,0],8727:[-.03472,.46528,0,0],8728:[-.05555,.44445,0,0],8729:[-.05555,.44445,0,0],8730:[.2,.8,0,0],8733:[0,.43056,0,0],8734:[0,.43056,0,0],8736:[0,.69224,0,0],8739:[.25,.75,0,0],8741:[.25,.75,0,0],8743:[0,.55556,0,0],8744:[0,.55556,0,0],8745:[0,.55556,0,0],8746:[0,.55556,0,0],8747:[.19444,.69444,.11111,0],8764:[-.13313,.36687,0,0],8768:[.19444,.69444,0,0],8771:[-.03625,.46375,0,0],8773:[-.022,.589,0,0],8776:[-.01688,.48312,0,0],8781:[-.03625,.46375,0,0],8784:[-.133,.67,0,0],8800:[.215,.716,0,0],8801:[-.03625,.46375,0,0],8804:[.13597,.63597,0,0],8805:[.13597,.63597,0,0],8810:[.0391,.5391,0,0],8811:[.0391,.5391,0,0],8826:[.0391,.5391,0,0],8827:[.0391,.5391,0,0],8834:[.0391,.5391,0,0],8835:[.0391,.5391,0,0],8838:[.13597,.63597,0,0],8839:[.13597,.63597,0,0],8846:[0,.55556,0,0],8849:[.13597,.63597,0,0],8850:[.13597,.63597,0,0],8851:[0,.55556,0,0],8852:[0,.55556,0,0],8853:[.08333,.58333,0,0],8854:[.08333,.58333,0,0],8855:[.08333,.58333,0,0],8856:[.08333,.58333,0,0],8857:[.08333,.58333,0,0],8866:[0,.69444,0,0],8867:[0,.69444,0,0],8868:[0,.69444,0,0],8869:[0,.69444,0,0],8872:[.249,.75,0,0],8900:[-.05555,.44445,0,0],8901:[-.05555,.44445,0,0],8902:[-.03472,.46528,0,0],8904:[.005,.505,0,0],8942:[.03,.9,0,0],8943:[-.19,.31,0,0],8945:[-.1,.82,0,0],8968:[.25,.75,0,0],8969:[.25,.75,0,0],8970:[.25,.75,0,0],8971:[.25,.75,0,0],8994:[-.14236,.35764,0,0],8995:[-.14236,.35764,0,0],9136:[.244,.744,0,0],9137:[.244,.744,0,0],9651:[.19444,.69444,0,0],9657:[-.03472,.46528,0,0],9661:[.19444,.69444,0,0],9667:[-.03472,.46528,0,0],9711:[.19444,.69444,0,0],9824:[.12963,.69444,0,0],9825:[.12963,.69444,0,0],9826:[.12963,.69444,0,0],9827:[.12963,.69444,0,0],9837:[0,.75,0,0],9838:[.19444,.69444,0,0],9839:[.19444,.69444,0,0],10216:[.25,.75,0,0],10217:[.25,.75,0,0],10222:[.244,.744,0,0],10223:[.244,.744,0,0],10229:[.011,.511,0,0],10230:[.011,.511,0,0],10231:[.011,.511,0,0],10232:[.024,.525,0,0],10233:[.024,.525,0,0],10234:[.024,.525,0,0],10236:[.011,.511,0,0],10815:[0,.68333,0,0],10927:[.13597,.63597,0,0],10928:[.13597,.63597,0,0]},"Math-BoldItalic":{47:[.19444,.69444,0,0],65:[0,.68611,0,0],66:[0,.68611,.04835,0],67:[0,.68611,.06979,0],68:[0,.68611,.03194,0],69:[0,.68611,.05451,0],70:[0,.68611,.15972,0],71:[0,.68611,0,0],72:[0,.68611,.08229,0],73:[0,.68611,.07778,0],74:[0,.68611,.10069,0],75:[0,.68611,.06979,0],76:[0,.68611,0,0],77:[0,.68611,.11424,0],78:[0,.68611,.11424,0],79:[0,.68611,.03194,0],80:[0,.68611,.15972,0],81:[.19444,.68611,0,0],82:[0,.68611,.00421,0],83:[0,.68611,.05382,0],84:[0,.68611,.15972,0],85:[0,.68611,.11424,0],86:[0,.68611,.25555,0],87:[0,.68611,.15972,0],88:[0,.68611,.07778,0],89:[0,.68611,.25555,0],90:[0,.68611,.06979,0],97:[0,.44444,0,0],98:[0,.69444,0,0],99:[0,.44444,0,0],100:[0,.69444,0,0],101:[0,.44444,0,0],102:[.19444,.69444,.11042,0],103:[.19444,.44444,.03704,0],104:[0,.69444,0,0],105:[0,.69326,0,0],106:[.19444,.69326,.0622,0],107:[0,.69444,.01852,0],108:[0,.69444,.0088,0],109:[0,.44444,0,0],110:[0,.44444,0,0],111:[0,.44444,0,0],112:[.19444,.44444,0,0],113:[.19444,.44444,.03704,0],114:[0,.44444,.03194,0],115:[0,.44444,0,0],116:[0,.63492,0,0],117:[0,.44444,0,0],118:[0,.44444,.03704,0],119:[0,.44444,.02778,0],120:[0,.44444,0,0],121:[.19444,.44444,.03704,0],122:[0,.44444,.04213,0],915:[0,.68611,.15972,0],916:[0,.68611,0,0],920:[0,.68611,.03194,0],923:[0,.68611,0,0],926:[0,.68611,.07458,0],928:[0,.68611,.08229,0],931:[0,.68611,.05451,0],933:[0,.68611,.15972,0],934:[0,.68611,0,0],936:[0,.68611,.11653,0],937:[0,.68611,.04835,0],945:[0,.44444,0,0],946:[.19444,.69444,.03403,0],947:[.19444,.44444,.06389,0],948:[0,.69444,.03819,0],949:[0,.44444,0,0],950:[.19444,.69444,.06215,0],951:[.19444,.44444,.03704,0],952:[0,.69444,.03194,0],953:[0,.44444,0,0],954:[0,.44444,0,0],955:[0,.69444,0,0],956:[.19444,.44444,0,0],957:[0,.44444,.06898,0],958:[.19444,.69444,.03021,0],959:[0,.44444,0,0],960:[0,.44444,.03704,0],961:[.19444,.44444,0,0],962:[.09722,.44444,.07917,0],963:[0,.44444,.03704,0],964:[0,.44444,.13472,0],965:[0,.44444,.03704,0],966:[.19444,.44444,0,0],967:[.19444,.44444,0,0],968:[.19444,.69444,.03704,0],969:[0,.44444,.03704,0],977:[0,.69444,0,0],981:[.19444,.69444,0,0],982:[0,.44444,.03194,0],1009:[.19444,.44444,0,0],1013:[0,.44444,0,0]},"Math-Italic":{47:[.19444,.69444,0,0],65:[0,.68333,0,.13889],66:[0,.68333,.05017,.08334],67:[0,.68333,.07153,.08334],68:[0,.68333,.02778,.05556],69:[0,.68333,.05764,.08334],70:[0,.68333,.13889,.08334],71:[0,.68333,0,.08334],72:[0,.68333,.08125,.05556],73:[0,.68333,.07847,.11111],74:[0,.68333,.09618,.16667],75:[0,.68333,.07153,.05556],76:[0,.68333,0,.02778],77:[0,.68333,.10903,.08334],78:[0,.68333,.10903,.08334],79:[0,.68333,.02778,.08334],80:[0,.68333,.13889,.08334],81:[.19444,.68333,0,.08334],82:[0,.68333,.00773,.08334],83:[0,.68333,.05764,.08334],84:[0,.68333,.13889,.08334],85:[0,.68333,.10903,.02778],86:[0,.68333,.22222,0],87:[0,.68333,.13889,0],88:[0,.68333,.07847,.08334],89:[0,.68333,.22222,0],90:[0,.68333,.07153,.08334],97:[0,.43056,0,0],98:[0,.69444,0,0],99:[0,.43056,0,.05556],100:[0,.69444,0,.16667],101:[0,.43056,0,.05556],102:[.19444,.69444,.10764,.16667],103:[.19444,.43056,.03588,.02778],104:[0,.69444,0,0],105:[0,.65952,0,0],106:[.19444,.65952,.05724,0],107:[0,.69444,.03148,0],108:[0,.69444,.01968,.08334],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,.05556],112:[.19444,.43056,0,.08334],113:[.19444,.43056,.03588,.08334],114:[0,.43056,.02778,.05556],115:[0,.43056,0,.05556],116:[0,.61508,0,.08334],117:[0,.43056,0,.02778],118:[0,.43056,.03588,.02778],119:[0,.43056,.02691,.08334],120:[0,.43056,0,.02778],121:[.19444,.43056,.03588,.05556],122:[0,.43056,.04398,.05556],915:[0,.68333,.13889,.08334],916:[0,.68333,0,.16667],920:[0,.68333,.02778,.08334],923:[0,.68333,0,.16667],926:[0,.68333,.07569,.08334],928:[0,.68333,.08125,.05556],931:[0,.68333,.05764,.08334],933:[0,.68333,.13889,.05556],934:[0,.68333,0,.08334],936:[0,.68333,.11,.05556],937:[0,.68333,.05017,.08334],945:[0,.43056,.0037,.02778],946:[.19444,.69444,.05278,.08334],947:[.19444,.43056,.05556,0],948:[0,.69444,.03785,.05556],949:[0,.43056,0,.08334],950:[.19444,.69444,.07378,.08334],951:[.19444,.43056,.03588,.05556],952:[0,.69444,.02778,.08334],953:[0,.43056,0,.05556],954:[0,.43056,0,0],955:[0,.69444,0,0],956:[.19444,.43056,0,.02778],957:[0,.43056,.06366,.02778],958:[.19444,.69444,.04601,.11111],959:[0,.43056,0,.05556],960:[0,.43056,.03588,0],961:[.19444,.43056,0,.08334],962:[.09722,.43056,.07986,.08334],963:[0,.43056,.03588,0],964:[0,.43056,.1132,.02778],965:[0,.43056,.03588,.02778],966:[.19444,.43056,0,.08334],967:[.19444,.43056,0,.05556],968:[.19444,.69444,.03588,.11111],969:[0,.43056,.03588,0],977:[0,.69444,0,.08334],981:[.19444,.69444,0,.08334],982:[0,.43056,.02778,0],1009:[.19444,.43056,0,.08334],1013:[0,.43056,0,.05556]},"Math-Regular":{65:[0,.68333,0,.13889],66:[0,.68333,.05017,.08334],67:[0,.68333,.07153,.08334],68:[0,.68333,.02778,.05556],69:[0,.68333,.05764,.08334],70:[0,.68333,.13889,.08334],71:[0,.68333,0,.08334],72:[0,.68333,.08125,.05556],73:[0,.68333,.07847,.11111],74:[0,.68333,.09618,.16667],75:[0,.68333,.07153,.05556],76:[0,.68333,0,.02778],77:[0,.68333,.10903,.08334],78:[0,.68333,.10903,.08334],79:[0,.68333,.02778,.08334],80:[0,.68333,.13889,.08334],81:[.19444,.68333,0,.08334],82:[0,.68333,.00773,.08334],83:[0,.68333,.05764,.08334],84:[0,.68333,.13889,.08334],85:[0,.68333,.10903,.02778],86:[0,.68333,.22222,0],87:[0,.68333,.13889,0],88:[0,.68333,.07847,.08334],89:[0,.68333,.22222,0],90:[0,.68333,.07153,.08334],97:[0,.43056,0,0],98:[0,.69444,0,0],99:[0,.43056,0,.05556],100:[0,.69444,0,.16667],101:[0,.43056,0,.05556],102:[.19444,.69444,.10764,.16667],103:[.19444,.43056,.03588,.02778],104:[0,.69444,0,0],105:[0,.65952,0,0],106:[.19444,.65952,.05724,0],107:[0,.69444,.03148,0],108:[0,.69444,.01968,.08334],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,.05556],112:[.19444,.43056,0,.08334],113:[.19444,.43056,.03588,.08334],114:[0,.43056,.02778,.05556],115:[0,.43056,0,.05556],116:[0,.61508,0,.08334],117:[0,.43056,0,.02778],118:[0,.43056,.03588,.02778],119:[0,.43056,.02691,.08334],120:[0,.43056,0,.02778],121:[.19444,.43056,.03588,.05556],122:[0,.43056,.04398,.05556],915:[0,.68333,.13889,.08334],916:[0,.68333,0,.16667],920:[0,.68333,.02778,.08334],923:[0,.68333,0,.16667],926:[0,.68333,.07569,.08334],928:[0,.68333,.08125,.05556],931:[0,.68333,.05764,.08334],933:[0,.68333,.13889,.05556],934:[0,.68333,0,.08334],936:[0,.68333,.11,.05556],937:[0,.68333,.05017,.08334],945:[0,.43056,.0037,.02778],946:[.19444,.69444,.05278,.08334],947:[.19444,.43056,.05556,0],948:[0,.69444,.03785,.05556],949:[0,.43056,0,.08334],950:[.19444,.69444,.07378,.08334],951:[.19444,.43056,.03588,.05556],952:[0,.69444,.02778,.08334],953:[0,.43056,0,.05556],954:[0,.43056,0,0],955:[0,.69444,0,0],956:[.19444,.43056,0,.02778],957:[0,.43056,.06366,.02778],958:[.19444,.69444,.04601,.11111],959:[0,.43056,0,.05556],960:[0,.43056,.03588,0],961:[.19444,.43056,0,.08334],962:[.09722,.43056,.07986,.08334],963:[0,.43056,.03588,0],964:[0,.43056,.1132,.02778],965:[0,.43056,.03588,.02778],966:[.19444,.43056,0,.08334],967:[.19444,.43056,0,.05556],968:[.19444,.69444,.03588,.11111],969:[0,.43056,.03588,0],977:[0,.69444,0,.08334],981:[.19444,.69444,0,.08334],982:[0,.43056,.02778,0],1009:[.19444,.43056,0,.08334],1013:[0,.43056,0,.05556]},"SansSerif-Regular":{33:[0,.69444,0,0],34:[0,.69444,0,0],35:[.19444,.69444,0,0],36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:[0,.69444,0,0],39:[0,.69444,0,0],40:[.25,.75,0,0],41:[.25,.75,0,0],42:[0,.75,0,0],43:[.08333,.58333,0,0],44:[.125,.08333,0,0],45:[0,.44444,0,0],46:[0,.08333,0,0],47:[.25,.75,0,0],48:[0,.65556,0,0],49:[0,.65556,0,0],50:[0,.65556,0,0],51:[0,.65556,0,0],52:[0,.65556,0,0],53:[0,.65556,0,0],54:[0,.65556,0,0],55:[0,.65556,0,0],56:[0,.65556,0,0],57:[0,.65556,0,0],58:[0,.44444,0,0],59:[.125,.44444,0,0],61:[-.13,.37,0,0],63:[0,.69444,0,0],64:[0,.69444,0,0],65:[0,.69444,0,0],66:[0,.69444,0,0],67:[0,.69444,0,0],68:[0,.69444,0,0],69:[0,.69444,0,0],70:[0,.69444,0,0],71:[0,.69444,0,0],72:[0,.69444,0,0],73:[0,.69444,0,0],74:[0,.69444,0,0],75:[0,.69444,0,0],76:[0,.69444,0,0],77:[0,.69444,0,0],78:[0,.69444,0,0],79:[0,.69444,0,0],80:[0,.69444,0,0],81:[.125,.69444,0,0],82:[0,.69444,0,0],83:[0,.69444,0,0],84:[0,.69444,0,0],85:[0,.69444,0,0],86:[0,.69444,.01389,0],87:[0,.69444,.01389,0],88:[0,.69444,0,0],89:[0,.69444,.025,0],90:[0,.69444,0,0],91:[.25,.75,0,0],93:[.25,.75,0,0],94:[0,.69444,0,0],95:[.35,.09444,.02778,0],97:[0,.44444,0,0],98:[0,.69444,0,0],99:[0,.44444,0,0],100:[0,.69444,0,0],101:[0,.44444,0,0],102:[0,.69444,.06944,0],103:[.19444,.44444,.01389,0],104:[0,.69444,0,0],105:[0,.67937,0,0],106:[.19444,.67937,0,0],107:[0,.69444,0,0],108:[0,.69444,0,0],109:[0,.44444,0,0],110:[0,.44444,0,0],111:[0,.44444,0,0],112:[.19444,.44444,0,0],113:[.19444,.44444,0,0],114:[0,.44444,.01389,0],115:[0,.44444,0,0],116:[0,.57143,0,0],117:[0,.44444,0,0],118:[0,.44444,.01389,0],119:[0,.44444,.01389,0],120:[0,.44444,0,0],121:[.19444,.44444,.01389,0],122:[0,.44444,0,0],126:[.35,.32659,0,0],305:[0,.44444,0,0],567:[.19444,.44444,0,0],768:[0,.69444,0,0],769:[0,.69444,0,0],770:[0,.69444,0,0],771:[0,.67659,0,0],772:[0,.60889,0,0],774:[0,.69444,0,0],775:[0,.67937,0,0],776:[0,.67937,0,0],778:[0,.69444,0,0],779:[0,.69444,0,0],780:[0,.63194,0,0],915:[0,.69444,0,0],916:[0,.69444,0,0],920:[0,.69444,0,0],923:[0,.69444,0,0],926:[0,.69444,0,0],928:[0,.69444,0,0],931:[0,.69444,0,0],933:[0,.69444,0,0],934:[0,.69444,0,0],936:[0,.69444,0,0],937:[0,.69444,0,0],8211:[0,.44444,.02778,0],8212:[0,.44444,.02778,0],8216:[0,.69444,0,0],8217:[0,.69444,0,0],8220:[0,.69444,0,0],8221:[0,.69444,0,0]},"Script-Regular":{65:[0,.7,.22925,0],66:[0,.7,.04087,0],67:[0,.7,.1689,0],68:[0,.7,.09371,0],69:[0,.7,.18583,0],70:[0,.7,.13634,0],71:[0,.7,.17322,0],72:[0,.7,.29694,0],73:[0,.7,.19189,0],74:[.27778,.7,.19189,0],75:[0,.7,.31259,0],76:[0,.7,.19189,0],77:[0,.7,.15981,0],78:[0,.7,.3525,0],79:[0,.7,.08078,0],80:[0,.7,.08078,0],81:[0,.7,.03305,0],82:[0,.7,.06259,0],83:[0,.7,.19189,0],84:[0,.7,.29087,0],85:[0,.7,.25815,0],86:[0,.7,.27523,0],87:[0,.7,.27523,0],88:[0,.7,.26006,0],89:[0,.7,.2939,0],90:[0,.7,.24037,0]},"Size1-Regular":{40:[.35001,.85,0,0],41:[.35001,.85,0,0],47:[.35001,.85,0,0],91:[.35001,.85,0,0],92:[.35001,.85,0,0],93:[.35001,.85,0,0],123:[.35001,.85,0,0],125:[.35001,.85,0,0],710:[0,.72222,0,0],732:[0,.72222,0,0],770:[0,.72222,0,0],771:[0,.72222,0,0],8214:[-99e-5,.601,0,0],8593:[1e-5,.6,0,0],8595:[1e-5,.6,0,0],8657:[1e-5,.6,0,0],8659:[1e-5,.6,0,0],8719:[.25001,.75,0,0],8720:[.25001,.75,0,0],8721:[.25001,.75,0,0],8730:[.35001,.85,0,0],8739:[-.00599,.606,0,0],8741:[-.00599,.606,0,0],8747:[.30612,.805,.19445,0],8748:[.306,.805,.19445,0],8749:[.306,.805,.19445,0],8750:[.30612,.805,.19445,0],8896:[.25001,.75,0,0],8897:[.25001,.75,0,0],8898:[.25001,.75,0,0],8899:[.25001,.75,0,0],8968:[.35001,.85,0,0],8969:[.35001,.85,0,0],8970:[.35001,.85,0,0],8971:[.35001,.85,0,0],9168:[-99e-5,.601,0,0],10216:[.35001,.85,0,0],10217:[.35001,.85,0,0],10752:[.25001,.75,0,0],10753:[.25001,.75,0,0],10754:[.25001,.75,0,0],10756:[.25001,.75,0,0],10758:[.25001,.75,0,0]},"Size2-Regular":{40:[.65002,1.15,0,0],41:[.65002,1.15,0,0],47:[.65002,1.15,0,0],91:[.65002,1.15,0,0],92:[.65002,1.15,0,0],93:[.65002,1.15,0,0],123:[.65002,1.15,0,0],125:[.65002,1.15,0,0],710:[0,.75,0,0],732:[0,.75,0,0],770:[0,.75,0,0],771:[0,.75,0,0],8719:[.55001,1.05,0,0],8720:[.55001,1.05,0,0],8721:[.55001,1.05,0,0],8730:[.65002,1.15,0,0],8747:[.86225,1.36,.44445,0],8748:[.862,1.36,.44445,0],8749:[.862,1.36,.44445,0],8750:[.86225,1.36,.44445,0],8896:[.55001,1.05,0,0],8897:[.55001,1.05,0,0],8898:[.55001,1.05,0,0],8899:[.55001,1.05,0,0],8968:[.65002,1.15,0,0],8969:[.65002,1.15,0,0],8970:[.65002,1.15,0,0],8971:[.65002,1.15,0,0],10216:[.65002,1.15,0,0],10217:[.65002,1.15,0,0],10752:[.55001,1.05,0,0],10753:[.55001,1.05,0,0],10754:[.55001,1.05,0,0],10756:[.55001,1.05,0,0],10758:[.55001,1.05,0,0]},"Size3-Regular":{40:[.95003,1.45,0,0],41:[.95003,1.45,0,0],47:[.95003,1.45,0,0],91:[.95003,1.45,0,0],92:[.95003,1.45,0,0],93:[.95003,1.45,0,0],123:[.95003,1.45,0,0],125:[.95003,1.45,0,0],710:[0,.75,0,0],732:[0,.75,0,0],770:[0,.75,0,0],771:[0,.75,0,0],8730:[.95003,1.45,0,0],8968:[.95003,1.45,0,0],8969:[.95003,1.45,0,0],8970:[.95003,1.45,0,0],8971:[.95003,1.45,0,0],10216:[.95003,1.45,0,0],10217:[.95003,1.45,0,0]},"Size4-Regular":{40:[1.25003,1.75,0,0],41:[1.25003,1.75,0,0],47:[1.25003,1.75,0,0],91:[1.25003,1.75,0,0],92:[1.25003,1.75,0,0],93:[1.25003,1.75,0,0],123:[1.25003,1.75,0,0],125:[1.25003,1.75,0,0],710:[0,.825,0,0],732:[0,.825,0,0],770:[0,.825,0,0],771:[0,.825,0,0],8730:[1.25003,1.75,0,0],8968:[1.25003,1.75,0,0],8969:[1.25003,1.75,0,0],8970:[1.25003,1.75,0,0],8971:[1.25003,1.75,0,0],9115:[.64502,1.155,0,0],9116:[1e-5,.6,0,0],9117:[.64502,1.155,0,0],9118:[.64502,1.155,0,0],9119:[1e-5,.6,0,0],9120:[.64502,1.155,0,0],9121:[.64502,1.155,0,0],9122:[-99e-5,.601,0,0],9123:[.64502,1.155,0,0],9124:[.64502,1.155,0,0],9125:[-99e-5,.601,0,0],9126:[.64502,1.155,0,0],9127:[1e-5,.9,0,0],9128:[.65002,1.15,0,0],9129:[.90001,0,0,0],9130:[0,.3,0,0],9131:[1e-5,.9,0,0],9132:[.65002,1.15,0,0],9133:[.90001,0,0,0],9143:[.88502,.915,0,0],10216:[1.25003,1.75,0,0],10217:[1.25003,1.75,0,0],57344:[-.00499,.605,0,0],57345:[-.00499,.605,0,0],57680:[0,.12,0,0],57681:[0,.12,0,0],57682:[0,.12,0,0],57683:[0,.12,0,0]},"Typewriter-Regular":{33:[0,.61111,0,0],34:[0,.61111,0,0],35:[0,.61111,0,0],36:[.08333,.69444,0,0],37:[.08333,.69444,0,0],38:[0,.61111,0,0],39:[0,.61111,0,0],40:[.08333,.69444,0,0],41:[.08333,.69444,0,0],42:[0,.52083,0,0],43:[-.08056,.53055,0,0],44:[.13889,.125,0,0],45:[-.08056,.53055,0,0],46:[0,.125,0,0],47:[.08333,.69444,0,0],48:[0,.61111,0,0],49:[0,.61111,0,0],50:[0,.61111,0,0],51:[0,.61111,0,0],52:[0,.61111,0,0],53:[0,.61111,0,0],54:[0,.61111,0,0],55:[0,.61111,0,0],56:[0,.61111,0,0],57:[0,.61111,0,0],58:[0,.43056,0,0],59:[.13889,.43056,0,0],60:[-.05556,.55556,0,0],61:[-.19549,.41562,0,0],62:[-.05556,.55556,0,0],63:[0,.61111,0,0],64:[0,.61111,0,0],65:[0,.61111,0,0],66:[0,.61111,0,0],67:[0,.61111,0,0],68:[0,.61111,0,0],69:[0,.61111,0,0],70:[0,.61111,0,0],71:[0,.61111,0,0],72:[0,.61111,0,0],73:[0,.61111,0,0],74:[0,.61111,0,0],75:[0,.61111,0,0],76:[0,.61111,0,0],77:[0,.61111,0,0],78:[0,.61111,0,0],79:[0,.61111,0,0],80:[0,.61111,0,0],81:[.13889,.61111,0,0],82:[0,.61111,0,0],83:[0,.61111,0,0],84:[0,.61111,0,0],85:[0,.61111,0,0],86:[0,.61111,0,0],87:[0,.61111,0,0],88:[0,.61111,0,0],89:[0,.61111,0,0],90:[0,.61111,0,0],91:[.08333,.69444,0,0],92:[.08333,.69444,0,0],93:[.08333,.69444,0,0],94:[0,.61111,0,0],95:[.09514,0,0,0],96:[0,.61111,0,0],97:[0,.43056,0,0],98:[0,.61111,0,0],99:[0,.43056,0,0],100:[0,.61111,0,0],101:[0,.43056,0,0],102:[0,.61111,0,0],103:[.22222,.43056,0,0],104:[0,.61111,0,0],105:[0,.61111,0,0],106:[.22222,.61111,0,0],107:[0,.61111,0,0],108:[0,.61111,0,0],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,0],112:[.22222,.43056,0,0],113:[.22222,.43056,0,0],114:[0,.43056,0,0],115:[0,.43056,0,0],116:[0,.55358,0,0],117:[0,.43056,0,0],118:[0,.43056,0,0],119:[0,.43056,0,0],120:[0,.43056,0,0],121:[.22222,.43056,0,0],122:[0,.43056,0,0],123:[.08333,.69444,0,0],124:[.08333,.69444,0,0],125:[.08333,.69444,0,0],126:[0,.61111,0,0],127:[0,.61111,0,0],305:[0,.43056,0,0],567:[.22222,.43056,0,0],768:[0,.61111,0,0],769:[0,.61111,0,0],770:[0,.61111,0,0],771:[0,.61111,0,0],772:[0,.56555,0,0],774:[0,.61111,0,0],776:[0,.61111,0,0],778:[0,.61111,0,0],780:[0,.56597,0,0],915:[0,.61111,0,0],916:[0,.61111,0,0],920:[0,.61111,0,0],923:[0,.61111,0,0],926:[0,.61111,0,0],928:[0,.61111,0,0],931:[0,.61111,0,0],933:[0,.61111,0,0],934:[0,.61111,0,0],936:[0,.61111,0,0],937:[0,.61111,0,0],2018:[0,.61111,0,0],2019:[0,.61111,0,0],8242:[0,.61111,0,0]}};const cjkRegex=/[\u3040-\u309F]|[\u30A0-\u30FF]|[\u4E00-\u9FAF]|[\uAC00-\uD7AF]/,metrics={defaultRuleThickness:.04,bigOpSpacing1:.111,bigOpSpacing2:.166,bigOpSpacing3:.2,bigOpSpacing4:.6,bigOpSpacing5:.1,ptPerEm:10,pxPerEm:40/3,doubleRuleSep:.2,arraycolsep:.5,baselineskip:1.2,arrayrulewidth:.04,fboxsep:.3,fboxrule:.04},extraCharacterMap={"Â ":" ","â":" ","Ã":"A","Ã":"C","Ã":"D","Ã":"o","Ã¥":"a","Ã§":"c","Ã°":"d","Ã¾":"o","Ð":"A","Ð":"B","Ð":"B","Ð":"F","Ð":"A","Ð":"E","Ð":"K","Ð":"3","Ð":"N","Ð":"N","Ð":"K","Ð":"N","Ð":"M","Ð":"H","Ð":"O","Ð":"N","Ð ":"P","Ð¡":"C","Ð¢":"T","Ð£":"y","Ð¤":"O","Ð¥":"X","Ð¦":"U","Ð§":"h","Ð¨":"W","Ð©":"W","Ðª":"B","Ð«":"X","Ð¬":"B","Ð­":"3","Ð®":"X","Ð¯":"R","Ð°":"a","Ð±":"b","Ð²":"a","Ð³":"r","Ð´":"y","Ðµ":"e","Ð¶":"m","Ð·":"e","Ð¸":"n","Ð¹":"n","Ðº":"n","Ð»":"n","Ð¼":"m","Ð½":"n","Ð¾":"o","Ð¿":"n","Ñ":"p","Ñ":"c","Ñ":"o","Ñ":"y","Ñ":"b","Ñ":"x","Ñ":"n","Ñ":"n","Ñ":"w","Ñ":"w","Ñ":"a","Ñ":"m","Ñ":"a","Ñ":"e","Ñ":"m","Ñ":"r"};function convertDimenToEm(t,e,i){if("string"==typeof t){const i=t.match(/([0-9.]*)\s*([a-z]*)/);i?(t=parseFloat(i[1]),e=i[2].toLowerCase()):t=parseFloat(t)}let s=1;if("pt"===e?s=1:"mm"===e?s=7227/2540:"cm"===e?s=7227/254:"ex"===e?s=35271/8192:"px"===e?s=.75:"em"===e?s=metrics.ptPerEm:"bp"===e?s=1.00375:"dd"===e?s=1238/1157:"pc"===e?s=12:"in"===e?s=72.27:"mu"===e&&(s=10/18),i){const e=Math.pow(10,i);return Math.round(t/metrics.ptPerEm*s*e)/e}return t/metrics.ptPerEm*s}var FontMetrics={toEm:convertDimenToEm,toPx:function(t,e){return convertDimenToEm(t,e)*(4/3)*metrics.ptPerEm},metrics:metrics,sigmas:{slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25]},getCharacterMetrics:function(t,e){"mathbb"===e&&(e="AMS-Regular");let i=t.charCodeAt(0);t[0]in extraCharacterMap?i=extraCharacterMap[t[0]].charCodeAt(0):cjkRegex.test(t[0])&&(i=77);const s=metricMap[e][i];return s?s?{depth:s[0],height:s[1],italic:s[2],skew:s[3]}:null:{depth:.2,height:.7,italic:0,skew:0}},cjkRegex:cjkRegex,hangulRegex:/[\uAC00-\uD7AF]/};const sigmas=FontMetrics.sigmas,metrics$1=[{},{},{}];let i;for(const t in sigmas)if(sigmas.hasOwnProperty(t))for(i=0;i<3;i++)metrics$1[i][t]=sigmas[t][i];for(i=0;i<3;i++)metrics$1[i].emPerEx=sigmas.xHeight[i]/sigmas.quad[i];class Mathstyle{constructor(t,e,i,s){this.id=t,this.size=e,this.cramped=s,this.sizeMultiplier=i,this.metrics=metrics$1[e>0?e-1:0]}sup(){return styles[sup[this.id]]}sub(){return styles[sub[this.id]]}fracNum(){return styles[fracNum[this.id]]}fracDen(){return styles[fracDen[this.id]]}cramp(){return styles[cramp[this.id]]}cls(){return sizeNames[this.size]}adjustTo(t){let e=ADJUST_NAMES[this.size][t.size];return e.length>0&&(e=" "+e),e}isTight(){return this.size>=2}}const D=0,T$1=2,S=4,SS=6,styles=[new Mathstyle(D,0,1,!1),new Mathstyle(1,0,1,!0),new Mathstyle(T$1,1,1,!1),new Mathstyle(3,1,1,!0),new Mathstyle(S,2,.7,!1),new Mathstyle(5,2,.7,!0),new Mathstyle(SS,3,.5,!1),new Mathstyle(7,3,.5,!0)];const sizeNames=["displaystyle textstyle","textstyle","scriptstyle","scriptscriptstyle"],ADJUST_NAMES=[["","","reset-textstyle scriptstyle","reset-textstyle scriptscriptstyle"],["reset-textstyle displaystyle textstyle","","reset-textstyle scriptstyle","reset-textstyle scriptscriptstyle"],["reset-scriptstyle textstyle displaystyle","reset-scriptstyle textstyle","","reset-scriptstyle scriptscriptstyle"],["reset-scriptscriptstyle textstyle displaystyle","reset-scriptscriptstyle textstyle","reset-scriptscriptstyle scriptstyle",""]],sup=[S,5,S,5,SS,7,SS,7],sub=[5,5,5,5,7,7,7,7],fracNum=[T$1,3,S,5,SS,7,SS,7],fracDen=[3,3,5,5,7,7,7,7],cramp=[1,1,3,3,5,5,7,7];var Mathstyle$1={DISPLAY:styles[D],TEXT:styles[T$1],SCRIPT:styles[S],SCRIPTSCRIPT:styles[SS],toMathstyle:function(t){return t?t instanceof Mathstyle?t:{displaystyle:styles[D],textstyle:styles[T$1],scriptstyle:styles[S],scriptscriptstyle:styles[SS]}[t]:t}};class Context{constructor(t){this.mathstyle=Mathstyle$1.toMathstyle(t.mathstyle),this.color=t.color,this.opacity=t.opacity,this.backgroundcolor=t.backgroundcolor,this.size=t.size,this.phantom=t.phantom,this.font=t.font,this.generateID=void 0!==t.generateID&&t.generateID,this.isSelected=void 0!==t.isSelected&&t.isSelected,this.macros=t.macros||{},void 0===t.parentMathstyle?this.parentMathstyle=this.mathstyle:this.parentMathstyle=t.parentMathstyle,void 0===t.parentSize?this.parentSize=this.size:this.parentSize=t.parentSize}clone(){const t=new Context(this);return t.parentMathstyle=this.mathstyle,t.parentSize=this.size,t.macros=this.macros,t}cloneWith(t,e){const i=this.clone();return i[t]=e,i}setMathstyle(t){t&&"auto"!==t&&(this.mathstyle=Mathstyle$1.toMathstyle(t))}withMathstyle(t){const e=this.clone();return e.setMathstyle(t),e}fontFamily(t){const e=this.clone();return e.font=t,e}cramp(){return this.cloneWith("mathstyle",this.mathstyle.cramp())}sup(){return this.cloneWith("mathstyle",this.mathstyle.sup())}sub(){return this.cloneWith("mathstyle",this.mathstyle.sup())}fracDen(){return this.cloneWith("mathstyle",this.mathstyle.fracDen())}fracNum(){return this.cloneWith("mathstyle",this.mathstyle.fracNum())}getColor(){return this.phantom?"transparent":this.color}getBackgroundColor(){return this.phantom?"transparent":this.backgroundcolor}}var Context$1={Context:Context};const NUMBER_FORMATTER=new Intl.NumberFormat("en-US",{useGrouping:!1,maximumSignificantDigits:5});function toString(){let t="";for(const e of arguments)if("number"==typeof e)t+=NUMBER_FORMATTER.format(e);else if("string"==typeof e)t+=e;else if(Array.isArray(e))for(const i of e)t+=toString(i);else e&&(t+=e.toString());return t}function Span(t,e){this.classes=e||"",Array.isArray(t)?this.children=[].concat.apply([],t):"string"==typeof t?this.body=t:t&&"object"==typeof t&&(this.children=[t]),this.style=null,this.updateDimensions()}Span.prototype.updateDimensions=function(){let t=0,e=0,i=0;if(this.children)for(const s of this.children)s&&(s.height>t&&(t=s.height),s.depth>e&&(e=s.depth),s.maxFontSize>i&&(i=s.maxFontSize));this.height=t,this.depth=e,this.maxFontSize=i},Span.prototype.setStyle=function(t,...e){const i=toString(e);i.length>0&&(this.style||(this.style={}),this.style[t]=i)},Span.prototype.setTop=function(t){t&&0!==t&&(this.style||(this.style={}),this.style.top=toString(t)+"em",this.height-=t,this.depth+=t)},Span.prototype.setLeft=function(t){t&&0!==t&&(this.style||(this.style={}),this.style["margin-left"]=toString(t)+"em")},Span.prototype.setRight=function(t){t&&0!==t&&(this.style||(this.style={}),this.style["margin-right"]=toString(t)+"em")},Span.prototype.setWidth=function(t){t&&0!==t&&(this.style||(this.style={}),this.style.width=toString(t)+"em")},Span.prototype.addMarginRight=function(t){if(t&&0!==t){if(!this.style&&!/qquad|quad|enspace|thickspace|mediumspace|thinspace|negativethinspace/.test(this.classes)){const e={2:"qquad",1:"quad",".5":"enspace",.277778:"thickspace",.222222:"mediumspace",.166667:"thinspace","-0.166667":"negativethinspace"}[t.toString()];if(e)return void(this.classes+=" rspace "+e)}this.style||(this.style={});const e=parseFloat(this.style["margin-right"]||"0");this.style["margin-right"]=toString(e+t)+"em"}};const INTER_ATOM_SPACING={"mord+mop":3,"mord+mbin":4,"mord+mrel":5,"mord+minner":3,"mop+mord":3,"mop+mop":3,"mop+mbin":5,"mop+minner":3,"mbin+mord":4,"mbin+mop":4,"mbin+mopen":4,"mbin+minner":4,"mrel+mord":5,"mrel+mop":5,"mrel+mopen":5,"mrel+minner":5,"mclose+mop":3,"mclose+mbin":4,"mclose+mrel":5,"mclose+minner":3,"mpunct+mord":3,"mpunct+mop":3,"mpunct+mbin":4,"mpunct+mrel":5,"mpunct+mopen":3,"mpunct+mpunct":3,"mpunct+minner":3},INTER_ATOM_TIGHT_SPACING={"mord+mop":3,"mop+mord":3,"mop+mop":3,"mclose+mop":3,"minner+mop":3};function lastSpanType(t){let e=t.type;return-1!==t.classes.indexOf("ML__selected")&&(e=t.children[t.children.length-1].type),"first"===e?"none":"textord"===e?"mord":e}function height(t){if(!t)return 0;if(Array.isArray(t)){let e=0;for(const i of t)e=Math.max(e,i.height);return e}return t.height}function depth(t){if(!t)return 0;if(Array.isArray(t)){let e=0;for(const i of t)e=Math.max(e,i.depth);return e}return t.depth}function makeSpan(t,e){if(Array.isArray(t)){const i=[];for(const e of t)e&&i.push(e);if(1===i.length)return makeSpan(i[0],e)}return new Span(t,e)}function makeSpanOfType(t,e,i){const s=makeSpan(e,i);return s.type=t,s}function makeHlist(t,e){if(!e||0===e.length){if(t instanceof Span)return t;if(Array.isArray(t)&&1===t.length)return t[0]}return new Span(t,e)}Span.prototype.toMarkup=function(t,e){t=t||0,e=e||1;let i="",s=this.body||"";if(this.children){let t="none";for(const i of this.children){let a=0;if(t){let s=i.type;s&&("textord"===s&&(s="mord"),"first"===s&&(s="none"),a=i.isTight?(INTER_ATOM_TIGHT_SPACING[t+"+"+s]||0)/18:(INTER_ATOM_SPACING[t+"+"+s]||0)/18,a*=e)}s+=i.toMarkup(a,e),t=lastSpanType(i)}}const a=this.tag||"span";if(0===a.length)i=s||"";else{if(i="<"+a,this.svgOverlay&&(this.style||(this.style={}),this.style.position="relative"),this.attributes)for(const t in this.attributes)this.attributes.hasOwnProperty(t)&&(i+=" "+t+'="'+this.attributes[t]+'"');const e=this.classes.split(" ");this.type&&(/command|placeholder|error/.test(this.type)&&e.push({command:"ML__command",placeholder:"ML__placeholder",error:"ML__error"}[this.type]),this.hasCaret&&"command"===this.type&&e.push("ML__caret"));let n=e;if(e.length>1&&(n=e.filter(function(t,e,i){return t.length>0&&"mathrm"!==t&&i.indexOf(t)===e}).join(" ")),n.length>0&&(i+=' class="'+n+'"'),t&&(this.style||(this.style={}),this.style["margin-left"]?this.style["margin-left"]=toString(parseInt(this.style["margin-left"])+t,"em"):this.style["margin-left"]=toString(t,"em")),this.style){let t="";for(const e in this.style)this.style.hasOwnProperty(e)&&(t+=e+":"+this.style[e]+";");t.length>0&&(i+=' style="'+t+'"')}i+=">",this.svgOverlay?(i+=s,i+="<svg ",i+='style="position:absolute;left:0;bottom:0;right:0;width:100%;height:100%;z-index:2;',i+="top:"+(1-this.height)+"em;",i+='"',this.svgStyle&&(i+=' style="'+this.svgStyle+'"'),i+=">",i+=this.svgOverlay,i+="</svg>"):i+=s,i+="</"+a+">"}return"<span>â</span>"===i&&(i=""),this.hasCaret&&"command"!==this.type&&(i='<span class="ML__caret">'+i+"</span>"),i},Span.prototype.tryCoalesceWith=function(t){if(this.tag!==t.tag)return!1;if(this.type!==t.type)return!1;if("error"===this.type||"placeholder"===this.type||"command"===this.type)return!1;const e=this.children&&this.children.length>0,i=t.children&&t.children.length>0;if(e||i)return!1;if((this.style?this.style.length:0)!==(t.style?t.style.length:0))return!1;const s=this.classes.trim().replace(/\s+/g," ").split(" "),a=t.classes.trim().replace(/\s+/g," ").split(" ");if(s.length!==a.length)return!1;s.sort(),a.sort();for(let t=0;t<s.length;t++){if("vertical-separator"===s[t])return!1;if(s[t]!==a[t])return!1}if(this.style&&t.style)for(const e in this.style)if(this.style.hasOwnProperty(e)&&t.style.hasOwnProperty(e)&&this.style[e]!==t.style[e])return!1;return this.body+=t.body,this.height=Math.max(this.height,t.height),this.depth=Math.max(this.depth,t.depth),this.italic=t.italic,!0};var Span$1={coalesce:function t(e){if(!e||0===e.length)return[];e[0].children=t(e[0].children);const i=[e[0]];for(let s=1;s<e.length;s++)i[i.length-1].tryCoalesceWith(e[s])||(e[s].children=t(e[s].children),i.push(e[s]));return i},makeSpan:makeSpan,makeOp:function(t,e){return makeSpanOfType("mop",t,e)},makeOrd:function(t,e){return makeSpanOfType("mord",t,e)},makeRel:function(t,e){return makeSpanOfType("mrel",t,e)},makeClose:function(t,e){return makeSpanOfType("mclose",t,e)},makeOpen:function(t,e){return makeSpanOfType("mopen",t,e)},makeInner:function(t,e){return makeSpanOfType("minner",t,e)},makePunct:function(t,e){return makeSpanOfType("mpunct",t,e)},makeSpanOfType:makeSpanOfType,makeSymbol:function(t,e,i){const s=new Span(e,i),a=FontMetrics.getCharacterMetrics(e,t);return s.height=a.height,s.depth=a.depth,s.skew=a.skew,s.italic=a.italic,s.setRight(s.italic),s},makeVlist:function(t,e,i,s){let a=0,n=0;i=i||"shift",s=s||0;for(let t=0;t<e.length;t++)Array.isArray(e[t])&&(1===e[t].length?e[t]=e[t][0]:e[t]=makeSpan(e[t]));if("shift"===i)a=-e[0].depth-s;else if("bottom"===i)a=-s;else if("top"===i){let t=s;for(const i of e)t-=i instanceof Span?i.height+i.depth:i;a=t}else if("individualShift"===i){const t=e;e=[t[0]],n=a=-t[1]-t[0].depth;for(let i=2;i<t.length;i+=2){const s=-t[i+1]-n-t[i].depth;n+=s;const a=s-(t[i-2].height+t[i-2].depth);e.push(a),e.push(t[i])}}let o=0;for(const t of e)t instanceof Span&&(o=Math.max(o,t.maxFontSize));const r=function(t,e){const i=e?e/t.mathstyle.sizeMultiplier:0,s=new Span("â");return 1!==i&&(s.setStyle("font-size",i,i>0?"em":""),s.attributes={"aria-hidden":!0}),"size5"!==t.size?new Span(s,"fontsize-ensurer reset-"+t.size+" size5"):0!==i?s:null}(t,o),l=[];n=a;for(const t of e)if("number"==typeof t)n+=t;else{const e=-t.depth-n;n+=t.height+t.depth;const i=makeSpan([r,t]);i.setTop(e),l.push(i)}const h=makeSpan(l,"vlist");return h.depth=Math.max(a,depth(h)||0),h.height=Math.max(-n,height(h)||0),h},makeHlist:makeHlist,makeStyleWrap:function(t,e,i,s,a){a=a||"";const n=makeHlist(e,(a+=" style-wrap ")+i.adjustTo(s));n.type=t;const o=s.sizeMultiplier/i.sizeMultiplier;return n.height*=o,n.depth*=o,n.maxFontSize=s.sizeMultiplier,n},makeSVG:function(t,e,i){return t.svgOverlay=e,t.svgStyle=i,t},height:height,depth:depth,skew:function(t){if(!t)return 0;if(Array.isArray(t)){let e=0;for(const i of t)e+=i.skew||0;return e}return t.skew},italic:function(t){return t?Array.isArray(t)?t[t.length-1].italic:t.italic:0}};let category="";const TEXT_SYMBOLS={},MATH_SYMBOLS={},COMMAND_SYMBOLS={},FUNCTIONS={},ENVIRONMENTS={},CRYPTIC="CRYPTIC",RARE="RARE",COMMON="COMMON",SUPERCOMMON="SUPERCOMMON",FREQUENCY_VALUE={CRYPTIC:0,ARCANE:200,VERY_RARE:600,RARE:1200,UNCOMMON:2e3,COMMON:3e3,SUPERCOMMON:4e3};function frequency(t,...e){const i="string"==typeof t?FREQUENCY_VALUE[t]:t;for(const t of e)TEXT_SYMBOLS[t]&&(TEXT_SYMBOLS[t].frequency=i),MATH_SYMBOLS[t]&&(MATH_SYMBOLS[t].frequency=i),FUNCTIONS[t]&&(FUNCTIONS[t]=Object.assign({},FUNCTIONS[t]),FUNCTIONS[t].frequency=i)}function defineSymbol(t,e,i,s,a,n){"string"==typeof n&&(n=FREQUENCY_VALUE[n]),e.includes(TEXT)&&(TEXT_SYMBOLS[t]={symbol:!0,category:category,fontFamily:i,type:s===ORD?TEXTORD:s,skipBoundary:!0,body:a,frequency:n}),e.includes(MATH)&&(MATH_SYMBOLS[t]={symbol:!0,category:category,fontFamily:i,type:s===ORD?MATHORD:s,skipBoundary:!0,value:a,frequency:n}),e.includes(COMMAND)&&(COMMAND_SYMBOLS[t]={fontFamily:i,type:s,value:a})}function defineSymbols(t,e,i,s,a){for(let n=0;n<t.length;n++){const o=t.charAt(n);defineSymbol(o,e,i,s,o,a)}}function defineSymbolRange(t,e,i,s,a,n){for(let o=t;o<=e;o++){const t=String.fromCodePoint(o);defineSymbol(t,i,s,a,t,n)}}const CODEPOINT_SHORTCUTS={183:"\\cdot",188:"\\frac{1}{4}",189:"\\frac{1}{2}",190:"\\frac{3}{4}",8304:"^{0}",8305:"^{i}",185:"^{1}",178:"^{2}",179:"^{3}",8308:"^{4}",8309:"^{5}",8310:"^{6}",8311:"^{7}",8312:"^{8}",8313:"^{9}",8314:"^{+}",8315:"^{-}",8316:"^{=}",8319:"^{n}",8320:"_{0}",8321:"_{1}",8322:"_{2}",8323:"_{3}",8324:"_{4}",8325:"_{5}",8326:"_{6}",8327:"_{7}",8328:"_{8}",8329:"_{9}",8330:"_{+}",8331:"_{-}",8332:"_{=}",8336:"_{a}",8337:"_{e}",8338:"_{o}",8339:"_{x}",8450:"\\C",8469:"\\N",8473:"\\P",8474:"\\Q",8477:"\\R",8484:"\\Z"};const MATH_LETTER_EXCEPTIONS={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},MATH_UNICODE_BLOCKS=[{start:119808,len:26,offset:65,style:"bold"},{start:119834,len:26,offset:97,style:"bold"},{start:119860,len:26,offset:65,style:"italic"},{start:119886,len:26,offset:97,style:"italic"},{start:119912,len:26,offset:65,style:"bolditalic"},{start:119938,len:26,offset:97,style:"bolditalic"},{start:119964,len:26,offset:65,variant:"mathcal"},{start:119990,len:26,offset:97,variant:"mathcal"},{start:120016,len:26,offset:65,variant:"mathcal",style:"bold"},{start:120042,len:26,offset:97,variant:"mathcal",style:"bold"},{start:120068,len:26,offset:65,variant:"mathfrak"},{start:120094,len:26,offset:97,variant:"mathfrak"},{start:120172,len:26,offset:65,variant:"mathfrak",style:"bold"},{start:120198,len:26,offset:97,variant:"mathfrak",style:"bold"},{start:120120,len:26,offset:65,variant:"mathbb"},{start:120146,len:26,offset:97,variant:"mathbb"},{start:120224,len:26,offset:65,variant:"mathsf"},{start:120250,len:26,offset:97,variant:"mathsf"},{start:120276,len:26,offset:65,variant:"mathsf",style:"bold"},{start:120302,len:26,offset:97,variant:"mathsf",style:"bold"},{start:120328,len:26,offset:65,variant:"mathsf",style:"italic"},{start:120354,len:26,offset:97,variant:"mathsf",style:"italic"},{start:120380,len:26,offset:65,variant:"mathsf",style:"bolditalic"},{start:120406,len:26,offset:97,variant:"mathsf",style:"bolditalic"},{start:120432,len:26,offset:65,variant:"mathtt"},{start:120458,len:26,offset:97,variant:"mathtt"},{start:120488,len:25,offset:913,style:"bold"},{start:120514,len:25,offset:945,style:"bold"},{start:120546,len:25,offset:913,style:"italic"},{start:120572,len:25,offset:945,style:"italic"},{start:120604,len:25,offset:913,style:"bolditalic"},{start:120630,len:25,offset:945,style:"bolditalic"},{start:120662,len:25,offset:913,variant:"mathsf",style:"bold"},{start:120688,len:25,offset:945,variant:"mathsf",style:"bold"},{start:120720,len:25,offset:913,variant:"mathsf",style:"bolditalic"},{start:120746,len:25,offset:945,variant:"mathsf",style:"bolditalic"},{start:120782,len:10,offset:48,variant:"",style:"bold"},{start:120792,len:10,offset:48,variant:"mathbb"},{start:120803,len:10,offset:48,variant:"mathsf"},{start:120812,len:10,offset:48,variant:"mathsf",style:"bold"},{start:120822,len:10,offset:48,variant:"mathtt"}];function unicodeToMathVariant(t){let e=t;if("string"==typeof t&&(e=t.codePointAt(0)),(e<119808||e>120831)&&(e<8448||e>8527))return{char:t};for(const t in MATH_LETTER_EXCEPTIONS)if(MATH_LETTER_EXCEPTIONS.hasOwnProperty(t)&&MATH_LETTER_EXCEPTIONS[t]===e){e=t;break}for(let t=0;t<MATH_UNICODE_BLOCKS.length;t++)if(e>=MATH_UNICODE_BLOCKS[t].start&&e<MATH_UNICODE_BLOCKS[t].start+MATH_UNICODE_BLOCKS[t].len)return{char:String.fromCodePoint(e-MATH_UNICODE_BLOCKS[t].start+MATH_UNICODE_BLOCKS[t].offset),variant:MATH_UNICODE_BLOCKS[t].variant,style:MATH_UNICODE_BLOCKS[t].style};return{char:t}}function codepointToLatex(t){if(CODEPOINT_SHORTCUTS[t])return CODEPOINT_SHORTCUTS[t];let e;const i=unicodeToMathVariant(t);return i.style||i.variant?(e=i.char,i.variant&&(e="\\"+i.variant+"{"+e+"}"),"bold"===i.style?e="\\mathbf{"+e+"}":"italic"===i.style?e="\\mathit{"+e+"}":"bolditalic"===i.style&&(e="\\mathbf{\\mathit{"+e+"}}"),"\\mathord{"+e+"}"):String.fromCodePoint(t)}const MATH="[math]",TEXT="[text]",COMMAND="[command]",MAIN="main",AMS="ams",ORD="[ord]",MATHORD="mord",BIN="mbin",REL="mrel",OPEN="mopen",CLOSE="mclose",INNER="minner",TEXTORD="textord",SPACING="spacing";function parseParamTemplateArgument(t,e){let i=t.match(/=(.+)/),s="{}",a="auto",n=null;return i&&(s=i[1]),(i=t.match(/:([^=]+)/))&&(a=i[1].trim()),(i=t.match(/^([^:=]+)/))&&(n=i[1].trim()),{optional:e,type:a,defaultValue:s,placeholder:n}}function parseParamTemplate(t){if(!t||0===t.length)return[];let e=[],i=t.split("]");if("["===i[0].charAt(0)){e.push(parseParamTemplateArgument(i[0].slice(1),!0));for(let t=1;t<=i.length;t++)e=e.concat(parseParamTemplate(i[t]))}else if("{"===(i=t.split("}"))[0].charAt(0)){e.push(parseParamTemplateArgument(i[0].slice(1),!1));for(let t=1;t<=i.length;t++)e=e.concat(parseParamTemplate(i[t]))}return e}function defineEnvironment(t,e,i,s){"string"==typeof t&&(t=[t]),i||(i={});const a=parseParamTemplate(e),n={category:category,params:a,parser:s,mathstyle:"displaystyle",tabular:i.tabular||!0,colFormat:i.colFormat||[]};for(const e of t)ENVIRONMENTS[e]=n}function defineFunction(t,e,i,s){"string"==typeof t&&(t=[t]),i||(i={});const a=parseParamTemplate(e),n={category:category,fontFamily:i.fontFamily,params:a,allowedInText:!!i.allowedInText,infix:!!i.infix,handler:s};for(const e of t)FUNCTIONS[e]=n}category="Environments",defineEnvironment("math","",{frequency:0},function(){return{mathstyle:"textstyle"}}),defineEnvironment("displaymath","",{frequency:8},function(){return{mathstyle:"displaystyle"}}),defineEnvironment("array","{columns:colspec}",{frequency:COMMON},function(t,e){return{colFormat:e[0],mathstyle:"textstyle"}}),defineEnvironment("eqnarray","",{},function(){return{}}),defineEnvironment("equation","",{},function(){return{colFormat:[{align:"c"}]}}),defineEnvironment("subequations","",{},function(){return{colFormat:[{align:"c"}]}}),defineEnvironment("multline","",{},function(){return{firstRowFormat:[{align:"l"}],colFormat:[{align:"c"}],lastRowFormat:[{align:"r"}]}}),defineEnvironment(["align","aligned"],"",{},function(t,e,i){let s=0;for(const t of i)s=Math.max(s,t.length);const a=[{gap:0},{align:"r"},{gap:0},{align:"l"}];let n=2;for(;n<s;)a.push({gap:1}),a.push({align:"r"}),a.push({gap:0}),a.push({align:"l"}),n+=2;return a.push({gap:0}),{colFormat:a,jot:.3}}),defineEnvironment("split","",{},function(){return{}}),defineEnvironment(["gather","gathered"],"",{},function(){return{colFormat:[{gap:.25},{align:"c"},{gap:0}],jot:.3}}),defineEnvironment(["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","smallmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*","smallmatrix*"],"[columns:colspec]",{},function(t,e){const i={mathstyle:"textstyle"};switch(t){case"pmatrix":case"pmatrix*":i.lFence="(",i.rFence=")";break;case"bmatrix":case"bmatrix*":i.lFence="[",i.rFence="]";break;case"Bmatrix":case"Bmatrix*":i.lFence="\\lbrace",i.rFence="\\rbrace";break;case"vmatrix":case"vmatrix*":i.lFence="\\vert",i.rFence="\\vert";break;case"Vmatrix":case"Vmatrix*":i.lFence="\\Vert",i.rFence="\\Vert";break;case"smallmatrix":case"smallmatrix*":i.mathstyle="scriptstyle";break;case"matrix":case"matrix*":i.lFence=".",i.rFence="."}return i.colFormat=e[0]||[{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"}],i}),defineEnvironment("cases","",{},function(){return{arraystretch:1.2,lFence:"\\lbrace",rFence:".",colFormat:[{align:"l"},{gap:1},{align:"l"}]}}),defineEnvironment("theorem","",{},function(){return{}}),defineEnvironment("center","",{},function(){return{colFormat:[{align:"c"}]}}),category="Trigonometry",defineFunction(["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],"",{fontFamily:"mainrm"},function(t){return{type:"mop",limits:"nolimits",symbol:!1,isFunction:!0,body:t.slice(1),fontFamily:"mainrm"}}),frequency(SUPERCOMMON,"\\cos","\\sin","\\tan"),frequency("UNCOMMON","\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arcsec","\\arccsc"),frequency("UNCOMMON","\\arsinh","\\arccosh","\\arctanh","\\arcsech","\\arccsch"),frequency("UNCOMMON","\\arg","\\ch","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\lg","\\lb","\\sec","\\sinh","\\sh","\\tanh","\\tg","\\th"),category="Functions",defineFunction(["\\deg","\\dim","\\exp","\\hom","\\ker","\\lb","\\lg","\\ln","\\log"],"",{fontFamily:"mainrm"},function(t){return{type:"mop",limits:"nolimits",symbol:!1,isFunction:!0,body:t.slice(1),fontFamily:"mainrm"}}),frequency(SUPERCOMMON,"\\ln","\\log","\\exp"),frequency(292,"\\hom"),frequency(COMMON,"\\dim"),frequency(COMMON,"\\ker","\\deg"),defineFunction(["\\lim","\\mod"],"",{fontFamily:"mainrm"},function(t){return{type:"mop",limits:"limits",symbol:!1,body:t.slice(1),fontFamily:"mainrm"}}),defineFunction(["\\det","\\max","\\min"],"",{fontFamily:"mainrm"},function(t){return{type:"mop",limits:"limits",symbol:!1,isFunction:!0,body:t.slice(1),fontFamily:"mainrm"}}),frequency(SUPERCOMMON,"\\lim"),frequency(COMMON,"\\det"),frequency(COMMON,"\\mod"),frequency(COMMON,"\\min"),frequency(COMMON,"\\max"),category="Decoration",defineFunction("\\rule","[raise:dimen]{width:dimen}{thickness:dimen}",null,function(t,e){return{type:"rule",shift:e[0],width:e[1],height:e[2]}}),defineFunction("\\color","{:color}",null,function(t,e){return{type:"color",color:e[0]}}),defineFunction("\\textcolor","{:color}{content:auto}",null,function(t,e){return{type:"color",textcolor:e[0],skipBoundary:!0,body:e[1]}}),frequency(3,"\\textcolor"),defineFunction("\\overline","{:auto}",null,function(t,e){return{type:"line",position:"overline",skipBoundary:!0,body:e[0]}}),frequency(COMMON,"\\overline"),defineFunction("\\underline","{:auto}",null,function(t,e){return{type:"line",position:"underline",skipBoundary:!0,body:e[0]}}),frequency(COMMON,"\\underline"),defineFunction("\\overset","{annotation:auto}{symbol:auto}",null,function(t,e){return{type:"overunder",overscript:e[0],skipBoundary:!0,body:e[1]}}),frequency(COMMON,"\\overset"),defineFunction("\\underset","{annotation:auto}{symbol:auto}",null,function(t,e){return{type:"overunder",underscript:e[0],skipBoundary:!0,body:e[1]}}),frequency(COMMON,"\\underset"),defineFunction(["\\stackrel","\\stackbin"],"{annotation:auto}{symbol:auto}",null,function(t,e){return{type:"overunder",overscript:e[0],skipBoundary:!0,body:e[1],mathtype:"\\stackrel"===t?"mrel":"mbin"}}),frequency(COMMON,"\\stackrel"),frequency(0,"\\stackbin"),defineFunction("\\rlap","{:text}",null,function(t,e){return{type:"overlap",align:"right",skipBoundary:!0,body:e[0]}}),frequency(270,"\\rlap"),defineFunction("\\llap","{:text}",null,function(t,e){return{type:"overlap",align:"left",skipBoundary:!0,body:e[0]}}),frequency(18,"\\llap"),defineFunction("\\mathrlap","{:auto}",null,function(t,e){return{type:"overlap",align:"right",skipBoundary:!0,body:e[0]}}),frequency(CRYPTIC,"\\mathrlap"),defineFunction("\\mathllap","{:auto}",null,function(t,e){return{type:"overlap",align:"left",skipBoundary:!0,body:e[0]}}),frequency(CRYPTIC,"\\mathllap"),defineFunction("\\boxed","{content:math}",null,function(t,e){return{type:"box",framecolor:"black",skipBoundary:!0,body:e[0]}}),frequency(1236,"\\boxed"),defineFunction("\\colorbox","{background-color:color}{content:auto}",null,function(t,e){return{type:"box",backgroundcolor:e[0],skipBoundary:!0,body:e[1]}}),frequency(CRYPTIC,"\\colorbox"),defineFunction("\\fcolorbox","{frame-color:color}{background-color:color}{content:auto}",null,function(t,e){return{type:"box",framecolor:e[0],backgroundcolor:e[1],skipBoundary:!0,body:e[2]}}),frequency(CRYPTIC,"\\fcolorbox"),defineFunction("\\bbox","[:bbox]{body:auto}",null,function(t,e){return e[0]?{type:"box",padding:e[0].padding,border:e[0].border,backgroundcolor:e[0].backgroundcolor,skipBoundary:!0,body:e[1]}:{type:"box",skipBoundary:!0,body:e[1]}}),frequency(CRYPTIC,"\\bbox"),defineFunction("\\enclose","{notation:string}[style:string]{body:auto}",null,function(t,e){let i=e[0]||[];const s={type:"enclose",strokeColor:"currentColor",strokeWidth:1,strokeStyle:"solid",backgroundcolor:"transparent",padding:"auto",shadow:"auto",captureSelection:!0,body:e[2]};if(e[1]){const t=e[1].split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(const e of t){const t=e.match(/\s*(\S+)\s+(\S+)\s+(.*)/);if(t)s.strokeWidth=FontMetrics.toPx(t[1],"px"),isNaN(s.strokeWidth)&&(s.strokeWidth=1),s.strokeStyle=t[2],s.strokeColor=t[3];else{const t=e.match(/\s*([a-z]*)\s*=\s*"(.*)"/);t&&("mathbackground"===t[1]?s.backgroundcolor=t[2]:"mathcolor"===t[1]?s.strokeColor=t[2]:"padding"===t[1]?s.padding=FontMetrics.toPx(t[2],"px"):"shadow"===t[1]&&(s.shadow=t[2]))}}"dashed"===s.strokeStyle?s.svgStrokeStyle="5,5":"dotted"===s.strokeStyle&&(s.svgStrokeStyle="1,5")}s.borderStyle=s.strokeWidth+"px "+s.strokeStyle+" "+s.strokeColor,i=i.split(/[, ]/).filter(t=>t.length>0).map(t=>t.toLowerCase()),s.notation={};for(const t of i)s.notation[t]=!0;return s.notation.updiagonalarrow&&(s.notation.updiagonalstrike=!1),s.notation.box&&(s.notation.left=!1,s.notation.right=!1,s.notation.bottom=!1,s.notation.top=!1),s}),frequency(CRYPTIC,"\\enclose"),defineFunction("\\cancel","{body:auto}",null,function(t,e){return{type:"enclose",strokeColor:"currentColor",strokeWidth:1,strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",notation:{updiagonalstrike:!0},body:e[0]}}),defineFunction("\\bcancel","{body:auto}",null,function(t,e){return{type:"enclose",strokeColor:"currentColor",strokeWidth:1,strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",notation:{downdiagonalstrike:!0},body:e[0]}}),defineFunction("\\xcancel","{body:auto}",null,function(t,e){return{type:"enclose",strokeColor:"currentColor",strokeWidth:1,strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",notation:{updiagonalstrike:!0,downdiagonalstrike:!0},body:e[0]}}),frequency(CRYPTIC,"\\cancel","\\bcancel","\\xcancel");const FONT_ALIASES={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\boldsymbol":"\\mathbf","\\bm":"\\mathbf","\\bf":"\\mathbf","\\it":"\\mathit"};category="Styling",defineFunction(["\\mathrm","\\mathit","\\mathbf","\\bf","\\it","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak","\\boldsymbol","\\bm"],"{text:math}",{},function(t,e){return t in FONT_ALIASES&&(t=FONT_ALIASES[t]),{type:"font",font:t.slice(1),skipBoundary:!0,body:e[0],captureSelection:!0}}),frequency(SUPERCOMMON,"\\mathbb"),frequency(1081,"\\Bbb"),frequency(0,"\\mathcal"),frequency(COMMON,"\\mathfrak"),frequency(271,"\\frak"),frequency(COMMON,"\\mathscr"),frequency("UNCOMMON","\\mathsf"),frequency(COMMON,"\\mathtt"),frequency(COMMON,"\\boldsymbol"),defineFunction(["\\mbox"],"{text:text}",{allowedInText:!0},function(t,e){return{type:"font",skipBoundary:!0,body:e[0],font:"mathrm"}}),defineFunction(["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textit","\\emph","\\em"],"{text:text}",{allowedInText:!0},function(t,e){return{type:"font",skipBoundary:!0,body:e[0],font:{"\\text":null,"\\textrm":"mathrm","\\textup":"mathrm","\\textnormal":"mathrm","\\textsf":"mathsf","\\texttt":"mathtt","\\textbf":"mathbf","\\textit":"textit","\\emph":"emph","\\em":"emph"}[t]}}),frequency(COMMON,"\\textrm"),frequency(COMMON,"\\textit"),frequency(COMMON,"\\textsf"),frequency(COMMON,"\\texttt"),frequency(433,"\\textnormal"),frequency(COMMON,"\\textbf"),frequency(421,"\\textup"),frequency(819,"\\emph"),frequency(49,"\\em"),category="Operators",defineFunction("\\sqrt","[index:auto]{radicand:auto}",null,function(t,e){return{type:"surd",body:e[1],index:e[0]}}),frequency(SUPERCOMMON,"\\sqrt"),category="Fractions",defineFunction(["\\frac","\\dfrac","\\tfrac","\\cfrac","\\binom","\\dbinom","\\tbinom"],"{numerator}{denominator}",{},function(t,e){const i={type:"genfrac",numer:e[0],denom:e[1],mathstyle:"auto"};switch(t){case"\\dfrac":case"\\frac":case"\\tfrac":case"\\cfrac":i.hasBarLine=!0;break;case"\\\\atopfrac":i.hasBarLine=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":i.hasBarLine=!1,i.leftDelim="(",i.rightDelim=")"}switch(t){case"\\dfrac":case"\\dbinom":i.mathstyle="displaystyle";break;case"\\tfrac":case"\\tbinom":i.mathstyle="textstyle"}return"\\cfrac"===t&&(i.continuousFraction=!0),i}),defineFunction(["\\over","\\atop","\\choose"],"",{infix:!0},function(t,e){const i=e[0],s=e[1];let a=!1,n=null,o=null;switch(t){case"\\atop":break;case"\\over":a=!0;break;case"\\choose":a=!1,n="(",o=")";break;default:throw new Error("Unrecognized genfrac command")}return{type:"genfrac",numer:i,denom:s,hasBarLine:a,leftDelim:n,rightDelim:o,mathstyle:"auto"}}),frequency(21,"\\over"),frequency(12,"\\atop"),frequency(1968,"\\choose"),defineFunction(["\\overwithdelims","\\atopwithdelims"],"{left-delim:delim}{right-delim:delim}",{infix:!0},function(t,e){return{type:"genfrac",numer:e[0],denom:e[1],hasBarLine:!1,leftDelim:e[2],rightDelim:e[3],mathstyle:"auto"}}),frequency(15,"\\overwithdelims"),frequency(COMMON,"\\atopwithdelims"),category="Fractions",defineFunction(["\\pdiff"],"{numerator}{denominator}",{},function(t,e){return{type:"genfrac",numer:e[0],denom:e[1],numerPrefix:"â",denomPrefix:"â",hasBarLine:!0,leftDelim:null,rightDelim:null,mathstyle:"auto"}}),category="Quantifiers",defineSymbol("\\forall",MATH,MAIN,TEXTORD,"â",SUPERCOMMON),defineSymbol("\\exists",MATH,MAIN,TEXTORD,"â",SUPERCOMMON),defineSymbol("\\nexists",MATH,AMS,TEXTORD,"â",SUPERCOMMON),defineSymbol("\\mid",MATH,MAIN,REL,"â£",COMMON),defineSymbol("\\top",MATH,MAIN,TEXTORD,"â¤",RARE),defineSymbol("\\bot",MATH,MAIN,TEXTORD,"â¥",RARE),category="Variable Sized Symbols",defineFunction(["\\sum","\\prod","\\bigcup","\\bigcap","\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","\\intop"],"",{},function(t){return{type:"mop",limits:"auto",symbol:!0,fontFamily:"main",body:{coprod:"â",bigvee:"â",bigwedge:"â",biguplus:"â¨",bigcap:"â",bigcup:"â",intop:"â«",prod:"â",sum:"â",bigotimes:"â¨",bigoplus:"â¨",bigodot:"â¨",bigsqcup:"â¨",smallint:"â«"}[t.slice(1)]}}),defineFunction(["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","\\intclockwise","\\varointclockwise","\\ointctrclockwise","\\intctrclockwise"],"",{},function(t){return{type:"mop",limits:"nolimits",symbol:!0,body:{int:"â«",iint:"â¬",iiint:"â­",oint:"â®",oiint:"â¯",oiiint:"â°",intclockwise:"â±",varointclockwise:"â²",ointctrclockwise:"â³",intctrclockwise:"â¨"}[t.slice(1)]}}),frequency(SUPERCOMMON,"\\sum","\\prod","\\bigcap","\\bigcup","\\int"),frequency(COMMON,"\\bigoplus","\\smallint","\\iint","\\oint"),frequency(RARE,"\\bigwedge","\\bigvee"),frequency(756,"\\coprod"),frequency(723,"\\bigsqcup"),frequency(1241,"\\bigotimes"),frequency(150,"\\bigodot"),frequency(174,"\\biguplus"),frequency(878,"\\iiint"),frequency(97,"\\intop"),category="Various",defineSymbol("\\sharp",MATH,MAIN,TEXTORD,"â¯",COMMON),defineSymbol("\\flat",MATH,MAIN,TEXTORD,"â­",590),defineSymbol("\\natural",MATH,MAIN,TEXTORD,"â®",278),defineSymbol("\\#",MATH,MAIN,TEXTORD,"#",RARE),defineSymbol("\\#",TEXT,MAIN,TEXTORD,"#",RARE),defineSymbol("\\&",MATH,MAIN,TEXTORD,"&",RARE),defineSymbol("\\&",TEXT,MAIN,TEXTORD,"&",RARE),defineSymbol("\\clubsuit",MATH,MAIN,TEXTORD,"â£",172),defineSymbol("\\heartsuit",MATH,MAIN,TEXTORD,"â¡","ARCANE"),defineSymbol("\\spadesuit",MATH,MAIN,TEXTORD,"â ","ARCANE"),defineSymbol("\\diamondsuit",MATH,MAIN,TEXTORD,"â¢",CRYPTIC),defineSymbol("\\differencedelta",MATH,MAIN,REL,"â",COMMON),category="Letters and Letter Like Forms",defineFunction(["\\unicode"],"{charcode:number}",null,function(t,e){let i=parseInt(e[0]);return isNaN(i)&&(i=10067),{type:"mord",fontFamily:"main",body:String.fromCodePoint(i)}}),defineSymbol("?",MATH,MAIN,TEXTORD,"?"),defineSymbol("!",MATH,MAIN,TEXTORD,"!"),defineSymbol("\\nabla",MATH,MAIN,TEXTORD,"â",SUPERCOMMON),defineSymbol("\\partial",MATH,MAIN,TEXTORD,"â",SUPERCOMMON),defineSymbol("\\ell",MATH,MAIN,TEXTORD,"â",COMMON),defineSymbol("\\imaginaryI",MATH,"main",MATHORD,"i"),defineSymbol("\\imaginaryJ",MATH,"main",MATHORD,"j"),defineSymbol("\\Re",MATH,MAIN,TEXTORD,"â",COMMON),defineSymbol("\\Im",MATH,MAIN,TEXTORD,"â",COMMON),defineSymbol("\\hbar",MATH,MAIN,TEXTORD,"â",COMMON),defineSymbol("\\hslash",MATH,AMS,TEXTORD,"â",COMMON),defineSymbol("\\differentialD",MATH,"mathrm",MATHORD,"d"),defineSymbol("\\rd",MATH,"mathrm",MATHORD,"d"),defineSymbol("\\capitalDifferentialD",MATH,"mathrm",MATHORD,"D"),defineSymbol("\\rD",MATH,"mathrm",MATHORD,"D"),defineSymbol("\\exponentialE",MATH,"mathrm",MATHORD,"e"),defineSymbol("\\Finv",MATH,AMS,TEXTORD,"â²",3),defineSymbol("\\Game",MATH,AMS,TEXTORD,"â",1),defineSymbol("\\wp",MATH,MAIN,TEXTORD,"â",1306),defineSymbol("\\eth",MATH,AMS,TEXTORD,"Ã°",77),defineSymbol("\\mho",MATH,AMS,TEXTORD,"â§",138),defineSymbol("\\Bbbk",MATH,AMS,TEXTORD,"k"),defineSymbol("\\doubleStruckCapitalN",MATH,"mathbb",MATHORD,"N"),defineSymbol("\\N",MATH,"mathbb",MATHORD,"N"),defineSymbol("\\doubleStruckCapitalR",MATH,"mathbb",MATHORD,"R"),defineSymbol("\\R",MATH,"mathbb",MATHORD,"R"),defineSymbol("\\doubleStruckCapitalQ",MATH,"mathbb",MATHORD,"Q"),defineSymbol("\\Q",MATH,"mathbb",MATHORD,"Q"),defineSymbol("\\doubleStruckCapitalC",MATH,"mathbb",MATHORD,"C"),defineSymbol("\\C",MATH,"mathbb",MATHORD,"C"),defineSymbol("\\doubleStruckCapitalZ",MATH,"mathbb",MATHORD,"Z"),defineSymbol("\\Z",MATH,"mathbb",MATHORD,"Z"),defineSymbol("\\doubleStruckCapitalP",MATH,"mathbb",MATHORD,"P"),defineSymbol("\\P",MATH,"mathbb",MATHORD,"P"),defineSymbol("\\scriptCapitalE",MATH,"mathscr",MATHORD,"E"),defineSymbol("\\scriptCapitalH",MATH,"mathscr",MATHORD,"H"),defineSymbol("\\scriptCapitalL",MATH,"mathscr",MATHORD,"L"),defineSymbol("\\gothicCapitalC",MATH,"mathfrak",MATHORD,"C"),defineSymbol("\\gothicCapitalH",MATH,"mathfrak",MATHORD,"H"),defineSymbol("\\gothicCapitalI",MATH,"mathfrak",MATHORD,"I"),defineSymbol("\\gothicCapitalR",MATH,"mathfrak",MATHORD,"R"),defineSymbol("\\pounds",MATH,MAIN,MATHORD,"Â£",509),defineSymbol("\\yen",MATH,AMS,TEXTORD,"Â¥",57),defineSymbol("\\euro",MATH,MAIN,MATHORD,"â¬",4),defineSymbol("\\euro",TEXT,MAIN,TEXTORD,"â¬",4),category="Crosses",defineSymbol("\\textdagger",MATH,MAIN,BIN,"â "),defineSymbol("\\dagger",MATH,MAIN,BIN,"â ",COMMON),defineSymbol("\\dag",MATH,MAIN,BIN,"â ",COMMON),defineSymbol("\\ddag",MATH,MAIN,BIN,"â¡",500),defineSymbol("\\textdaggerdbl",MATH,MAIN,BIN,"â¡"),defineSymbol("\\ddagger",MATH,MAIN,BIN,"â¡",353),defineSymbol("\\maltese",MATH,AMS,TEXTORD,"â ",24),defineSymbol("\\maltese",TEXT,AMS,TEXTORD,"â ",24),category="Arrows",defineSymbol("\\longrightarrow",MATH,MAIN,REL,"â¶",SUPERCOMMON),defineSymbol("\\rightarrow",MATH,MAIN,REL,"â",SUPERCOMMON),defineSymbol("\\Longrightarrow",MATH,MAIN,REL,"â¹",SUPERCOMMON),defineSymbol("\\Rightarrow",MATH,MAIN,REL,"â",SUPERCOMMON),defineSymbol("\\longmapsto",MATH,MAIN,REL,"â¼",COMMON),defineSymbol("\\mapsto",MATH,MAIN,REL,"â¦",COMMON),defineSymbol("\\Longleftrightarrow",MATH,MAIN,REL,"âº",COMMON),defineSymbol("\\rightleftarrows",MATH,AMS,REL,"â",COMMON),defineSymbol("\\leftarrow",MATH,MAIN,REL,"â",COMMON),defineSymbol("\\curvearrowleft",MATH,AMS,REL,"â¶",COMMON),defineSymbol("\\uparrow",MATH,MAIN,REL,"â",COMMON),defineSymbol("\\downarrow",MATH,MAIN,REL,"â",COMMON),defineSymbol("\\hookrightarrow",MATH,MAIN,REL,"âª",COMMON),defineSymbol("\\rightharpoonup",MATH,MAIN,REL,"â",COMMON),defineSymbol("\\rightleftharpoons",MATH,MAIN,REL,"â",COMMON),defineSymbol("\\Leftarrow",MATH,MAIN,REL,"â",1695),defineSymbol("\\longleftrightarrow",MATH,MAIN,REL,"â·",1599),defineSymbol("\\longleftarrow",MATH,MAIN,REL,"âµ",878),defineSymbol("\\Longleftarrow",MATH,MAIN,REL,"â¸",296),defineSymbol("\\searrow",MATH,MAIN,REL,"â",1609),defineSymbol("\\nearrow",MATH,MAIN,REL,"â",1301),defineSymbol("\\swarrow",MATH,MAIN,REL,"â",167),defineSymbol("\\nwarrow",MATH,MAIN,REL,"â",108),defineSymbol("\\Uparrow",MATH,MAIN,REL,"â",257),defineSymbol("\\Downarrow",MATH,MAIN,REL,"â",556),defineSymbol("\\updownarrow",MATH,MAIN,REL,"â",192),defineSymbol("\\Updownarrow",MATH,MAIN,REL,"â",161),defineSymbol("\\hookleftarrow",MATH,MAIN,REL,"â©",115),defineSymbol("\\leftharpoonup",MATH,MAIN,REL,"â¼",93),defineSymbol("\\leftharpoondown",MATH,MAIN,REL,"â½",42),defineSymbol("\\rightharpoondown",MATH,MAIN,REL,"â",80),defineSymbol("\\leftrightarrows",MATH,AMS,REL,"â",765),defineSymbol("\\dashrightarrow",MATH,AMS,REL,"â¢",311),defineSymbol("\\dashleftarrow",MATH,AMS,REL,"â ",5),defineSymbol("\\leftleftarrows",MATH,AMS,REL,"â",8),defineSymbol("\\Lleftarrow",MATH,AMS,REL,"â",7),defineSymbol("\\twoheadleftarrow",MATH,AMS,REL,"â",32),defineSymbol("\\leftarrowtail",MATH,AMS,REL,"â¢",25),defineSymbol("\\looparrowleft",MATH,AMS,REL,"â«",6),defineSymbol("\\leftrightharpoons",MATH,AMS,REL,"â",205),defineSymbol("\\circlearrowleft",MATH,AMS,REL,"âº",105),defineSymbol("\\Lsh",MATH,AMS,REL,"â°",11),defineSymbol("\\upuparrows",MATH,AMS,REL,"â",15),defineSymbol("\\downharpoonleft",MATH,AMS,REL,"â",21),defineSymbol("\\multimap",MATH,AMS,REL,"â¸",108),defineSymbol("\\leftrightsquigarrow",MATH,AMS,REL,"â­",31),defineSymbol("\\twoheadrightarrow",MATH,AMS,REL,"â ",835),defineSymbol("\\rightarrowtail",MATH,AMS,REL,"â£",195),defineSymbol("\\looparrowright",MATH,AMS,REL,"â¬",37),defineSymbol("\\curvearrowright",MATH,AMS,REL,"â·",209),defineSymbol("\\circlearrowright",MATH,AMS,REL,"â»",63),defineSymbol("\\Rsh",MATH,AMS,REL,"â±",18),defineSymbol("\\downdownarrows",MATH,AMS,REL,"â",6),defineSymbol("\\upharpoonright",MATH,AMS,REL,"â¾",579),defineSymbol("\\downharpoonright",MATH,AMS,REL,"â",39),defineSymbol("\\rightsquigarrow",MATH,AMS,REL,"â",674),defineSymbol("\\leadsto",MATH,AMS,REL,"â",709),defineSymbol("\\Rrightarrow",MATH,AMS,REL,"â",62),defineSymbol("\\restriction",MATH,AMS,REL,"â¾",29),defineSymbol("\\upharpoonleft",MATH,AMS,REL,"â¿",CRYPTIC),defineSymbol("\\rightrightarrows",MATH,AMS,REL,"â",CRYPTIC),category="Negated Arrows",defineSymbol("\\nrightarrow",MATH,AMS,REL,"â",324),defineSymbol("\\nRightarrow",MATH,AMS,REL,"â",107),defineSymbol("\\nleftrightarrow",MATH,AMS,REL,"â®",36),defineSymbol("\\nLeftrightarrow",MATH,AMS,REL,"â",20),defineSymbol("\\nleftarrow",MATH,AMS,REL,"â",7),defineSymbol("\\nLeftarrow",MATH,AMS,REL,"â",5),category="Negated Relations",defineSymbol("\\nless",MATH,AMS,REL,"â®",146),defineSymbol("\\nleqslant",MATH,AMS,REL,"î",58),defineSymbol("\\lneq",MATH,AMS,REL,"âª",54),defineSymbol("\\lneqq",MATH,AMS,REL,"â¨",36),defineSymbol("\\nleqq",MATH,AMS,REL,"î",18),defineSymbol("\\unlhd",MATH,AMS,BIN,"â´",253),defineSymbol("\\unrhd",MATH,AMS,BIN,"âµ",66),defineSymbol("\\lvertneqq",MATH,AMS,REL,"î",6),defineSymbol("\\lnsim",MATH,AMS,REL,"â¦",4),defineSymbol("\\lnapprox",MATH,AMS,REL,"âª",CRYPTIC),defineSymbol("\\nprec",MATH,AMS,REL,"â",71),defineSymbol("\\npreceq",MATH,AMS,REL,"â ",57),defineSymbol("\\precnsim",MATH,AMS,REL,"â¨",4),defineSymbol("\\precnapprox",MATH,AMS,REL,"âª¹",2),defineSymbol("\\nsim",MATH,AMS,REL,"â",40),defineSymbol("\\nshortmid",MATH,AMS,REL,"î",1),defineSymbol("\\nmid",MATH,AMS,REL,"â¤",417),defineSymbol("\\nvdash",MATH,AMS,REL,"â¬",266),defineSymbol("\\nvDash",MATH,AMS,REL,"â­",405),defineSymbol("\\ngtr",MATH,AMS,REL,"â¯",90),defineSymbol("\\ngeqslant",MATH,AMS,REL,"î",23),defineSymbol("\\ngeqq",MATH,AMS,REL,"î",12),defineSymbol("\\gneq",MATH,AMS,REL,"âª",29),defineSymbol("\\gneqq",MATH,AMS,REL,"â©",35),defineSymbol("\\gvertneqq",MATH,AMS,REL,"î",6),defineSymbol("\\gnsim",MATH,AMS,REL,"â§",3),defineSymbol("\\gnapprox",MATH,AMS,REL,"âª",CRYPTIC),defineSymbol("\\nsucc",MATH,AMS,REL,"â",44),defineSymbol("\\nsucceq",MATH,AMS,REL,"â¡",CRYPTIC),defineSymbol("\\succnsim",MATH,AMS,REL,"â©",4),defineSymbol("\\succnapprox",MATH,AMS,REL,"âªº",CRYPTIC),defineSymbol("\\ncong",MATH,AMS,REL,"â",128),defineSymbol("\\nshortparallel",MATH,AMS,REL,"î",6),defineSymbol("\\nparallel",MATH,AMS,REL,"â¦",54),defineSymbol("\\nVDash",MATH,AMS,REL,"â¯",5),defineSymbol("\\nsupseteqq",MATH,AMS,REL,"î",1),defineSymbol("\\supsetneq",MATH,AMS,REL,"â",286),defineSymbol("\\varsupsetneq",MATH,AMS,REL,"î",2),defineSymbol("\\supsetneqq",MATH,AMS,REL,"â«",49),defineSymbol("\\varsupsetneqq",MATH,AMS,REL,"î",3),defineSymbol("\\nVdash",MATH,AMS,REL,"â®",179),defineSymbol("\\precneqq",MATH,AMS,REL,"âªµ",11),defineSymbol("\\succneqq",MATH,AMS,REL,"âª¶",3),defineSymbol("\\nsubseteqq",MATH,AMS,REL,"î",16),category="Various",defineSymbol("\\checkmark",MATH,AMS,TEXTORD,"â",1025),defineSymbol("\\diagup",MATH,AMS,TEXTORD,"â±",440),defineSymbol("\\diagdown",MATH,AMS,TEXTORD,"â²",175),defineSymbol("\\measuredangle",MATH,AMS,TEXTORD,"â¡",271),defineSymbol("\\sphericalangle",MATH,AMS,TEXTORD,"â¢",156),defineSymbol("\\backprime",MATH,AMS,TEXTORD,"âµ",104),defineSymbol("\\backdoubleprime",MATH,AMS,TEXTORD,"â¶",CRYPTIC),category="Shapes",defineSymbol("\\ast",MATH,MAIN,BIN,"â",SUPERCOMMON),defineSymbol("\\star",MATH,MAIN,BIN,"â",COMMON),defineSymbol("\\diamond",MATH,MAIN,BIN,"â",1356),defineSymbol("\\Diamond",MATH,AMS,TEXTORD,"â",695),defineSymbol("\\lozenge",MATH,AMS,TEXTORD,"â",422),defineSymbol("\\blacklozenge",MATH,AMS,TEXTORD,"â§«",344),defineSymbol("\\bigstar",MATH,AMS,TEXTORD,"â",168),category="Hebrew",defineSymbol("\\aleph",MATH,MAIN,TEXTORD,"âµ",1381),defineSymbol("\\beth",MATH,AMS,TEXTORD,"â¶",54),defineSymbol("\\daleth",MATH,AMS,TEXTORD,"â¸",43),defineSymbol("\\gimel",MATH,AMS,TEXTORD,"â·",36),category="Fences",defineSymbol("\\lbrace",MATH,MAIN,OPEN,"{",SUPERCOMMON),defineSymbol("\\rbrace",MATH,MAIN,CLOSE,"}",SUPERCOMMON),defineSymbol("\\langle",MATH,MAIN,OPEN,"â¨",COMMON),defineSymbol("\\rangle",MATH,MAIN,CLOSE,"â©",COMMON),defineSymbol("\\lfloor",MATH,MAIN,OPEN,"â",COMMON),defineSymbol("\\rfloor",MATH,MAIN,CLOSE,"â",COMMON),defineSymbol("\\lceil",MATH,MAIN,OPEN,"â",COMMON),defineSymbol("\\rceil",MATH,MAIN,CLOSE,"â",COMMON),defineSymbol("\\vert",MATH,MAIN,MATHORD,"â£",SUPERCOMMON),defineSymbol("\\mvert",MATH,MAIN,REL,"â£"),defineSymbol("\\lvert",MATH,MAIN,OPEN,"â£",496),defineSymbol("\\rvert",MATH,MAIN,CLOSE,"â£",496),defineSymbol("\\|",MATH,MAIN,TEXTORD,"â¥"),defineSymbol("\\Vert",MATH,MAIN,TEXTORD,"â¥",SUPERCOMMON),defineSymbol("\\mVert",MATH,MAIN,TEXTORD,"â¥"),defineSymbol("\\lVert",MATH,MAIN,OPEN,"â¥",287),defineSymbol("\\rVert",MATH,MAIN,CLOSE,"â¥",CRYPTIC),defineSymbol("\\lbrack",MATH,MAIN,OPEN,"[",574),defineSymbol("\\rbrack",MATH,MAIN,CLOSE,"]",213),defineSymbol("\\{",MATH,MAIN,OPEN,"{"),defineSymbol("\\{",TEXT,MAIN,TEXTORD,"{"),defineSymbol("\\}",MATH,MAIN,CLOSE,"}"),defineSymbol("\\}",TEXT,MAIN,TEXTORD,"}"),defineSymbol("(",MATH,MAIN,OPEN,"("),defineSymbol(")",MATH,MAIN,CLOSE,")"),defineSymbol("[",MATH,MAIN,OPEN,"["),defineSymbol("]",MATH,MAIN,CLOSE,"]"),defineSymbol("\\ulcorner",MATH,AMS,OPEN,"â",296),defineSymbol("\\urcorner",MATH,AMS,CLOSE,"â",310),defineSymbol("\\llcorner",MATH,AMS,OPEN,"â",137),defineSymbol("\\lrcorner",MATH,AMS,CLOSE,"â",199),defineSymbol("\\lgroup",MATH,MAIN,OPEN,"â®",24),defineSymbol("\\rgroup",MATH,MAIN,CLOSE,"â¯",24),defineSymbol("\\lmoustache",MATH,MAIN,OPEN,"â°",CRYPTIC),defineSymbol("\\rmoustache",MATH,MAIN,CLOSE,"â±",CRYPTIC),defineFunction(["\\middle"],"{:delim}",{},function(t,e){return{type:"delim",delim:e[0]}}),category="Sizing";const delimiterSizes={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}};function getSimpleString(t){let e="",i=!0;for(const s of t)"string"==typeof s.body?e+=s.body:i=!1;return i?e:""}defineFunction(["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],"{:delim}",{},function(t,e){return{type:"sizeddelim",size:delimiterSizes[t].size,cls:delimiterSizes[t].mclass,delim:e[0]}}),category="Relations",defineSymbol("=",MATH,MAIN,REL,"=",SUPERCOMMON),defineSymbol("\\ne",MATH,MAIN,REL,"â ",SUPERCOMMON),defineSymbol("\\neq",MATH,MAIN,REL,"â ",COMMON),defineSymbol("<",MATH,MAIN,REL,"<",SUPERCOMMON),defineSymbol("\\lt",MATH,MAIN,REL,"<",COMMON),defineSymbol(">",MATH,MAIN,REL,">",SUPERCOMMON),defineSymbol("\\gt",MATH,MAIN,REL,">",COMMON),defineSymbol("\\le",MATH,MAIN,REL,"â¤",COMMON),defineSymbol("\\ge",MATH,MAIN,REL,"â¥",COMMON),defineSymbol("\\leqslant",MATH,AMS,REL,"â©½",SUPERCOMMON),defineSymbol("\\geqslant",MATH,AMS,REL,"â©¾",SUPERCOMMON),defineSymbol("\\leq",MATH,MAIN,REL,"â¤",COMMON),defineSymbol("\\geq",MATH,MAIN,REL,"â¥",COMMON),defineSymbol("\\ll",MATH,MAIN,REL,"âª"),defineSymbol("\\gg",MATH,MAIN,REL,"â«",COMMON),defineSymbol("\\coloneq",MATH,MAIN,REL,"â",5),defineSymbol("\\measeq",MATH,MAIN,REL,"â"),defineSymbol("\\eqdef",MATH,MAIN,REL,"â"),defineSymbol("\\questeq",MATH,MAIN,REL,"â"),defineSymbol(":",MATH,MAIN,REL,":"),defineSymbol("\\cong",MATH,MAIN,REL,"â",COMMON),defineSymbol("\\equiv",MATH,MAIN,REL,"â¡",COMMON),defineSymbol("\\prec",MATH,MAIN,REL,"âº",COMMON),defineSymbol("\\preceq",MATH,MAIN,REL,"âª¯",COMMON),defineSymbol("\\succ",MATH,MAIN,REL,"â»",COMMON),defineSymbol("\\succeq",MATH,MAIN,REL,"âª°",1916),defineSymbol("\\perp",MATH,MAIN,REL,"â¥",COMMON),defineSymbol("\\parallel",MATH,MAIN,REL,"â¥",COMMON),defineSymbol("\\propto",MATH,MAIN,REL,"â",COMMON),defineSymbol("\\Colon",MATH,MAIN,REL,"â·"),defineSymbol("\\smile",MATH,MAIN,REL,"â£",COMMON),defineSymbol("\\frown",MATH,MAIN,REL,"â¢",COMMON),defineSymbol("\\sim",MATH,MAIN,REL,"â¼",COMMON),defineSymbol("\\gtrsim",MATH,AMS,REL,"â³",COMMON),defineSymbol("\\approx",MATH,MAIN,REL,"â",SUPERCOMMON),defineSymbol("\\approxeq",MATH,AMS,REL,"â",147),defineSymbol("\\thickapprox",MATH,AMS,REL,"â",377),defineSymbol("\\lessapprox",MATH,AMS,REL,"âª",146),defineSymbol("\\gtrapprox",MATH,AMS,REL,"âª",95),defineSymbol("\\precapprox",MATH,AMS,REL,"âª·",50),defineSymbol("\\succapprox",MATH,AMS,REL,"âª¸",CRYPTIC),defineSymbol("\\thicksim",MATH,AMS,REL,"â¼",779),defineSymbol("\\succsim",MATH,AMS,REL,"â¿",251),defineSymbol("\\precsim",MATH,AMS,REL,"â¾",104),defineSymbol("\\backsim",MATH,AMS,REL,"â½",251),defineSymbol("\\eqsim",MATH,AMS,REL,"â",62),defineSymbol("\\backsimeq",MATH,AMS,REL,"â",91),defineSymbol("\\simeq",MATH,MAIN,REL,"â",CRYPTIC),defineSymbol("\\lesssim",MATH,AMS,REL,"â²",CRYPTIC),defineSymbol("\\nleq",MATH,AMS,REL,"â°",369),defineSymbol("\\ngeq",MATH,AMS,REL,"â±",164),defineSymbol("\\smallsmile",MATH,AMS,REL,"â£",31),defineSymbol("\\smallfrown",MATH,AMS,REL,"â¢",71),defineSymbol("\\bowtie",MATH,MAIN,REL,"â",558),defineSymbol("\\asymp",MATH,MAIN,REL,"â",755),defineSymbol("\\sqsubseteq",MATH,MAIN,REL,"â",1255),defineSymbol("\\sqsupseteq",MATH,MAIN,REL,"â",183),defineSymbol("\\leqq",MATH,AMS,REL,"â¦",1356),defineSymbol("\\eqslantless",MATH,AMS,REL,"âª",15),defineSymbol("\\lll",MATH,AMS,REL,"â",157),defineSymbol("\\lessgtr",MATH,AMS,REL,"â¶",281),defineSymbol("\\lesseqgtr",MATH,AMS,REL,"â",134),defineSymbol("\\lesseqqgtr",MATH,AMS,REL,"âª",CRYPTIC),defineSymbol("\\risingdotseq",MATH,AMS,REL,"â",8),defineSymbol("\\fallingdotseq",MATH,AMS,REL,"â",99),defineSymbol("\\subseteqq",MATH,AMS,REL,"â«",82),defineSymbol("\\Subset",MATH,AMS,REL,"â"),defineSymbol("\\sqsubset",MATH,AMS,REL,"â",309),defineSymbol("\\preccurlyeq",MATH,AMS,REL,"â¼",549),defineSymbol("\\curlyeqprec",MATH,AMS,REL,"â",14),defineSymbol("\\vDash",MATH,AMS,REL,"â¨",646),defineSymbol("\\Vvdash",MATH,AMS,REL,"âª",20),defineSymbol("\\bumpeq",MATH,AMS,REL,"â",13),defineSymbol("\\Bumpeq",MATH,AMS,REL,"â",12),defineSymbol("\\geqq",MATH,AMS,REL,"â§",972),defineSymbol("\\eqslantgtr",MATH,AMS,REL,"âª",13),defineSymbol("\\ggg",MATH,AMS,REL,"â",127),defineSymbol("\\gtrless",MATH,AMS,REL,"â·",417),defineSymbol("\\gtreqless",MATH,AMS,REL,"â",190),defineSymbol("\\gtreqqless",MATH,AMS,REL,"âª",91),defineSymbol("\\supseteqq",MATH,AMS,REL,"â«",6),defineSymbol("\\Supset",MATH,AMS,REL,"â",34),defineSymbol("\\sqsupset",MATH,AMS,REL,"â",71),defineSymbol("\\succcurlyeq",MATH,AMS,REL,"â½",442),defineSymbol("\\curlyeqsucc",MATH,AMS,REL,"â",10),defineSymbol("\\Vdash",MATH,AMS,REL,"â©",276),defineSymbol("\\shortmid",MATH,AMS,REL,"â£",67),defineSymbol("\\shortparallel",MATH,AMS,REL,"â¥",17),defineSymbol("\\between",MATH,AMS,REL,"â¬",110),defineSymbol("\\pitchfork",MATH,AMS,REL,"â",66),defineSymbol("\\varpropto",MATH,AMS,REL,"â",203),defineSymbol("\\backepsilon",MATH,AMS,REL,"â",176),defineSymbol("\\llless",MATH,AMS,REL,"â",CRYPTIC),defineSymbol("\\gggtr",MATH,AMS,REL,"â",CRYPTIC),defineSymbol("\\lhd",MATH,AMS,BIN,"â²",447),defineSymbol("\\rhd",MATH,AMS,BIN,"â³",338),defineSymbol("\\Join",MATH,MAIN,REL,"â",35),defineSymbol("\\doteq",MATH,MAIN,REL,"â",1450),defineSymbol("\\doteqdot",MATH,AMS,REL,"â",60),defineSymbol("\\Doteq",MATH,AMS,REL,"â",CRYPTIC),defineSymbol("\\eqcirc",MATH,AMS,REL,"â",6),defineSymbol("\\circeq",MATH,AMS,REL,"â",31),defineSymbol("\\lessdot",MATH,AMS,BIN,"â",88),defineSymbol("\\gtrdot",MATH,AMS,BIN,"â",45),defineSymbol("\\~",MATH,MAIN,REL,"~"),category="Logic",defineSymbol("\\leftrightarrow",MATH,MAIN,REL,"â",SUPERCOMMON),defineSymbol("\\Leftrightarrow",MATH,MAIN,REL,"â",SUPERCOMMON),defineSymbol("\\to",MATH,MAIN,REL,"â",SUPERCOMMON),defineSymbol("\\models",MATH,MAIN,REL,"â¨",COMMON),defineSymbol("\\vdash",MATH,MAIN,REL,"â¢",COMMON),defineSymbol("\\therefore",MATH,AMS,REL,"â´",1129),defineSymbol("\\because",MATH,AMS,REL,"âµ",388),defineSymbol("\\implies",MATH,MAIN,REL,"â¹",1858),defineSymbol("\\gets",MATH,MAIN,REL,"â",150),defineSymbol("\\dashv",MATH,MAIN,REL,"â£",299),defineSymbol("\\impliedby",MATH,MAIN,REL,"â¸",CRYPTIC),defineSymbol("\\biconditional",MATH,MAIN,REL,"â·",CRYPTIC),defineSymbol("\\roundimplies",MATH,MAIN,REL,"â¥°",CRYPTIC),category="Operators",defineSymbol("+",MATH,MAIN,BIN,"+",SUPERCOMMON),defineSymbol("-",MATH,MAIN,BIN,"â",SUPERCOMMON),defineSymbol("â",MATH,MAIN,BIN,"â",SUPERCOMMON),defineSymbol("\\pm",MATH,MAIN,BIN,"Â±",COMMON),defineSymbol("\\mp",MATH,MAIN,BIN,"â",COMMON),defineSymbol("*",MATH,MAIN,BIN,"â",COMMON),defineSymbol("\\times",MATH,MAIN,BIN,"Ã",COMMON),defineSymbol("\\div",MATH,MAIN,BIN,"Ã·",COMMON),defineSymbol("\\surd",MATH,MAIN,TEXTORD,"â",COMMON),defineSymbol("\\divides",MATH,MAIN,BIN,"â£",CRYPTIC),defineSymbol("\\ltimes",MATH,AMS,BIN,"â",576),defineSymbol("\\rtimes",MATH,AMS,BIN,"â",946),defineSymbol("\\leftthreetimes",MATH,AMS,BIN,"â",34),defineSymbol("\\rightthreetimes",MATH,AMS,BIN,"â",14),defineSymbol("\\intercal",MATH,AMS,BIN,"âº",478),defineSymbol("\\dotplus",MATH,AMS,BIN,"â",81),defineSymbol("\\centerdot",MATH,AMS,BIN,"â",271),defineSymbol("\\doublebarwedge",MATH,AMS,BIN,"â©",5),defineSymbol("\\divideontimes",MATH,AMS,BIN,"â",51),defineSymbol("\\cdot",MATH,MAIN,BIN,"â",CRYPTIC),category="Others",defineSymbol("\\infty",MATH,MAIN,TEXTORD,"â",SUPERCOMMON),defineSymbol("\\prime",MATH,MAIN,ORD,"â²",SUPERCOMMON),defineSymbol("\\doubleprime",MATH,MAIN,TEXTORD,"â³"),defineSymbol("\\angle",MATH,MAIN,TEXTORD,"â ",COMMON),defineSymbol("`",MATH,MAIN,TEXTORD,"â"),defineSymbol("\\$",MATH,MAIN,TEXTORD,"$"),defineSymbol("\\$",TEXT,MAIN,TEXTORD,"$"),defineSymbol("\\%",MATH,MAIN,TEXTORD,"%"),defineSymbol("\\%",TEXT,MAIN,TEXTORD,"%"),defineSymbol("\\_",MATH,MAIN,TEXTORD,"_"),defineSymbol("\\_",TEXT,MAIN,TEXTORD,"_"),category="Greek",defineSymbol("\\alpha",MATH,MAIN,ORD,"Î±",COMMON),defineSymbol("\\beta",MATH,MAIN,ORD,"Î²",COMMON),defineSymbol("\\gamma",MATH,MAIN,ORD,"Î³",COMMON),defineSymbol("\\delta",MATH,MAIN,ORD,"Î´",COMMON),defineSymbol("\\epsilon",MATH,MAIN,ORD,"Ïµ",COMMON),defineSymbol("\\varepsilon",MATH,MAIN,ORD,"Îµ"),defineSymbol("\\zeta",MATH,MAIN,ORD,"Î¶",COMMON),defineSymbol("\\eta",MATH,MAIN,ORD,"Î·",COMMON),defineSymbol("\\theta",MATH,MAIN,ORD,"Î¸",COMMON),defineSymbol("\\vartheta",MATH,MAIN,ORD,"Ï",COMMON),defineSymbol("\\iota",MATH,MAIN,ORD,"Î¹",COMMON),defineSymbol("\\kappa",MATH,MAIN,ORD,"Îº",COMMON),defineSymbol("\\varkappa",MATH,AMS,ORD,"Ï°",COMMON),defineSymbol("\\lambda",MATH,MAIN,ORD,"Î»",COMMON),defineSymbol("\\mu",MATH,MAIN,ORD,"Î¼",COMMON),defineSymbol("\\nu",MATH,MAIN,ORD,"Î½",COMMON),defineSymbol("\\xi",MATH,MAIN,ORD,"Î¾",COMMON),defineSymbol("\\omicron",MATH,MAIN,ORD,"o"),defineSymbol("\\pi",MATH,MAIN,ORD,"Ï",COMMON),defineSymbol("\\varpi",MATH,MAIN,ORD,"Ï",COMMON),defineSymbol("\\rho",MATH,MAIN,ORD,"Ï",COMMON),defineSymbol("\\varrho",MATH,MAIN,ORD,"Ï±",COMMON),defineSymbol("\\sigma",MATH,MAIN,ORD,"Ï",COMMON),defineSymbol("\\varsigma",MATH,MAIN,ORD,"Ï",COMMON),defineSymbol("\\tau",MATH,MAIN,ORD,"Ï",COMMON),defineSymbol("\\phi",MATH,MAIN,ORD,"Ï",COMMON),defineSymbol("\\varphi",MATH,MAIN,ORD,"Ï",COMMON),defineSymbol("\\upsilon",MATH,MAIN,ORD,"Ï",COMMON),defineSymbol("\\chi",MATH,MAIN,ORD,"Ï",COMMON),defineSymbol("\\psi",MATH,MAIN,ORD,"Ï",COMMON),defineSymbol("\\omega",MATH,MAIN,ORD,"Ï",COMMON),defineSymbol("\\Gamma",MATH,MAIN,ORD,"Î",COMMON),defineSymbol("\\Delta",MATH,MAIN,ORD,"Î",COMMON),defineSymbol("\\Theta",MATH,MAIN,ORD,"Î",COMMON),defineSymbol("\\Lambda",MATH,MAIN,ORD,"Î",COMMON),defineSymbol("\\Xi",MATH,MAIN,ORD,"Î",COMMON),defineSymbol("\\Pi",MATH,MAIN,ORD,"Î ",COMMON),defineSymbol("\\Sigma",MATH,MAIN,ORD,"Î£",COMMON),defineSymbol("\\Upsilon",MATH,MAIN,ORD,"Î¥",COMMON),defineSymbol("\\Phi",MATH,MAIN,ORD,"Î¦",COMMON),defineSymbol("\\Psi",MATH,MAIN,ORD,"Î¨",COMMON),defineSymbol("\\Omega",MATH,MAIN,ORD,"Î©",COMMON),defineSymbol("\\digamma",MATH,AMS,ORD,"Ï",248),category="Others",defineSymbol("\\emptyset",[TEXT,MATH],MAIN,TEXTORD,"â",SUPERCOMMON),defineSymbol("\\varnothing",[TEXT,MATH],AMS,TEXTORD,"â",SUPERCOMMON),category="Set Operators",defineSymbol("\\cap",MATH,MAIN,BIN,"â©",SUPERCOMMON),defineSymbol("\\cup",MATH,MAIN,BIN,"âª",SUPERCOMMON),defineSymbol("\\setminus",MATH,MAIN,BIN,"â",COMMON),defineSymbol("\\smallsetminus",MATH,AMS,BIN,"â",254),defineSymbol("\\complement",MATH,AMS,TEXTORD,"â",200),category="Set Relations",defineSymbol("\\in",MATH,MAIN,REL,"â",SUPERCOMMON),defineSymbol("\\notin",MATH,MAIN,REL,"â",SUPERCOMMON),defineSymbol("\\not",MATH,MAIN,REL,"Ì¸",COMMON),defineSymbol("\\ni",MATH,MAIN,REL,"â",COMMON),defineSymbol("\\owns",MATH,MAIN,REL,"â",18),defineSymbol("\\subset",MATH,MAIN,REL,"â",SUPERCOMMON),defineSymbol("\\supset",MATH,MAIN,REL,"â",SUPERCOMMON),defineSymbol("\\subseteq",MATH,MAIN,REL,"â",SUPERCOMMON),defineSymbol("\\supseteq",MATH,MAIN,REL,"â",SUPERCOMMON),defineSymbol("\\subsetneq",MATH,AMS,REL,"â",1945),defineSymbol("\\varsubsetneq",MATH,AMS,REL,"î",198),defineSymbol("\\subsetneqq",MATH,AMS,REL,"â«",314),defineSymbol("\\varsubsetneqq",MATH,AMS,REL,"î",55),defineSymbol("\\nsubset",MATH,AMS,REL,"â",CRYPTIC),defineSymbol("\\nsupset",MATH,AMS,REL,"â",CRYPTIC),defineSymbol("\\nsubseteq",MATH,AMS,REL,"â",950),defineSymbol("\\nsupseteq",MATH,AMS,REL,"â",49),category="Spacing",defineSymbol("\\ ",MATH,MAIN,SPACING,"Â "),defineSymbol("~",MATH,MAIN,SPACING,"Â "),defineSymbol("\\space",MATH,MAIN,SPACING,"Â "),defineSymbol("\\nobreakspace",[TEXT,MATH],MAIN,SPACING,"Â "),defineSymbol("\\!",MATH,MAIN,SPACING,null),defineSymbol("\\,",MATH,MAIN,SPACING,null),defineSymbol("\\:",MATH,MAIN,SPACING,null),defineSymbol("\\;",MATH,MAIN,SPACING,null),defineSymbol("\\enskip",MATH,MAIN,SPACING,null),defineSymbol("\\enspace",MATH,MAIN,SPACING,null,672),defineSymbol("\\quad",MATH,MAIN,SPACING,null,COMMON),defineSymbol("\\qquad",MATH,MAIN,SPACING,null,COMMON),defineFunction(["\\hspace","\\hspace*"],"{width:skip}",null,function(t,e){return{type:"spacing",width:e[0]||0}}),defineFunction(["\\mathop","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathord","\\mathinner"],"{:auto}",null,function(t,e){const i={type:{"\\mathop":"mop","\\mathbin":"mbin","\\mathrel":"mrel","\\mathopen":"mopen","\\mathclose":"mclose","\\mathpunct":"mpunct","\\mathord":"mord","\\mathinner":"minner"}[t],body:getSimpleString(e[0])||e[0],captureSelection:!0};return"\\mathop"===t&&(i.limits="nolimits",i.isFunction=!0),i}),defineFunction(["\\operatorname","\\operatorname*"],"{operator:string}",null,function(t,e){const i={type:"mop",skipBoundary:!0,body:e[0],isFunction:!0};return"\\operatorname"===t?i.limits="nolimits":"\\operatorname*"===t&&(i.limits="limits"),i}),category="Ignore",defineSymbol(" ",TEXT,MAIN,SPACING,"Â "),category="Punctuation",defineSymbol("\\colon",MATH,MAIN,"mpunct",":",COMMON),defineSymbol("\\cdotp",MATH,MAIN,"mpunct","â",COMMON),defineSymbol("\\ldots",TEXT,MAIN,INNER,"â¦",COMMON),defineSymbol("\\ldots",MATH,MAIN,INNER,"â¦",COMMON),defineSymbol("\\cdots",MATH,MAIN,INNER,"â¯",COMMON),defineSymbol("\\ddots",MATH,MAIN,INNER,"â±",COMMON),defineSymbol("\\mathellipsis",MATH,MAIN,INNER,"â¦",91),defineSymbol("\\textellipsis",TEXT,MAIN,INNER,"â¦",12),defineSymbol("\\vdots",MATH,MAIN,TEXTORD,"â®",COMMON),defineSymbol("\\ldotp",MATH,MAIN,"mpunct",".",18),defineSymbol(",",MATH,MAIN,"mpunct",","),defineSymbol(";",MATH,MAIN,"mpunct",";"),defineSymbol("--",TEXT,MAIN,TEXTORD,"â"),defineSymbol("---",TEXT,MAIN,TEXTORD,"â"),category="Logical Operators",defineSymbol("\\wedge",MATH,MAIN,BIN,"â§",SUPERCOMMON),defineSymbol("\\vee",MATH,MAIN,BIN,"â¨",SUPERCOMMON),defineSymbol("\\lnot",MATH,MAIN,TEXTORD,"Â¬",COMMON),defineSymbol("\\neg",MATH,MAIN,TEXTORD,"Â¬",SUPERCOMMON),defineSymbol("\\land",MATH,MAIN,BIN,"â§",659),defineSymbol("\\lor",MATH,MAIN,BIN,"â¨",364),defineSymbol("\\barwedge",MATH,AMS,BIN,"â¼",21),defineSymbol("\\veebar",MATH,AMS,BIN,"â»",43),defineSymbol("\\nor",MATH,AMS,BIN,"â»",7),defineSymbol("\\curlywedge",MATH,AMS,BIN,"â",58),defineSymbol("\\curlyvee",MATH,AMS,BIN,"â",57),category="Boxes",defineSymbol("\\square",MATH,AMS,TEXTORD,"â¡",COMMON),defineSymbol("\\Box",MATH,AMS,TEXTORD,"â¡",COMMON),defineSymbol("\\blacksquare",MATH,AMS,TEXTORD,"â ",1679),defineSymbol("\\boxminus",MATH,AMS,BIN,"â",79),defineSymbol("\\boxplus",MATH,AMS,BIN,"â",276),defineSymbol("\\boxtimes",MATH,AMS,BIN,"â ",457),defineSymbol("\\boxdot",MATH,AMS,BIN,"â¡",120),category="Circles",defineSymbol("\\circ",MATH,MAIN,BIN,"â",SUPERCOMMON),defineSymbol("\\bigcirc",MATH,MAIN,BIN,"â¯",903),defineSymbol("\\bullet",MATH,MAIN,BIN,"â",COMMON),defineSymbol("\\circleddash",MATH,AMS,BIN,"â",COMMON),defineSymbol("\\circledast",MATH,AMS,BIN,"â",339),defineSymbol("\\oplus",MATH,MAIN,BIN,"â",COMMON),defineSymbol("\\ominus",MATH,MAIN,BIN,"â",1568),defineSymbol("\\otimes",MATH,MAIN,BIN,"â",COMMON),defineSymbol("\\odot",MATH,MAIN,BIN,"â",COMMON),defineSymbol("\\circledcirc",MATH,AMS,BIN,"â",93),defineSymbol("\\oslash",MATH,MAIN,BIN,"â",497),defineSymbol("\\circledS",MATH,AMS,TEXTORD,"â",31),defineSymbol("\\circledR",MATH,AMS,TEXTORD,"Â®",1329),category="Triangles",defineSymbol("\\triangle",MATH,MAIN,TEXTORD,"â³",COMMON),defineSymbol("\\triangleq",MATH,AMS,REL,"â",COMMON),defineSymbol("\\bigtriangleup",MATH,MAIN,BIN,"â³",1773),defineSymbol("\\vartriangle",MATH,AMS,REL,"â³",762),defineSymbol("\\triangledown",MATH,AMS,TEXTORD,"â½",520),defineSymbol("\\bigtriangledown",MATH,MAIN,BIN,"â½",661),defineSymbol("\\triangleleft",MATH,MAIN,BIN,"â",534),defineSymbol("\\vartriangleleft",MATH,AMS,REL,"â²",281),defineSymbol("\\trianglelefteq",MATH,AMS,REL,"â´",176),defineSymbol("\\ntriangleleft",MATH,AMS,REL,"âª",13),defineSymbol("\\ntrianglelefteq",MATH,AMS,REL,"â¬",22),defineSymbol("\\triangleright",MATH,MAIN,BIN,"â¹",516),defineSymbol("\\vartriangleright",MATH,AMS,REL,"â³",209),defineSymbol("\\trianglerighteq",MATH,AMS,REL,"âµ",45),defineSymbol("\\ntriangleright",MATH,AMS,REL,"â«",15),defineSymbol("\\ntrianglerighteq",MATH,AMS,REL,"â­",6),defineSymbol("\\blacktriangle",MATH,AMS,TEXTORD,"â²",360),defineSymbol("\\blacktriangledown",MATH,AMS,TEXTORD,"â¼",159),defineSymbol("\\blacktriangleleft",MATH,AMS,REL,"â",101),defineSymbol("\\blacktriangleright",MATH,AMS,REL,"â¶",271),category="Others",defineSymbol("\\/",[MATH],MAIN,ORD,"/"),defineSymbol("\\backslash",[TEXT,MATH],MAIN,ORD,"\\"),defineSymbol("|",MATH,MAIN,TEXTORD,"â£"),category="Big Operators",defineSymbol("\\sqcup",MATH,MAIN,BIN,"â",1717),defineSymbol("\\sqcap",MATH,MAIN,BIN,"â",735),defineSymbol("\\uplus",MATH,MAIN,BIN,"â",597),defineSymbol("\\wr",MATH,MAIN,BIN,"â",286),defineSymbol("\\Cap",MATH,AMS,BIN,"â",2),defineSymbol("\\Cup",MATH,AMS,BIN,"â",2),defineSymbol("\\doublecap",MATH,AMS,BIN,"â",1),defineSymbol("\\doublecup",MATH,AMS,BIN,"â",1),defineSymbol("\\amalg",MATH,MAIN,BIN,"â¨¿",CRYPTIC),defineSymbol("\\And",MATH,MAIN,BIN,"&"),category="Accents",defineFunction(["\\acute","\\grave","\\dot","\\ddot","\\mathring","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec"],"{body:auto}",null,function(t,e){return{type:"accent",accent:{"\\acute":"Ë","\\grave":"Ë","\\dot":"Ë","\\ddot":"Â¨","\\mathring":"Ë","\\tilde":"~","\\bar":"Ë","\\breve":"Ë","\\check":"Ë","\\hat":"^","\\vec":"â"}[t],limits:"accent",skipBoundary:!0,body:e[0]}}),frequency(COMMON,"\\bar","\\ddot","\\acute","\\tilde","\\check"),frequency(1548,"\\breve"),frequency(735,"\\grave"),frequency(SUPERCOMMON,"\\vec"),category="Letters and Letter Like Forms",defineSymbol("\\imath",MATH,MAIN,MATHORD,"Ä±"),defineSymbol("\\jmath",MATH,MAIN,MATHORD,"È·"),category="Others",defineSymbol("`",TEXT,MAIN,TEXTORD,"â"),defineSymbol("'",TEXT,MAIN,TEXTORD,"â"),defineSymbol("``",TEXT,MAIN,TEXTORD,"â"),defineSymbol("''",TEXT,MAIN,TEXTORD,"â"),defineSymbol("\\degree",MATH,MAIN,TEXTORD,"Â°",46),defineSymbol("\\degree",TEXT,MAIN,TEXTORD,"Â°",46),category="Others",defineSymbol("'",MATH,MAIN,TEXTORD,"â²"),defineSymbol('"',MATH,MAIN,TEXTORD,"â"),category="",defineSymbols("0123456789/@.",MATH,MAIN,MATHORD),defineSymbols('0123456789!@*()-=+[]";:?/.,',TEXT,MAIN,TEXTORD),defineSymbols("0123456789!@*()-=+{}[]\\';:?/.,~<>`|'$%#&^_\" ",COMMAND,MAIN,"command"),defineSymbolRange(65,90,MATH,MAIN,MATHORD),defineSymbolRange(65,90,COMMAND,MAIN,"command"),defineSymbolRange(97,122,MATH,MAIN,MATHORD),defineSymbolRange(97,122,COMMAND,MAIN,"command"),defineSymbol("â",TEXT,MAIN,TEXTORD,"â"),defineSymbol("â",TEXT,MAIN,TEXTORD,"â"),defineSymbol("â",TEXT,MAIN,TEXTORD,"â"),defineSymbol("â",TEXT,MAIN,TEXTORD,"â"),defineSymbol("â",TEXT,MAIN,TEXTORD,"â"),defineSymbol("â",TEXT,MAIN,TEXTORD,"â"),defineSymbol('"',TEXT,MAIN,TEXTORD,"â"),category="Others",defineSymbol("\\%",TEXT+MATH,MAIN,TEXTORD,"%"),defineSymbol("\\&",TEXT+MATH,MAIN,TEXTORD,"&"),defineSymbol("\\$",TEXT+MATH,MAIN,TEXTORD,"$"),defineSymbol("\\ss",TEXT,MAIN,TEXTORD,"Ã"),defineSymbol("\\ae",TEXT,MAIN,TEXTORD,"Ã¦"),defineSymbol("\\oe",TEXT,MAIN,TEXTORD,"Å"),defineSymbol("\\AE",TEXT,MAIN,TEXTORD,"Ã"),defineSymbol("\\OE",TEXT,MAIN,TEXTORD,"Å"),defineSymbol("\\O",TEXT,MAIN,TEXTORD,"Ã"),defineSymbol("\\i",TEXT+MATH,MAIN,TEXTORD,"Ä±"),defineSymbol("\\j",TEXT+MATH,MAIN,TEXTORD,"È·"),defineSymbol("\\aa",TEXT+MATH,MAIN,TEXTORD,"Ã¥"),defineSymbol("\\AA",TEXT+MATH,MAIN,TEXTORD,"Ã");var Definitions={matchCodepoint:function(t){const e=t.codePointAt(0);let i=CODEPOINT_SHORTCUTS[t];if(i)return i;if(e>32&&e<127)return t;for(const e in MATH_SYMBOLS)MATH_SYMBOLS.hasOwnProperty(e)&&(MATH_SYMBOLS[e].value!==t&&MATH_SYMBOLS[e].body!==t||(i=e,"\\"===e[0]&&(i+=" ")));return i||(i=e<32||e>=127?'\\char"'+("000000"+e.toString(16)).toUpperCase().substr(-6):t),i},matchSymbol:function(t,e){const i="text"===t?TEXT_SYMBOLS:"command"===t?COMMAND_SYMBOLS:MATH_SYMBOLS;let s=null;for(const t in i)if(i.hasOwnProperty(t)){const a=t;if(e===a&&(!s||s.match.length<a.length)&&(s={latexName:t,fontFamily:i[t].fontFamily,value:i[t].value,type:i[t].type,match:a}),i[t].fullName&&e==="\\["+i[t].fullName+"]"){s={latexName:t,fontFamily:i[t].fontFamily,value:i[t].value,type:i[t].type,match:"\\["+i[t].fullName+"]"};break}}return s},matchFunction:function(t,e){let i=null;for(const s in FUNCTIONS)FUNCTIONS.hasOwnProperty(s)&&(e!==s||"text"===t&&!FUNCTIONS[s].allowedInText||(!i||i.value.length<s.length)&&(i={latexName:s,value:s.slice(1)}));return i},unicodeToMathVariant:unicodeToMathVariant,mathVariantToUnicode:function(t,e,i){if(!/[A-Za-z0-9]/.test(t))return t;const s=t.codePointAt(0);for(let t=0;t<MATH_UNICODE_BLOCKS.length;t++)if((!e||MATH_UNICODE_BLOCKS[t].variant===e)&&(!i||MATH_UNICODE_BLOCKS[t].style===i)&&s>=MATH_UNICODE_BLOCKS[t].offset&&s<MATH_UNICODE_BLOCKS[t].offset+MATH_UNICODE_BLOCKS[t].len)return String.fromCodePoint(MATH_UNICODE_BLOCKS[t].start+s-MATH_UNICODE_BLOCKS[t].offset);return t},unicodeStringToLatex:function(t){let e="";for(const i of t)e+=codepointToLatex(i.codePointAt(0));return e},getInfo:function(t,e,i){if(0===t.length)return null;let s=null;if("\\"===t.charAt(0)){if(s=FUNCTIONS[t])return"math"===e||s.allowedInText?s:null;if(s||(s=("math"===e?MATH_SYMBOLS:TEXT_SYMBOLS)[t]),!s){const e=t.slice(1);if(i&&i[e]){let t=i[e];"object"==typeof t&&(t=t.def);let a=0;for(/(^|[^\\])#1/.test(t)&&(a=1),/(^|[^\\])#2/.test(t)&&(a=2),/(^|[^\\])#3/.test(t)&&(a=3),/(^|[^\\])#4/.test(t)&&(a=4),/(^|[^\\])#5/.test(t)&&(a=5),/(^|[^\\])#6/.test(t)&&(a=6),/(^|[^\\])#7/.test(t)&&(a=7),/(^|[^\\])#8/.test(t)&&(a=8),/(^|[^\\])#9/.test(t)&&(a=9),s={type:"group",allowedInText:!1,params:[],infix:!1};a>=1;)s.params.push({optional:!1,type:"math",defaultValue:null,placeholder:null}),a-=1}}s||(s={type:"error",params:[],allowedInText:!1,infix:!1})}else{let i=MATH_SYMBOLS;"command"===e&&(i=COMMAND_SYMBOLS),"text"===e&&(i=TEXT_SYMBOLS),s=i[t]}return!s||"mord"!==s.type||"f"!==s.value&&"g"!==s.value||(s.isFunction=!0),s},getValue:function(t,e){const i="math"===t?MATH_SYMBOLS:TEXT_SYMBOLS;return i[e]&&i[e].value?i[e].value:e},getFontName:function(t,e){const i="math"===t?MATH_SYMBOLS:TEXT_SYMBOLS;return i[e]&&"ams"===i[e].fontFamily?"AMS-Regular":"Main-Regular"},getEnvironmentInfo:function(t){let e=ENVIRONMENTS[t];return e||(e={params:"",parser:null,mathstyle:"displaystyle",tabular:!0,colFormat:[],leftFence:".",rightFence:"."}),e},suggest:function(t){const e=[];for(const i in FUNCTIONS)FUNCTIONS.hasOwnProperty(i)&&i.startsWith(t)&&!FUNCTIONS[i].infix&&e.push({match:i,frequency:FUNCTIONS[i].frequency});for(const i in MATH_SYMBOLS)MATH_SYMBOLS.hasOwnProperty(i)&&i.startsWith(t)&&e.push({match:i,frequency:MATH_SYMBOLS[i].frequency});return e.sort(function(t,e){return t.frequency===e.frequency?e.match.length-t.match.length:(e.frequency||0)-(t.frequency||0)}),e},FREQUENCY_VALUE:FREQUENCY_VALUE,TEXT_SYMBOLS:TEXT_SYMBOLS,MATH_SYMBOLS:MATH_SYMBOLS,COMMAND_SYMBOLS:COMMAND_SYMBOLS,ENVIRONMENTS:ENVIRONMENTS,RIGHT_DELIM:{"(":")","{":"}","[":"]","|":"|","\\lbrace":"\\rbrace","\\{":"\\}","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"},FUNCTIONS:FUNCTIONS,MACROS:{iff:"\\;âº\\;",nicefrac:"^{#1}\\!\\!/\\!_{#2}",bra:"\\mathinner{\\langle{#1}|}",ket:"\\mathinner{|{#1}\\rangle}",braket:"\\mathinner{\\langle{#1}\\rangle}",set:"\\mathinner{\\lbrace #1 \\rbrace}",Bra:"\\left\\langle #1\\right|",Ket:"\\left|#1\\right\\rangle",Braket:"\\left\\langle{#1}\\right\\rangle",Set:"\\left\\lbrace #1 \\right\\rbrace"}};const makeSymbol$1=Span$1.makeSymbol,makeStyleWrap$1=Span$1.makeStyleWrap,makeSpan$1=Span$1.makeSpan,makeVlist$1=Span$1.makeVlist;function makeLargeDelim(t,e,i,s,a,n){const o=makeSymbol$1("Size"+i+"-Regular",Definitions.getValue("math",e)),r=makeStyleWrap$1(t,makeSpan$1(o,"delimsizing size"+i),a.mathstyle,Mathstyle$1.TEXT,n);return s&&r.setTop((1-a.mathstyle.sizeMultiplier)*a.mathstyle.metrics.axisHeight),r.setStyle("color",a.color),"number"==typeof a.opacity&&r.setStyle("opacity",a.opacity),r}function makeInner$1(t,e){let i="";return"Size1-Regular"===e?i=" delim-size1":"Size4-Regular"===e&&(i=" delim-size4"),makeSpan$1(makeSymbol$1(e,Definitions.getValue("math",t)),"delimsizinginner"+i)}function makeStackedDelim(t,e,i,s,a,n){let o,r,l,h;o=l=h=e,r=null;let c="Size1-Regular";"\\vert"===e||"\\lvert"===e||"\\rvert"===e||"\\mvert"===e||"\\mid"===e?l=o=h="â£":"\\Vert"===e||"\\lVert"===e||"\\rVert"===e||"\\mVert"===e||"\\|"===e?l=o=h="â¥":"\\uparrow"===e?l=h="â":"\\Uparrow"===e?l=h="â":"\\downarrow"===e?o=l="â":"\\Downarrow"===e?o=l="â":"\\updownarrow"===e?(o="â",l="â",h="â"):"\\Updownarrow"===e?(o="â",l="â",h="â"):"["===e||"\\lbrack"===e?(o="â¡",l="â¢",h="â£",c="Size4-Regular"):"]"===e||"\\rbrack"===e?(o="â¤",l="â¥",h="â¦",c="Size4-Regular"):"\\lfloor"===e?(l=o="â¢",h="â£",c="Size4-Regular"):"\\lceil"===e?(o="â¡",l=h="â¢",c="Size4-Regular"):"\\rfloor"===e?(l=o="â¥",h="â¦",c="Size4-Regular"):"\\rceil"===e?(o="â¤",l=h="â¥",c="Size4-Regular"):"("===e?(o="â",l="â",h="â",c="Size4-Regular"):")"===e?(o="â",l="â",h="â ",c="Size4-Regular"):"\\{"===e||"\\lbrace"===e?(o="â§",r="â¨",h="â©",l="âª",c="Size4-Regular"):"\\}"===e||"\\rbrace"===e?(o="â«",r="â¬",h="â­",l="âª",c="Size4-Regular"):"\\lgroup"===e?(o="â§",h="â©",l="âª",c="Size4-Regular"):"\\rgroup"===e?(o="â«",h="â­",l="âª",c="Size4-Regular"):"\\lmoustache"===e?(o="â§",h="â­",l="âª",c="Size4-Regular"):"\\rmoustache"===e?(o="â«",h="â©",l="âª",c="Size4-Regular"):"\\surd"===e&&(o="î",h="â·",l="î",c="Size4-Regular");const d=FontMetrics.getCharacterMetrics(Definitions.getValue("math",o),c),m=d.height+d.depth,p=FontMetrics.getCharacterMetrics(Definitions.getValue("math",l),c),u=p.height+p.depth,f=FontMetrics.getCharacterMetrics(Definitions.getValue("math",h),c),y=f.height+f.depth;let g=0,b=1;if(null!==r){const t=FontMetrics.getCharacterMetrics(Definitions.getValue("math",r),c);g=t.height+t.depth,b=2}const M=m+y+g,S=Math.ceil((i-M)/(b*u)),A=M+S*b*u;let T=a.mathstyle.metrics.axisHeight;s&&(T*=a.mathstyle.sizeMultiplier);const k=A/2-T,x=[];if(x.push(makeInner$1(h,c)),null===r)for(let t=0;t<S;t++)x.push(makeInner$1(l,c));else{for(let t=0;t<S;t++)x.push(makeInner$1(l,c));x.push(makeInner$1(r,c));for(let t=0;t<S;t++)x.push(makeInner$1(l,c))}x.push(makeInner$1(o,c));const v=makeVlist$1(a,x,"bottom",k);return v.setStyle("color",a.color),"number"==typeof a.opacity&&v.setStyle("opacity",a.opacity),makeStyleWrap$1(t,makeSpan$1(v,"delimsizing mult"),a.mathstyle,Mathstyle$1.TEXT,n)}const stackLargeDelimiters=["(",")","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\\lceil","\\rceil","\\surd"],stackAlwaysDelimiters=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\mvert","\\mid","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache"],stackNeverDelimiters=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],sizeToMaxHeight=[0,1.2,1.8,2.4,3];const stackNeverDelimiterSequence=[{type:"small",mathstyle:Mathstyle$1.SCRIPTSCRIPT},{type:"small",mathstyle:Mathstyle$1.SCRIPT},{type:"small",mathstyle:Mathstyle$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],stackAlwaysDelimiterSequence=[{type:"small",mathstyle:Mathstyle$1.SCRIPTSCRIPT},{type:"small",mathstyle:Mathstyle$1.SCRIPT},{type:"small",mathstyle:Mathstyle$1.TEXT},{type:"stack"}],stackLargeDelimiterSequence=[{type:"small",mathstyle:Mathstyle$1.SCRIPTSCRIPT},{type:"small",mathstyle:Mathstyle$1.SCRIPT},{type:"small",mathstyle:Mathstyle$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}];function makeCustomSizedDelim(t,e,i,s,a,n){if(!e||0===e.length||"."===e)return makeNullFence(t,a,t);let o;"<"===e||"\\lt"===e?e="\\langle":">"!==e&&"\\gt"!==e||(e="\\rangle"),o=stackNeverDelimiters.includes(e)?stackNeverDelimiterSequence:stackLargeDelimiters.includes(e)?stackLargeDelimiterSequence:stackAlwaysDelimiterSequence;const r=function(t,e,i,s){for(let n=Math.min(2,3-s.mathstyle.size);n<i.length&&"stack"!==i[n].type;n++){const s=FontMetrics.getCharacterMetrics(t,"small"===(a=i[n]).type?"Main-Regular":"large"===a.type?"Size"+a.size+"-Regular":"Size4-Regular");if(!s)return{type:"small",style:Mathstyle$1.SCRIPT};let o=s.height+s.depth;if("small"===i[n].type&&(o*=i[n].mathstyle.sizeMultiplier),o>e)return i[n]}var a;return i[i.length-1]}(Definitions.getValue("math",e),i,o,a);return"small"===r.type?function(t,e,i,s,a,n){const o=makeSymbol$1(Definitions.getFontName("math",e),Definitions.getValue("math",e)),r=makeStyleWrap$1(t,o,a.mathstyle,i,n);return s&&r.setTop((1-a.mathstyle.sizeMultiplier/i.sizeMultiplier)*a.mathstyle.metrics.axisHeight),r.setStyle("color",a.color),"number"==typeof a.opacity&&r.setStyle("opacity",a.opacity),r}(t,e,r.mathstyle,s,a,n):"large"===r.type?makeLargeDelim(t,e,r.size,s,a,n):makeStackedDelim(t,e,i,s,a,n)}function makeNullFence(t,e,i){return Span$1.makeSpanOfType(t,"","sizing"+e.mathstyle.adjustTo(Mathstyle$1.TEXT)+" nulldelimiter "+(i||""))}var Delimiters={makeSizedDelim:function(t,e,i,s,a){return"."===e?makeNullFence(t,s,a):("<"===e||"\\lt"===e?e="\\langle":">"!==e&&"\\gt"!==e||(e="\\rangle"),stackLargeDelimiters.includes(e)||stackNeverDelimiters.includes(e)?makeLargeDelim(t,e,i,!1,s,a):stackAlwaysDelimiters.includes(e)?makeStackedDelim(t,e,sizeToMaxHeight[i],!1,s,a):null)},makeCustomSizedDelim:makeCustomSizedDelim,makeLeftRightDelim:function(t,e,i,s,a,n){if("."===e)return makeNullFence(t,a,n);const o=a.mathstyle.metrics.axisHeight*a.mathstyle.sizeMultiplier,r=5/FontMetrics.metrics.ptPerEm;let l=s+o,h=i-o,c=901*(h=Math.max(l,h))/500;return l=2*h-r,makeCustomSizedDelim(t,e,c=Math.max(c,l),!0,a,n)}};const makeSpan$2=Span$1.makeSpan,makeOrd$1=Span$1.makeOrd,makeInner$2=Span$1.makeInner,makeHlist$1=Span$1.makeHlist,makeVlist$2=Span$1.makeVlist,FONTMETRICS=FontMetrics.metrics;class MathAtom{constructor(t,e,i,s,a){if(this.mode=t,this.type=e,this.body=i,this.fontFamily=s,a)for(const t in a)a.hasOwnProperty(t)&&(this[t]=a[t]);"textord"!==this.type&&"main"===this.fontFamily&&"string"==typeof this.body&&1===this.body.length&&AUTO_ITALIC_REGEX.test(this.body)&&(this.fontFamily="mathit"),"textord"===this.type&&"main"===this.fontFamily&&(this.fontFamily="mathrm"),"main"===this.fontFamily?this.fontFamily="mathrm":"ams"===s&&(this.fontFamily="amsrm")}getInitialBaseElement(){let t=this;if(Array.isArray(this.body)&&this.body.length>0)for(let e=0;e<this.body.length;e++)if("first"!==this.body[e].type){t=this.body[e].getInitialBaseElement();break}return t}getFinalBaseElement(){return Array.isArray(this.body)&&this.body.length>0?this.body[this.body.length-1].getFinalBaseElement():this}isCharacterBox(){const t=this.getInitialBaseElement();return/minner|mbin|mrel|mpunct|mopen|mclose|textord/.test(t.type)}forEach(t){if(t(this),Array.isArray(this.body))for(const e of this.body)e&&e.forEach(t);else this.body&&"object"==typeof this.body&&t(this.body);if(this.superscript)for(const e of this.superscript)e&&e.forEach(t);if(this.subscript)for(const e of this.subscript)e&&e.forEach(t);if(this.overscript)for(const e of this.overscript)e&&e.forEach(t);if(this.underscript)for(const e of this.underscript)e&&e.forEach(t);if(this.numer)for(const e of this.numer)e&&e.forEach(t);if(this.denom)for(const e of this.denom)e&&e.forEach(t);if(this.index)for(const e of this.index)e&&e.forEach(t);if(this.array)for(const e of this.array)for(const i of e)for(const e of i)e.forEach(t)}filter(t){let e=[];t(this)&&e.push(this);for(const i of["body","superscript","subscript","overscript","underscript","numer","denom","index"])if(Array.isArray(this[i]))for(const s of this[i])s&&(e=e.concat(s.filter(t)));if(Array.isArray(this.array))for(const i of this.array)for(const s of i)s&&(e=e.concat(s.filter(t)));return e}decomposeGroup(t){const e=t.withMathstyle(this.mathstyle);return makeOrd$1(decompose(e,this.body))}decomposeArray(t){let e=this.colFormat;e&&0===e.length&&(e=[{align:"l"}]),e||(e=[{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"}]);const i=[];let s=0;for(const t of e)t.align&&s++;for(const t of this.array){let e=0;for(;e<t.length;){const a=[],n=Math.min(t.length,e+s);for(;e<n;)a.push(t[e++]);i.push(a)}}1===i[i.length-1].length&&0===i[i.length-1][0].length&&i.pop();const a=Mathstyle$1.toMathstyle(this.mathstyle)||t.mathstyle,n=(this.arraystretch||1)*FONTMETRICS.baselineskip,o=.7*n,r=.3*n;let l=0,h=0;const c=[],d=i.length;for(let e=0;e<d;++e){const s=i[e];h=Math.max(h,s.length);let a=o,n=r;const m=[];for(let e=0;e<s.length;++e){const i=decompose(t.withMathstyle(this.mathstyle||"auto"),s[e])||[],o=[makeOrd$1(null)].concat(i);n=Math.max(n,Span$1.depth(o)),a=Math.max(a,Span$1.height(o)),m.push(o)}let p=e===d-1?0:this.jot||0;this.rowGaps&&this.rowGaps[e]&&(p=this.rowGaps[e])>0&&(n<(p+=r)&&(n=p),p=0),m.height=a,m.depth=n,l+=a,m.pos=l,l+=n+p,c.push(m)}const m=l/2+a.metrics.axisHeight,p=[];for(let e=0;e<h;e++){const i=[];for(const t of c){const s=t[e];s&&(s.depth=t.depth,s.height=t.height,i.push(s),i.push(t.pos-m))}i.length>0&&p.push(makeVlist$2(t,i,"individualShift"))}const u=[];let f=!1,y=!1,g=0,b=!this.lFence;for(const i of e){if(i.align&&g>=p.length)break;if(i.align&&g<p.length)f?u.push(makeColGap(2*FONTMETRICS.arraycolsep)):(y||b)&&u.push(makeColGap(FONTMETRICS.arraycolsep)),u.push(makeSpan$2(p[g],"col-align-"+i.align)),g++,f=!0,y=!1,b=!1;else if(void 0!==i.gap)"number"==typeof i.gap?u.push(makeColGap(i.gap)):u.push(makeColOfRepeatingElements(t,c,m,i.gap)),f=!1,y=!1,b=!1;else if(i.rule){const e=makeSpan$2(null,"vertical-separator");e.setStyle("height",l,"em"),e.setStyle("margin-top",3*t.mathstyle.metrics.axisHeight-m,"em"),e.setStyle("vertical-align","top");let i=0;y?i=FONTMETRICS.doubleRuleSep-FONTMETRICS.arrayrulewidth:f&&(i=FONTMETRICS.arraycolsep-FONTMETRICS.arrayrulewidth),e.setLeft(i,"em"),u.push(e),f=!1,y=!0,b=!1}}if(f&&!this.rFence&&u.push(makeColGap(FONTMETRICS.arraycolsep)),!(this.lFence&&"."!==this.lFence||this.rFence&&"."!==this.rFence))return makeOrd$1(u,"mtable");const M=makeSpan$2(u,"mtable"),S=Span$1.height(M),A=Span$1.depth(M);return makeOrd$1([this.bind(t,Delimiters.makeLeftRightDelim("mopen",this.lFence,S,A,t)),M,this.bind(t,Delimiters.makeLeftRightDelim("mclose",this.rFence,S,A,t))])}decomposeGenfrac(t){const e="auto"===this.mathstyle?t.mathstyle:Mathstyle$1.toMathstyle(this.mathstyle),i=t.withMathstyle(e);let s=[];this.numerPrefix&&s.push(makeOrd$1(this.numerPrefix,"mathrm"));const a=this.continuousFraction?e:e.fracNum();s=s.concat(decompose(i.withMathstyle(a),this.numer));const n=makeHlist$1(s,t.mathstyle.adjustTo(a));let o=[];this.denomPrefix&&o.push(makeOrd$1(this.denomPrefix,"mathrm"));const r=this.continuousFraction?e:e.fracDen();o=o.concat(decompose(i.withMathstyle(r),this.denom));const l=makeHlist$1(o,t.mathstyle.adjustTo(r)),h=this.hasBarLine?FONTMETRICS.defaultRuleThickness/e.sizeMultiplier:0;let c,d,m;e.size===Mathstyle$1.DISPLAY.size?(c=e.metrics.num1,d=h>0?3*h:7*FONTMETRICS.defaultRuleThickness,m=e.metrics.denom1):(h>0?(c=e.metrics.num2,d=h):(c=e.metrics.num3,d=3*FONTMETRICS.defaultRuleThickness),m=e.metrics.denom2);const p=n?n.depth:0,u=l?l.height:0;let f;if(0===h){const t=c-p-(u-m);t<d&&(c+=.5*(d-t),m+=.5*(d-t)),f=makeVlist$2(i,[n,-c,l,m],"individualShift")}else{const t=e.metrics.axisHeight;c-p-(t+.5*h)<d&&(c+=d-(c-p-(t+.5*h))),t-.5*h-(u-m)<d&&(m+=d-(t-.5*h-(u-m)));const s=makeSpan$2(""," frac-line");s.height=h;const a=[];n&&(a.push(n),a.push(-c)),a.push(s),a.push(h/2-t),l&&(a.push(l),a.push(m)),f=makeVlist$2(i,a,"individualShift")}f.classes+=" mfrac",f.height*=e.sizeMultiplier/t.mathstyle.sizeMultiplier,f.depth*=e.sizeMultiplier/t.mathstyle.sizeMultiplier;const y=e.size===Mathstyle$1.DISPLAY.size?e.metrics.delim1:e.metrics.delim2,g=Delimiters.makeCustomSizedDelim("mopen",this.leftDelim,y,!0,t.withMathstyle(e)),b=Delimiters.makeCustomSizedDelim("mclose",this.rightDelim,y,!0,t.withMathstyle(e)),M=makeOrd$1([g,f,b],t.parentSize!==t.size?"sizing reset-"+t.parentSize+" "+t.size:"genfrac");return this.bind(t,M)}decomposeLeftright(t){const e=t.clone();if(!this.body)return this.leftDelim?this.bind(e,new MathAtom("math","mopen",this.leftDelim).decompose(t)):this.rightDelim?this.bind(e,new MathAtom("math","mclose",this.rightDelim).decompose(t)):null;const i=decompose(e,this.body),s=e.mathstyle;let a=0,n=0,o=[];if(a=Span$1.height(i)*s.sizeMultiplier,n=Span$1.depth(i)*s.sizeMultiplier,this.leftDelim&&o.push(this.bind(e,Delimiters.makeLeftRightDelim("mopen",this.leftDelim,a,n,e))),i){for(let t=0;t<i.length;t++){if(i[t].delim){const s=i[t].hasCaret;i[t]=this.bind(e,Delimiters.makeLeftRightDelim("minner",i[t].delim,a,n,e)),s&&(i[t].hasCaret=!0)}if(i[t].classes&&i[t].classes.indexOf("ML__selected")>=0)for(let s=0;s<i[t].children.length;s++)if(i[t].children[s].delim){const o=i[t].hasCaret;i[t].children[s]=this.bind(e,Delimiters.makeLeftRightDelim("minner",i[t].children[s].delim,a,n,e)),o&&(i[t].hasCaret=!0)}}o=o.concat(i)}if(this.rightDelim){let t=this.rightDelim;"?"===t&&(t=(t={"(":")","\\{":"\\}","\\[":"\\]","\\lbrace":"\\rbrace","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"}[this.leftDelim])||this.leftDelim,e.opacity=.5),o.push(this.bind(e,Delimiters.makeLeftRightDelim("mclose",t,a,n,e)))}return this.inner?makeInner$2(o,s.cls()):o}decomposeSurd(t){const e=t.mathstyle,i=decompose(t.cramp(),this.body),s=FONTMETRICS.defaultRuleThickness/e.sizeMultiplier;let a=s;e.id<Mathstyle$1.TEXT.id&&(a=e.metrics.xHeight);let n=s+a/4;const o=(Span$1.height(i)+Span$1.depth(i))*e.sizeMultiplier+(n+s),r=makeSpan$2(Delimiters.makeCustomSizedDelim("","\\surd",o,!1,t),"sqrt-sign"),l=r.height+r.depth-s;l>Span$1.height(i)+Span$1.depth(i)+n&&(n=(n+l-Span$1.height(i)-Span$1.depth(i))/2),r.setTop(r.height-Span$1.height(i)-(n+s));const h=makeSpan$2("",t.mathstyle.adjustTo(Mathstyle$1.TEXT)+" sqrt-line");let c;if(h.height=s,c=0===Span$1.height(i)&&0===Span$1.depth(i)?makeSpan$2():makeVlist$2(t,[i,n,h,s]),!this.index)return this.bind(t,makeOrd$1([r,c],"sqrt"));const d=t.withMathstyle(Mathstyle$1.SCRIPTSCRIPT),m=makeSpan$2(decompose(d,this.index),e.adjustTo(Mathstyle$1.SCRIPTSCRIPT)),p=Math.max(r.height,c.height),u=Math.max(r.depth,c.depth),f=makeVlist$2(t,[m],"shift",-(.6*(p-u)));return this.bind(t,makeOrd$1([makeSpan$2(f,"root"),r,c],"sqrt"))}decomposeAccent(t){const e=t.mathstyle;let i=decompose(t.cramp(),this.body);(this.superscript||this.subscript)&&(i=this.attachSupsub(t,makeOrd$1(i),"mord"));let s=0;Array.isArray(this.body)&&1===this.body.length&&this.body[0].isCharacterBox()&&(s=Span$1.skew(i));const a=Math.min(Span$1.height(i),e.metrics.xHeight),n=Span$1.makeSymbol("Main-Regular",this.accent,"math");n.italic=0;const o="â"===this.accent?" accent-vec":"";let r=makeSpan$2(makeSpan$2(n),"accent-body"+o);return(r=makeVlist$2(t,[i,-a,r])).children[1].setLeft(2*s),makeOrd$1(r,"accent")}decomposeLine(t){const e=t.mathstyle,i=decompose(t.cramp(),this.body),s=FONTMETRICS.defaultRuleThickness/e.sizeMultiplier,a=makeSpan$2("",t.mathstyle.adjustTo(Mathstyle$1.TEXT)+" "+this.position+"-line");let n;if(a.height=s,a.maxFontSize=1,"overline"===this.position)n=makeVlist$2(t,[i,3*s,a,s]);else{const e=makeSpan$2(i);n=makeVlist$2(t,[s,a,3*s,e],"top",Span$1.height(e))}return makeOrd$1(n,this.position)}decomposeOverunder(t){const e=decompose(t,this.body),i=t.withMathstyle("scriptstyle"),s=this.overscript?makeSpan$2(decompose(i,this.overscript),t.mathstyle.adjustTo(i.mathstyle)):null,a=this.underscript?makeSpan$2(decompose(i,this.underscript),t.mathstyle.adjustTo(i.mathstyle)):null;return makeStack(t,e,0,0,s,a,this.mathtype||"mrel")}decomposeOverlap(t){const e=makeSpan$2(decompose(t,this.body),"inner");return makeOrd$1([e,makeSpan$2("","fix")],"left"===this.align?"llap":"rlap")}decomposeRule(t){const e=t.mathstyle,i=makeOrd$1("","rule");let s=this.shift&&!isNaN(this.shift)?this.shift:0;s/=e.sizeMultiplier;const a=this.width/e.sizeMultiplier,n=this.height/e.sizeMultiplier;return i.setStyle("border-right-width",a,"em"),i.setStyle("border-top-width",n,"em"),i.setStyle("margin-top",-(n-s),"em"),i.setStyle("border-color",t.color),i.width=a,i.height=n+s,i.depth=-s,i}decomposeFont(t){let e=[];return"emph"===this.font?e="mathit"===t.font?decompose(t.fontFamily("mathrm"),this.body):decompose(t.fontFamily("textit"),this.body):"textit"===this.font||"textbf"===this.font?(e=decompose(t,this.body),"textit"===this.font?e.forEach(t=>{t.classes+="mathit"}):"textbf"===this.font&&e.forEach(t=>{t.classes+="mathbf"})):e=decompose(t.fontFamily(this.font),this.body),makeOrd$1(e)}decomposeOp(t){const e=t.mathstyle;let i,s=!1;e.size===Mathstyle$1.DISPLAY.size&&"string"==typeof this.body&&"\\smallint"!==this.body&&(s=!0);let a=0,n=0;if(this.symbol){const o=s?"Size2-Regular":"Size1-Regular";(i=Span$1.makeSymbol(o,this.body,"op-symbol "+(s?"large-op":"small-op"))).type="mop",a=(i.height-i.depth)/2-e.metrics.axisHeight*e.sizeMultiplier,n=i.italic,this.bind(t,i)}else Array.isArray(this.body)?(i=Span$1.makeOp(decompose(t,this.body)),this.bind(t,i)):i=this.makeSpan(t.fontFamily("mainrm"),this.body);if(this.superscript||this.subscript){const s=this.limits||"auto";return this.alwaysHandleSupSub||"limits"===s||"auto"===s&&e.size===Mathstyle$1.DISPLAY.size?this.attachLimits(t,i,a,n):this.attachSupsub(t,i,"mop")}return this.symbol&&i.setTop(a),i}applySizing(t){const e={size1:.5,size2:.7,size3:.8,size4:.9,size5:1,size6:1.2,size7:1.44,size8:1.73,size9:2.07,size10:2.49}[this.size]*t.mathstyle.sizeMultiplier;t.size=this.size,t.sizeMultiplier=e}decomposeColor(t){let e=null;return this.color?t.color=this.color:this.body&&(e=makeOrd$1(decompose(t,this.body)),this.textcolor&&e.setStyle("color",this.textcolor),this.backgroundcolor&&e.setStyle("background-color",this.backgroundcolor),e=this.bind(WebGLRenderingContext,e)),e}decomposeBox(t){const e=makeOrd$1(decompose(t,this.body));e.setStyle("position","relative");const i=makeOrd$1(e),s=this.padding?this.padding:FONTMETRICS.fboxsep;return i.setStyle("padding",s,"em"),this.backgroundcolor&&i.setStyle("background-color",this.backgroundcolor),this.framecolor&&i.setStyle("border",FONTMETRICS.fboxrule+"em solid "+this.framecolor),this.border&&i.setStyle("border",this.border),i.height=e.height,i.depth=e.depth,i.setStyle("position","relative"),i.setStyle("height",i.height+i.depth,"em"),i.setStyle("left",-s,"em"),this.bind(t,i)}decomposeEnclose(t){const e=makeOrd$1(decompose(t,this.body)),i="auto"===this.padding?.2:this.padding;e.setStyle("padding",i,"em"),e.setStyle("display","inline-block"),e.setStyle("height",e.height+e.depth,"em"),e.setStyle("left",-i,"em"),this.backgroundcolor&&"transparent"!==this.backgroundcolor&&e.setStyle("background-color",this.backgroundcolor);let s="";if(this.notation.box&&e.setStyle("border",this.borderStyle),this.notation.actuarial&&(e.setStyle("border-top",this.borderStyle),e.setStyle("border-right",this.borderStyle)),this.notation.madruwb&&(e.setStyle("border-bottom",this.borderStyle),e.setStyle("border-right",this.borderStyle)),this.notation.roundedbox&&(e.setStyle("border-radius",(Span$1.height(e)+Span$1.depth(e))/2,"em"),e.setStyle("border",this.borderStyle)),this.notation.circle&&(e.setStyle("border-radius","50%"),e.setStyle("border",this.borderStyle)),this.notation.top&&e.setStyle("border-top",this.borderStyle),this.notation.left&&e.setStyle("border-left",this.borderStyle),this.notation.right&&e.setStyle("border-right",this.borderStyle),this.notation.bottom&&e.setStyle("border-bottom",this.borderStyle),this.notation.horizontalstrike&&(s+='<line x1="3%"  y1="50%" x2="97%" y2="50%"',s+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,s+=' stroke-linecap="round"',this.svgStrokeStyle&&(s+=` stroke-dasharray="${this.svgStrokeStyle}"`),s+="/>"),this.notation.verticalstrike&&(s+='<line x1="50%"  y1="3%" x2="50%" y2="97%"',s+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,s+=' stroke-linecap="round"',this.svgStrokeStyle&&(s+=` stroke-dasharray="${this.svgStrokeStyle}"`),s+="/>"),this.notation.updiagonalstrike&&(s+='<line x1="3%"  y1="97%" x2="97%" y2="3%"',s+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,s+=' stroke-linecap="round"',this.svgStrokeStyle&&(s+=` stroke-dasharray="${this.svgStrokeStyle}"`),s+="/>"),this.notation.downdiagonalstrike&&(s+='<line x1="3%"  y1="3%" x2="97%" y2="97%"',s+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,s+=' stroke-linecap="round"',this.svgStrokeStyle&&(s+=` stroke-dasharray="${this.svgStrokeStyle}"`),s+="/>"),s){let t;return"none"!==this.shadow&&(t="auto"===this.shadow?"filter: drop-shadow(0 0 .5px rgba(255, 255, 255, .7)) drop-shadow(1px 1px 2px #333)":"filter: drop-shadow("+this.shadow+")"),Span$1.makeSVG(e,s,t)}return e}decompose(t,e){let i=null;if("group"===this.type||"root"===this.type)i=this.decomposeGroup(t);else if("array"===this.type)i=this.decomposeArray(t);else if("genfrac"===this.type)i=this.decomposeGenfrac(t);else if("surd"===this.type)i=this.decomposeSurd(t);else if("accent"===this.type)i=this.decomposeAccent(t);else if("leftright"===this.type)i=this.decomposeLeftright(t);else if("delim"===this.type)(i=makeSpan$2("","")).delim=this.delim;else if("sizeddelim"===this.type)i=this.bind(t,Delimiters.makeSizedDelim(this.cls,this.delim,this.size,t));else if("line"===this.type)i=this.decomposeLine(t);else if("overunder"===this.type)i=this.decomposeOverunder(t);else if("overlap"===this.type)i=this.decomposeOverlap(t);else if("rule"===this.type)i=this.decomposeRule(t);else if("styling"===this.type);else if("msubsup"===this.type)i=makeOrd$1("â"),e&&(i.height=e[0].height,i.depth=e[0].depth);else if("mord"===this.type||"minner"===this.type||"mbin"===this.type||"mrel"===this.type||"mpunct"===this.type||"mopen"===this.type||"mclose"===this.type||"textord"===this.type)(i="string"==typeof this.body?this.makeSpan(t,this.body):this.makeSpan(t,decompose(t,this.body))).type=this.type;else if("mop"===this.type)i=this.decomposeOp(t);else if("font"===this.type)i=this.decomposeFont(t);else if("space"===this.type)i=this.makeSpan(t," ");else if("spacing"===this.type)if("â"===this.body)i=this.makeSpan(t,"â");else if("Â "===this.body)i="math"===this.mode?this.makeSpan(t," "):this.makeSpan(t,"Â ");else if(this.width)i=makeSpan$2("â","mspace "),this.width>0?i.setWidth(this.width):i.setStyle("margin-left",this.width,"em");else{const t={qquad:"qquad",quad:"quad",enspace:"enspace",";":"thickspace",":":"mediumspace",",":"thinspace","!":"negativethinspace"}[this.body]||"quad";i=makeSpan$2("â","mspace "+t)}else"color"===this.type?i=this.decomposeColor(t):"sizing"===this.type?this.applySizing(t):"mathstyle"===this.type?t.setMathstyle(this.mathstyle):"box"===this.type?i=this.decomposeBox(t):"enclose"===this.type?i=this.decomposeEnclose(t):"esc"===this.type||"command"===this.type||"error"===this.type?((i=this.makeSpan(t,this.body)).classes="",this.error&&(i.classes+=" ML__error"),this.suggestion&&(i.classes+=" ML__suggestion")):"placeholder"===this.type?i=this.makeSpan(t,"â¬"):"first"===this.type&&this.hasCaret&&((i=this.makeSpan(t,"â")).hasCaret=!0);if(!i)return i;if(this.hasCaret&&"styling"!==this.type&&"msubsup"!==this.type&&"command"!==this.type&&"placeholder"!==this.type&&"first"!==this.type&&(Array.isArray(i)?i[i.length-1].hasCaret=!0:i.hasCaret=!0),!this.limits&&(this.superscript||this.subscript))if(Array.isArray(i)){const e=i[i.length-1];i[i.length-1]=this.attachSupsub(t,e,e.type)}else i=[this.attachSupsub(t,i,i.type)];return Array.isArray(i)?i:[i]}attachSupsub(t,e,i){if(!this.superscript&&!this.subscript)return e;const s=t.mathstyle;let a=null,n=null;if(this.superscript){const e=decompose(t.sup(),this.superscript);a=makeSpan$2(e,s.adjustTo(s.sup()))}if(this.subscript){const e=decompose(t.sub(),this.subscript);n=makeSpan$2(e,s.adjustTo(s.sub()))}let o,r=0,l=0;this.isCharacterBox()||(r=Span$1.height(e)-s.metrics.supDrop,l=Span$1.depth(e)+s.metrics.subDrop),o=s===Mathstyle$1.DISPLAY?s.metrics.sup1:s.cramped?s.metrics.sup3:s.metrics.sup2;const h=Mathstyle$1.TEXT.sizeMultiplier*s.sizeMultiplier,c=.5/FONTMETRICS.ptPerEm/h;let d=null;if(n&&a){r=Math.max(r,o,a.depth+.25*s.metrics.xHeight),l=Math.max(l,s.metrics.sub2);const i=FONTMETRICS.defaultRuleThickness;if(r-Span$1.depth(a)-(Span$1.height(n)-l)<4*i){l=4*i-(r-a.depth)+Span$1.height(n);const t=.8*s.metrics.xHeight-(r-Span$1.depth(a));t>0&&(r+=t,l-=t)}d=makeVlist$2(t,[n,l,a,-r],"individualShift"),this.symbol&&d.children[0].setLeft(-Span$1.italic(e))}else n&&!a?(l=Math.max(l,s.metrics.sub1,Span$1.height(n)-.8*s.metrics.xHeight),(d=makeVlist$2(t,[n],"shift",l)).children[0].setRight(c),this.isCharacterBox()&&d.children[0].setLeft(-Span$1.italic(e))):!n&&a&&(r=Math.max(r,o,a.depth+.25*s.metrics.xHeight),(d=makeVlist$2(t,[a],"shift",-r)).children[0].setRight(c));const m=makeSpan$2(d,"msubsup");return this.hasCaret&&(m.hasCaret=!0),Span$1.makeSpanOfType(i,[e,m])}bind(t,e){return t.generateID&&"first"!==this.type&&"â"!==this.body&&(this.id=function(t){let e;"boolean"==typeof t.generateID&&t.generateID?e=Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36):"boolean"!=typeof t.generateID&&(t.generateID.overrideID?e=t.generateID.overrideID:(e=t.generateID.seed.toString(36),t.generateID.seed+=1));return e}(t),this.id&&(e.attributes||(e.attributes={}),e.attributes["data-atom-id"]=this.id)),e}makeSpan(t,e){const i="textord"===this.type?"mord":this.type,s=Span$1.makeSpanOfType(i,e);let a=t.font||this.fontFamily;"amsrm"===this.fontFamily?(a="amsrm","mathbf"===t.font?s.setStyle("font-weight","bold"):"mathit"===t.font&&s.setStyle("font-variant","italic")):"mop"===i&&(a=this.fontFamily||t.font);let n="Main-Regular";if(a&&(!(n=getFontName$1(e,a))&&this.fontFamily&&(n=getFontName$1(e,a=this.fontFamily)||a),!n&&t.font&&(n=getFontName$1(e,a=t.font)||a),"AMS-Regular"===n?s.classes+=" amsrm":"Main-Italic"===n?s.classes+=" mainit":"Math-Italic"===n?s.classes+=" mathit":"Main-Regular"!==n&&a&&(s.classes+=" "+a)),e&&"string"==typeof e&&e.length>0){s.height=0,s.depth=0,s.skew=0,s.italic=0;for(let t=0;t<e.length;t++){const i=FontMetrics.getCharacterMetrics(e.charAt(t),n);i&&(s.height=Math.max(s.height,i.height),s.depth=Math.max(s.depth,i.depth),s.skew=i.skew,s.italic=i.italic)}"math"!==this.mode&&(s.italic=0)}return t.parentSize!==t.size&&(s.classes+=" sizing reset-"+t.parentSize,s.classes+=" "+t.size),t.mathstyle.isTight()&&(s.isTight=!0),s.setRight(s.italic),t.color&&s.setStyle("color",t.getColor()),t.backgroundcolor&&s.setStyle("background-color",t.getBackgroundColor()),"number"==typeof t.opacity&&s.setStyle("opacity",t.opacity),this.bind(t,s),this.hasCaret&&(this.superscript||this.subscript||(s.hasCaret=!0,t.mathstyle.isTight()&&(s.isTight=!0))),s}attachLimits(t,e,i,s){const a=this.superscript?makeSpan$2(decompose(t.sup(),this.superscript),t.mathstyle.adjustTo(t.mathstyle.sup())):null,n=this.subscript?makeSpan$2(decompose(t.sub(),this.subscript),t.mathstyle.adjustTo(t.mathstyle.sub())):null;return makeStack(t,e,i,s,a,n,"mop")}}function makeColGap(t){const e=makeSpan$2("â","arraycolsep");return e.setWidth(t,"em"),e}function makeColOfRepeatingElements(t,e,i,s){const a=[];for(const n of e){const e=makeSpan$2(decompose(t,s));e.depth=n.depth,e.height=n.height,a.push(e),a.push(n.pos-i)}return makeVlist$2(t,a,"individualShift")}function makeStack(t,e,i,s,a,n,o){if(!a&&!n)return e;e=makeSpan$2(e);let r=0,l=0;a&&(r=Math.max(FONTMETRICS.bigOpSpacing1,FONTMETRICS.bigOpSpacing3-a.depth)),n&&(l=Math.max(FONTMETRICS.bigOpSpacing2,FONTMETRICS.bigOpSpacing4-n.height));let h=null;if(n&&a){const o=FONTMETRICS.bigOpSpacing5+Span$1.height(n)+Span$1.depth(n)+l+Span$1.depth(e)+i;(h=makeVlist$2(t,[FONTMETRICS.bigOpSpacing5,n,l,e,r,a,FONTMETRICS.bigOpSpacing5],"bottom",o)).children[0].setLeft(-s),h.children[2].setLeft(s)}else if(n&&!a){const a=Span$1.height(e)-i;(h=makeVlist$2(t,[FONTMETRICS.bigOpSpacing5,n,l,e],"top",a)).children[0].setLeft(-s)}else if(!n&&a){const n=Span$1.depth(e)+i;(h=makeVlist$2(t,[e,r,a,FONTMETRICS.bigOpSpacing5],"bottom",n)).children[1].setLeft(s)}return Span$1.makeSpanOfType(o,h,"op-limits")}const FONT_NAME={main:"Main-Regular",mainrm:"Main-Regular",mathrm:"Main-Regular",mathbf:"Main-Bold",amsrm:"AMS-Regular",mathbb:"AMS-Regular",mathcal:"Caligraphic-Regular",mathfrak:"Fraktur-Regular",mathscr:"Script-Regular",mathsf:"SansSerif-Regular",mathtt:"Typewriter-Regular",textrm:"Main-Regular",textit:"Main-Italic",textbf:"Main-Bold"},GREEK_REGEX=/\u0393|\u0394|\u0398|\u039b|\u039E|\u03A0|\u03A3|\u03a5|\u03a6|\u03a8|\u03a9|[\u03b1-\u03c9]|\u03d1|\u03d5|\u03d6|\u03f1|\u03f5/,AUTO_ITALIC_REGEX=/[A-Za-z]|[\u03b1-\u03c9]|\u03d1|\u03d5|\u03d6|\u03f1|\u03f5/;function getFontName$1(t,e){if("string"!=typeof t||t.length>1||"â"===t)return FONT_NAME[e]||e;let i="";if("mathit"===e)i=/[0-9]/.test(t)||"\\imath"===t||"\\jmath"===t||"\\pounds"===t?"Main-Italic":AUTO_ITALIC_REGEX.test(t)?"Math-Italic":"Main-Regular";else if("mathrm"===e)i=GREEK_REGEX.test(t)?"Math-Regular":"Main-Regular";else if("mathbf"===e)i=GREEK_REGEX.test(t)?"Math-BoldItalic":"Main-Bold";else{if("mathbb"===e||"mathscr"===e){if(!/^[A-Z ]$/.test(t))return null}else if("mathcal"===e){if(!/^[0-9A-Z ]$/.test(t))return null}else if("mathfrak"===e){if(!/^[0-9A-Za-z ]$|^[!"#$%&'()*+,\-.\/:;=?[]^ââ]$/.test(t))return null}else if(("mathtt"===e||"texttt"===e||"textsf"===e||"mathsf"===e)&&!/^[0-9A-Za-z ]$|^[!"&'()*+,\-.\/:;=?@[]^_~\u0131\u0237\u0393\u0394\u0398\u039b\u039e\u03A0\u03A3\u03A5\u03A8\u03a9ââ]$/.test(t))return null;i=FONT_NAME[e]}return i}function decompose(t,e){t instanceof Context$1.Context||(void 0===t.generateID&&(t.generateID=!1),t.size=t.size||"size5",t.mathstyle=t.mathstyle||"displaystyle",t=new Context$1.Context(t));const i=!t.generateID||!t.generateID.groupNumbers;let s=[];if(Array.isArray(e)){if(0===e.length)return s;if(1===e.length){if(s=e[0].decompose(t),i&&e[0].isSelected&&s){const t=s.isTight;let e=s.type;"placeholder"===e&&(e="mord"),(s=Span$1.makeSpanOfType(e,s,"ML__selected")).isTight=t,s=[s]}}else{let a="none",n=e[1].type,o=[],r=null,l="",h=!1,c=null;for(let d=0;d<e.length;d++){"mbin"===e[d].type&&(["first","none","mrel","mpunct","mopen","mbin","mop"].includes(a)||["none","mrel","mpunct","mclose"].includes(n))&&(e[d].type="mord"),"â"===e[d].body&&(e[d].superscript||e[d].subscript)||(c=null),t.generateID.groupNumbers&&"mord"===e[d].type&&"0123456789,.".indexOf(e[d].latex)>=0&&r&&(t.generateID.overrideID=r);const m=e[d].decompose(t,c);if(t.generateID&&(t.generateID.overrideID=null),m){const a=[].concat.apply([],m);if(c=a,t.generateID&&t.generateID.groupNumbers&&("mord"===e[d].type&&"0123456789,.".indexOf(e[d].latex)>=0&&(r||(r=e[d].id)),("mord"!==e[d].type||"0123456789,.".indexOf(e[d].latex)<0||e[d].superscript||e[d].subscript)&&r&&(r=null)),i&&e[d].isSelected&&!t.isSelected){if(o=o.concat(a),!l){if("group"===(l=e[d].type)){const t=e[d].getInitialBaseElement();t&&(l=t.type)}"array"===l&&(l="mopen"),"leftright"===l&&(l="minner"),/^(first|accent|surd|genfrac|textord|font|placeholder|box|color)$/.test(l)&&(l="mord"),h=e[d].isTight}}else{if(o.length>0){const t=Span$1.makeSpanOfType(l,o,"ML__selected");t.isTight=h,s.push(t),o=[],l=""}s=s.concat(a)}}a=e[d].getFinalBaseElement().type,n=d<e.length-1?e[d+1].getInitialBaseElement().type:"none"}if(o.length>0){const t=Span$1.makeSpanOfType(l,o,"ML__selected");t.isTight=h,s.push(t),o=[],l=""}}}else if(e&&(s=e.decompose(t),e.isSelected&&!t.isSelected)){let t=s.type;"placeholder"===t&&(t="mord");const e=Span$1.makeSpanOfType(t,s,"ML__selected");e.isTight=s.isTight,s=[e]}if(!s||0===s.length)return null;const a={size1:.5,size2:.7,size3:.8,size4:.9,size5:1,size6:1.2,size7:1.44,size8:1.73,size9:2.07,size10:2.49};if(t.mathstyle!==t.parentMathstyle){const e=t.mathstyle.sizeMultiplier/t.parentMathstyle.sizeMultiplier;for(const t of s)t.height*=e,t.depth*=e}if(t.size!==t.parentSize){const e=a[t.size]/a[t.parentSize];for(const t of s)t.height*=e,t.depth*=e}return s}var MathAtom$1={MathAtom:MathAtom,decompose:decompose,makeRoot:function(t,e){const i=new MathAtom(t=t||"math","root",null);return i.body=e||[],0!==i.body.length&&"first"===i.body[0].type||i.body.unshift(new MathAtom(t,"first",null)),i}};const MATHEMATICA_COLORS={m0:"#3f3d99",m1:"#993d71",m2:"#998b3d",m3:"#3d9956",m4:"#3d5a99",m5:"#993d90",m6:"#996d3d",m7:"#43993d",m8:"#3d7999",m9:"#843d99"},NAMED_COLORS={apricot:"#FBB982",aquamarine:"#00B5BE",bittersweet:"#C04F17",black:"#221E1F",blue:"#2D2F92",bluegreen:"#00B3B8",blueviolet:"#473992",brickred:"#B6321C",brown:"#792500",burntorange:"#F7921D",cadetblue:"#74729A",carnationpink:"#F282B4",cerulean:"#00A2E3",cornflowerblue:"#41B0E4",cyan:"#00AEEF",dandelion:"#FDBC42",darkorchid:"#A4538A",emerald:"#00A99D",forestgreen:"#009B55",fuchsia:"#8C368C",goldenrod:"#FFDF42",gray:"#949698",green:"#00A64F",greenyellow:"#DFE674",junglegreen:"#00A99A",lavender:"#F49EC4",limegreen:"#8DC73E",magenta:"#EC008C",mahogany:"#A9341F",maroon:"#AF3235",melon:"#F89E7B",midnightblue:"#006795",mulberry:"#A93C93",navyblue:"#006EB8",olivegreen:"#3C8031",orange:"#F58137",orangered:"#ED135A",orchid:"#AF72B0",peach:"#F7965A",periwinkle:"#7977B8",pinegreen:"#008B72",plum:"#92268F",processblue:"#00B0F0",purple:"#99479B",rawsienna:"#974006",red:"#ED1B23",redorange:"#F26035",redviolet:"#A1246B",rhodamine:"#EF559F",royalblue:"#0071BC",royalpurple:"#613F99",rubinered:"#ED017D",salmon:"#F69289",seagreen:"#3FBC9D",sepia:"#671800",skyblue:"#46C5DD",springgreen:"#C6DC67",tan:"#DA9D76",tealblue:"#00AEB3",thistle:"#D883B7",turquoise:"#00B4CE",violet:"#58429B",violetred:"#EF58A0",white:"#FFFFFF",wildstrawberry:"#EE2967",yellow:"#FFF200",yellowgreen:"#98CC70",yelloworange:"#FAA21A"};var Color={stringToColor:function(t){const e=t.toLowerCase().split("!");let i,s,a,n=255,o=255,r=255,l=-1;const h=e.length>0&&"-"===e[0].charAt(0);h&&(e[0]=e[0].slice(1));for(let t=0;t<e.length;t++){i=n,s=o,a=r;let h=e[t].match(/([a-z0-9]*)/);h&&(h=h[1]);let c=NAMED_COLORS[h]||MATHEMATICA_COLORS[h];c||(c=e[t]);let d=c.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i);if(d&&d[1]&&d[2]&&d[3])n=Math.max(0,Math.min(255,parseInt(d[1],16))),o=Math.max(0,Math.min(255,parseInt(d[2],16))),r=Math.max(0,Math.min(255,parseInt(d[3],16)));else if((d=c.match(/^#([0-9a-f]{3})$/i))&&d[1]){const t=parseInt(d[1][0],16),e=parseInt(d[1][1],16),i=parseInt(d[1][2],16);n=Math.max(0,Math.min(255,16*t+t)),o=Math.max(0,Math.min(255,16*e+e)),r=Math.max(0,Math.min(255,16*i+i))}else{if(!((d=c.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i))&&d[1]&&d[2]&&d[3]))return null;n=Math.max(0,Math.min(255,parseInt(d[1]))),o=Math.max(0,Math.min(255,parseInt(d[2]))),r=Math.max(0,Math.min(255,parseInt(d[3])))}l>=0&&(n=(1-l)*n+l*i,o=(1-l)*o+l*s,r=(1-l)*r+l*a,l=-1),t+1<e.length&&(l=Math.max(0,Math.min(100,parseInt(e[++t])))/100)}return l>=0&&(n=l*n+(1-l)*i,o=l*o+(1-l)*s,r=l*r+(1-l)*a),h&&(n=255-n,o=255-o,r=255-r),"#"+("00"+Math.round(n).toString(16)).slice(-2)+("00"+Math.round(o).toString(16)).slice(-2)+("00"+Math.round(r).toString(16)).slice(-2)},AREA_COLORS:["#d35d60","#7293cb","#e1974d","#84bb5d","#9066a7","#aD6a58","#f5a4ce","#fff590","#212121","#818787","#d4d5d2","#ffffff"],LINE_COLORS:["#cc2428","#3769b1","#da7e30","#409852","#6b4c9a","#922426","#e7298a","#ffe907","#000000","#525055","#adafaa","#ffffff"]};const MathAtom$2=MathAtom$1.MathAtom;class Parser{constructor(t,e,i){this.tokens=t,this.index=0,this.args=e,this.macros=i,this.mathList=[],this.parseMode="math",this.tabularMode=!1,this.endCount=0}swapMathList(t){const e=this.mathList;return this.mathList=t||[],e}swapParseMode(t){const e=this.parseMode;return this.parseMode=t,e}end(){return this.endCount++,this.index>=this.tokens.length||this.endCount>1e3}get(){return this.endCount=0,this.index<this.tokens.length?this.tokens[this.index++]:null}peek(t){const e=this.index+(t||0);return e<this.tokens.length?this.tokens[e]:null}lastMathAtom(){if(0===this.mathList.length||"mop"!==this.mathList[this.mathList.length-1].type){const t=new MathAtom$2(this.parseMode,"msubsup","â","main");t.attributes={"aria-hidden":!0},this.mathList.push(t)}return this.mathList[this.mathList.length-1]}hasToken(t){const e=this.index;return e<this.tokens.length&&this.tokens[e].type===t}hasLiteral(t){const e=this.index;return e<this.tokens.length&&("literal"===this.tokens[e].type&&(!t||this.tokens[e].value===t))}hasLiteralPattern(t){return this.hasToken("literal")&&t.test(this.tokens[this.index].value)}hasCommand(t){const e=this.index;return e<this.tokens.length&&("command"===this.tokens[e].type&&this.tokens[e].value===t)}hasInfixCommand(){const t=this.index;if(t<this.tokens.length&&"command"===this.tokens[t].type){const e=Definitions.getInfo("\\"+this.tokens[t].value,this.parseMode,this.macros);return e&&e.infix}return!1}hasColumnSeparator(){const t=this.index;return!!(this.tabularMode&&t<this.tokens.length)&&("literal"===this.tokens[t].type&&"&"===this.tokens[t].value)}hasRowSeparator(){const t=this.index;return!!(this.tabularMode&&t<this.tokens.length)&&("command"===this.tokens[t].type&&("\\"===this.tokens[t].value||"cr"===this.tokens[t].value))}parseColumnSeparator(){return!!this.hasColumnSeparator()&&(this.index++,!0)}placeholder(){return this.args&&"string"==typeof this.args["?"]?parseTokens(Lexer$1.tokenize(this.args["?"]),this.parseMode,null,this.macros):[new MathAtom$2(this.parseMode,"placeholder","?")]}hasImplicitCommand(t){if(this.index<this.tokens.length){const e=this.tokens[this.index];if("command"===e.type)return t.includes(e.value)}return!1}parseRowSeparator(){return!!this.hasRowSeparator()&&(this.index++,!0)}parseToken(t){return!!this.hasToken(t)&&(this.index++,!0)}skipUntilToken(t){for(;!this.end()&&!this.parseToken(t);)this.get()}parseCommand(t){return!!this.hasCommand(t)&&(this.index++,!0)}parseLiteral(t){return!!this.hasLiteral(t)&&(this.index++,!0)}parseFiller(){let t=!1,e=!1;do{const i=this.parseToken("space"),s=this.parseCommand("relax");t=t||i||s,e=!i&&!s}while(!e);return t}parseKeyword(t){const e=this.index;let i=this.end(),s="";for(;!i;){const e=this.get();"literal"===e.type&&(s+=e.value),i=this.end()||"literal"!==e.type||s.length>=t.length}const a=t.toUpperCase()===s.toUpperCase();return a||(this.index=e),a}scanString(){let t="",e=this.end();for(;!e;)if(this.hasLiteral("]"))e=!0;else if(this.hasToken("literal"))t+=this.get().value,e=this.end();else if(this.parseToken("space"))t+=" ",e=this.end();else if(this.hasToken("command")){const i=this.get(),s=Definitions.getInfo("\\"+i.value,this.parseMode,this.macros);s&&("mord"===s.type||"textord"===s.type)&&s.value&&(t+=s.value),e=this.end()}else e=!0;return t}scanColor(){return Color.stringToColor(this.scanString())}scanNumber(t){const e=this.parseLiteral("-");e||this.parseLiteral("+"),this.parseToken("space"),t=!!t;let i=10,s=/[0-9]/;this.parseLiteral("'")?(i=8,s=/[0-7]/,t=!0):(this.parseLiteral('"')||this.parseLiteral("x"))&&(i=16,s=/[0-9A-F]/,t=!0);let a="";for(;this.hasLiteralPattern(s);)a+=this.get().value;if(!t&&(this.parseLiteral(".")||this.parseLiteral(",")))for(a+=".";this.hasLiteralPattern(s);)a+=this.get().value;const n=t?parseInt(a,i):parseFloat(a);return e?-n:n}scanDimen(){const t=this.scanNumber(!1);let e;return this.parseToken("space"),e=this.parseKeyword("pt")?FontMetrics.toEm(t,"pt"):this.parseKeyword("mm")?FontMetrics.toEm(t,"mm"):this.parseKeyword("cm")?FontMetrics.toEm(t,"cm"):this.parseKeyword("ex")?FontMetrics.toEm(t,"ex"):this.parseKeyword("px")?FontMetrics.toEm(t,"px"):this.parseKeyword("em")?FontMetrics.toEm(t,"em"):this.parseKeyword("bp")?FontMetrics.toEm(t,"bp"):this.parseKeyword("dd")?FontMetrics.toEm(t,"dd"):this.parseKeyword("pc")?FontMetrics.toEm(t,"pc"):this.parseKeyword("in")?FontMetrics.toEm(t,"in"):this.parseKeyword("mu")?FontMetrics.toEm(t,"mu"):FontMetrics.toEm(t,"pt")}scanSkip(){const t=this.scanDimen();return this.parseToken("space"),this.parseKeyword("plus")&&this.scanDimen(),this.parseToken("space"),this.parseKeyword("minus")&&this.scanDimen(),t}scanColspec(){this.parseToken("space");const t=[];for(;!this.end()&&!this.hasToken("}")&&!this.hasLiteral("]");)if(this.hasLiteral()){const e=this.get().value;if("lcr".includes(e))t.push({align:e});else if("|"===e)t.push({rule:!0});else if("@"===e){if(this.parseToken("{")){const e=this.swapParseMode("math");t.push({gap:this.scanImplicitGroup(t=>"}"===t.type)}),this.swapParseMode(e)}this.parseToken("}")}}return t}scanModeSet(){let t;if(this.parseCommand("(")&&(t=")"),!t&&this.parseCommand("[")&&(t="]"),!t)return null;const e=this.swapParseMode("math"),i=new MathAtom$2("math","group");return i.mathstyle=")"===t?"textstyle":"displaystyle",i.body=this.scanImplicitGroup(e=>"command"===e.type&&e.value===t),this.parseCommand(t),this.swapParseMode(e),i.body&&0!==i.body.length?i:null}scanModeShift(){if(!this.hasToken("$")&&!this.hasToken("$$"))return null;const t=this.get().type,e=new MathAtom$2("math","group");e.mathstyle="$"===t?"textstyle":"displaystyle",e.latexOpen="textstyle"===e.mathstyle?"$":"$$",e.latexClose=e.latexOpen;const i=this.swapParseMode("math");return e.body=this.scanImplicitGroup(e=>e.type===t),this.parseToken(t),this.swapParseMode(i),e.body&&0!==e.body.length?e:null}scanEnvironment(){if(!this.parseCommand("begin"))return null;const t=this.scanArg("string"),e=Definitions.getEnvironmentInfo(t),i=[];if(e&&e.params)for(const t of e.params)if(t.optional){const e=this.scanOptionalArg(t.type);i.push(e)}else i.push(this.scanArg(t.type));const s=this.parseMode,a=this.tabularMode,n=this.swapMathList([]);this.tabularMode=e.tabular;const o=[],r=[];let l=[],h=!1;do{if(!(h=this.end())&&this.parseCommand("end")&&(h=this.scanArg("string")===t),!h)if(this.parseColumnSeparator())l.push(this.swapMathList([]));else if(this.parseRowSeparator()){l.push(this.swapMathList([]));let t=0;this.parseToken("space"),this.parseLiteral("[")&&(t=this.scanDimen(),this.parseToken("space"),this.parseLiteral("]")),r.push(t||0),o.push(l),l=[]}else this.mathList=this.mathList.concat(this.scanImplicitGroup())}while(!h);l.push(this.swapMathList([])),l.length>0&&o.push(l);const c=this.swapMathList(n);if(this.parseMode=s,this.tabularMode=a,!e.tabular&&0===c.length)return null;if(e.tabular&&0===o.length)return null;const d=new MathAtom$2(this.parseMode,"array",null,null,e.parser?e.parser(t,i,o):{});return d.array=o,d.body=c,d.rowGaps=r,d.env=e,d.env.name=t,d}scanImplicitGroup(t){t||(t=(t=>"}"===t.type||"literal"===t.type&&"&"===t.value||"command"===t.type&&("end"===t.value||"cr"===t.value||"\\"===t.value)));let e=null,i=null;const s=this.swapMathList([]);for(;!this.end()&&!t(this.peek());)if(this.hasImplicitCommand(SIZING_COMMANDS)){const t=new MathAtom$2(this.parseMode,"sizing");t.size={tiny:"size1",scriptsize:"size2",footnotesize:"size3",small:"size4",normalsize:"size5",large:"size6",Large:"size7",LARGE:"size8",huge:"size9",Huge:"size10"}[this.get().value],this.mathList.push(t)}else if(this.hasImplicitCommand(MATHSTYLE_COMMANDS)){this.parseMode="math";const t=new MathAtom$2("math","mathstyle");t.mathstyle=this.get().value,this.mathList.push(t)}else this.hasInfixCommand()&&!e?(e=this.get(),i=this.swapMathList([])):this.parseAtom();let a;if(e){const t=this.swapMathList(s),n=Definitions.getInfo("\\"+e.value,"math",this.macros);a=n?[new MathAtom$2(this.parseMode,n.type||"mop",n.value||e.value,n.fontFamily,n.handler?n.handler("\\"+e.value,[i,t]):null)]:[new MathAtom$2(this.parseMode,"mop",e.value,"",null)]}else a=this.swapMathList(s);return a}scanGroup(){if(!this.parseToken("{"))return null;const t=new MathAtom$2(this.parseMode,"group");return t.body=this.scanImplicitGroup(t=>"}"===t.type),this.parseToken("}"),t}scanSmartFence(){if(this.parseToken("space"),!this.parseLiteral("("))return null;const t=new MathAtom$2(this.parseMode,"leftright");t.leftDelim="(",t.inner=!1;const e=this.swapMathList([]);let i=1;for(;!this.end()&&0!==i;)this.hasLiteral("(")&&(i+=1),this.hasLiteral(")")&&(i-=1),0!==i&&this.parseAtom();return 0===i&&this.parseLiteral(")"),t.rightDelim=0===i?")":"?",t.body=this.swapMathList(e),t}scanDelim(){this.parseToken("space");const t=this.get();if(!t)return null;let e=".";"command"===t.type?e="\\"+t.value:"literal"===t.type&&(e=t.value);const i=Definitions.getInfo(e,"math",this.macros);return i?"mopen"===i.type||"mclose"===i.type?e:["?","|","<",">","\\vert","\\Vert","\\|","\\surd","\\uparrow","\\downarrow","\\Uparrow","\\Downarrow","\\updownarrow","\\Updownarrow","\\mid","\\mvert","\\mVert"].includes(e)?e:null:null}scanLeftRight(){if(this.parseCommand("right")||this.parseCommand("mright")){const t=new MathAtom$2(this.parseMode,"leftright");return t.rightDelim=this.scanDelim()||".",t}let t="right";if(!this.parseCommand("left")){if(!this.parseCommand("mleft"))return null;t="mright"}const e=this.scanDelim()||".",i=this.swapMathList([]);for(;!this.end()&&!this.parseCommand(t);)this.parseAtom();const s=this.scanDelim(),a=new MathAtom$2(this.parseMode,"leftright");return a.leftDelim=e,a.rightDelim=s,a.inner="right"===t,a.body=this.swapMathList(i),a}parseSupSub(){if("math"!==this.parseMode)return!1;let t=!1;for(;this.hasToken("^")||this.hasToken("_")||this.hasLiteral("'");){let e;if(this.hasToken("^")?e="superscript":this.hasToken("_")&&(e="subscript"),this.parseToken("^")||this.parseToken("_")){const i=this.scanArg();if(i){const s=this.lastMathAtom();s[e]=s[e]||[],s[e]=s[e].concat(i),t=!0}}else if(this.parseLiteral("'")){const e=this.lastMathAtom();e.superscript=e.superscript||[],e.superscript.push(new MathAtom$2(e.parseMode,"mord","â²","main")),t=!0}}return t}parseLimits(){if(this.parseCommand("limits")){const t=this.lastMathAtom();return t.limits="limits",t.explicitLimits=!0,!0}if(this.parseCommand("nolimits")){const t=this.lastMathAtom();return t.limits="nolimits",t.explicitLimits=!0,!0}return!1}scanOptionalArg(t){if(t=t&&"auto"!==t?t:this.parseMode,this.parseToken("space"),!this.parseLiteral("["))return null;const e=this.parseMode;this.parseMode=t;const i=this.swapMathList();let s;for(;!this.end()&&!this.parseLiteral("]");)if("string"===t)s=this.scanString();else if("number"===t)s=this.scanNumber();else if("dimen"===t)s=this.scanDimen();else if("skip"===t)s=this.scanSkip();else if("colspec"===t)s=this.scanColspec();else if("color"===t)s=this.scanColor()||"#ffffff";else if("bbox"===t){const t=this.scanString().toLowerCase().trim().split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(const e of t){const t=Color.stringToColor(e);if(t)(s=s||{}).backgroundcolor=t;else{const t=e.match(/^\s*([0-9.]+)\s*([a-z][a-z])/);if(t)(s=s||{}).padding=FontMetrics.toEm(t[1],t[2]);else{const t=e.match(/^\s*border\s*:\s*(.*)/);t&&((s=s||{}).border=t[1])}}}}else this.mathList=this.mathList.concat(this.scanImplicitGroup(t=>"literal"===t.type&&"]"===t.value));this.parseMode=e;const a=this.swapMathList(i);return s||a}scanArg(t){let e;if(t=t&&"auto"!==t?t:this.parseMode,this.parseFiller(),!this.parseToken("{")){if("delim"===t)return this.scanDelim()||".";if("math"===t){const t=this.parseMode;this.parseMode="math";const e=this.scanToken();return this.parseMode=t,Array.isArray(e)?e:e?[e]:null}}if(this.hasToken("#")){const t=this.get();return this.skipUntilToken("}"),"?"===t.value?this.placeholder():this.args?void 0===this.args[t.value]&&void 0!==this.args["?"]?this.placeholder():this.args[t.value]||null:null}const i=this.parseMode;this.parseMode=t;const s=this.swapMathList([]);if("string"===t)e=this.scanString(),this.skipUntilToken("}");else if("number"===t)e=this.scanNumber(),this.skipUntilToken("}");else if("dimen"===t)e=this.scanDimen(),this.skipUntilToken("}");else if("skip"===t)e=this.scanSkip(),this.skipUntilToken("}");else if("colspec"===t)e=this.scanColspec(),this.skipUntilToken("}");else if("color"===t)e=this.scanColor()||"#ffffff",this.skipUntilToken("}");else if("delim"===t)e=this.scanDelim()||".",this.skipUntilToken("}");else do{this.mathList=this.mathList.concat(this.scanImplicitGroup())}while(!this.parseToken("}")&&!this.end());this.parseMode=i;const a=this.swapMathList(s);return e||a}scanToken(){const t=this.get();if(!t)return null;let e=null;if("space"===t.type)"text"===this.parseMode&&(e=new MathAtom$2("text","textord"," "));else if("esc"===t.type)e=new MathAtom$2(this.parseMode,"esc","ESC");else if("backslash"===t.type)e=new MathAtom$2(this.parseMode,"command","\\");else if("commandliteral"===t.type||"backslash"===t.type){let i=t.value;for(;this.hasToken("commandliteral")||this.hasToken("backslash");)i+=this.get().value;e=new MathAtom$2(this.parseMode,"command",i)}else if("placeholder"===t.type)e=new MathAtom$2(this.parseMode,"placeholder",t.value);else if("command"===t.type){if("placeholder"===t.value)e=new MathAtom$2(this.parseMode,"placeholder",this.scanArg("string"));else if("char"===t.value){let t=Math.floor(this.scanNumber(!0));(!isFinite(t)||t<0||t>1114111)&&(t=10067),(e=new MathAtom$2(this.parseMode,"math"===this.parseMode?"mord":"textord",String.fromCodePoint(t),"main")).latex='{\\char"'+("000000"+t.toString(16)).toUpperCase().substr(-6)+"}"}else if("hskip"===t.value||"kern"===t.value){const t=this.scanSkip();isNaN(t)||((e=new MathAtom$2(this.parseMode,"spacing")).width=t)}else if(!(e=this.scanMacro(t.value))){const i=Definitions.getInfo("\\"+t.value,this.parseMode,this.macros),s=[];if(i&&i.params)for(const t of i.params)if(t.optional){const e=this.scanOptionalArg(t.type);s.push(e)}else{const e=this.scanArg(t.type);e&&1===e.length&&"placeholder"===e[0].type&&t.placeholder&&(e[0].value=t.placeholder),e?s.push(e):t.placeholder?s.push([new MathAtom$2(this.parseMode,"placeholder",t.placeholder)]):s.push(this.placeholder())}if(i&&!i.infix&&((e=i.handler?new MathAtom$2(this.parseMode,i.type,null,i.fontFamily,i.handler("\\"+t.value,s)):new MathAtom$2(this.parseMode,i.type||"mop",i.value||t.value,i.fontFamily)).latex="\\"+t.value+" ",e.isFunction&&this.smartFence)){const t=this.scanSmartFence();t&&(e=[e,t])}}}else if("literal"===t.type){const i=Definitions.getInfo(t.value,this.parseMode,this.macros);if(i?(e=new MathAtom$2(this.parseMode,i.type,i.value||t.value,i.fontFamily),i.isFunction&&(e.isFunction=!0)):e=new MathAtom$2(this.parseMode,"math"===this.parseMode?"mord":"textord",t.value,"main"),e.latex=Definitions.matchCodepoint(t.value),i&&i.isFunction&&this.smartFence){const t=this.scanSmartFence();t&&(e=[e,t])}}else if("#"===t.type)if("?"===t.value)e=this.placeholder();else if(this.args)if(e=this.args[t.value]||null,Array.isArray(e)&&1===e.length)e=e[0];else if(Array.isArray(e)){const t=new MathAtom$2(this.parseMode,"group");t.body=e,e=t}else e=this.placeholder();return e}scanMacro(t){if(!this.macros||!this.macros[t])return null;const e={};let i,s=0;"string"==typeof this.macros[t]?(i=this.macros[t],/(^|[^\\])#1/.test(i)&&(s=1),/(^|[^\\])#2/.test(i)&&(s=2),/(^|[^\\])#3/.test(i)&&(s=3),/(^|[^\\])#4/.test(i)&&(s=4),/(^|[^\\])#5/.test(i)&&(s=5),/(^|[^\\])#6/.test(i)&&(s=6),/(^|[^\\])#7/.test(i)&&(s=7),/(^|[^\\])#8/.test(i)&&(s=8),/(^|[^\\])#9/.test(i)&&(s=9)):(i=this.macros[t].def,s=this.macros[t].args||0);for(let t=1;t<=s;t++)e[t]=this.scanArg();this.args&&"string"==typeof this.args["?"]&&(e["?"]=this.args["?"]);const a=new MathAtom$2(this.parseMode,"group",parseTokens(Lexer$1.tokenize(i),this.parseMode,e,this.macros));a.captureSelection=!0,a.latex="\\"+t;let n="";for(let t=1;t<=s;t++){if(n+="{",Array.isArray(e[t]))for(let i=0;i<e[t].length;i++)n+=e[t][i].latex;n+="}"}return a.latex+=n||" ",a}parseAtom(){let t=this.scanEnvironment()||this.scanModeShift()||this.scanModeSet()||this.scanGroup()||this.scanLeftRight();return!(t||!this.parseSupSub()&&!this.parseLimits())||(t||(t=this.scanToken()),Array.isArray(t)?this.mathList=this.mathList.concat(t):t&&this.mathList.push(t),null!==t)}}const SIZING_COMMANDS=["tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"],MATHSTYLE_COMMANDS=["displaystyle","textstyle","scriptstyle","scriptscriptstyle"];function parseTokens(t,e,i,s,a){let n=[];const o=new Parser(t,i,s);for(o.parseMode=e||"math",a&&(o.smartFence=!0);!o.end();)n=n.concat(o.scanImplicitGroup());return n}var ParserModule={Parser:Parser,parseTokens:parseTokens};function pathToString(t,e){let i="";for(const e of t)i+=e.relation+":"+e.offset+"/";return e&&(i+="#"+e),i}function pathFromString(t){const e={path:[],extent:0},i=t.split("#");i.length>1&&(e.extent=parseInt(i[1]));const s=i[0].split("/");for(const t of s){const i=t.match(/([^:]*):(.*)/);i&&e.path.push({relation:i[1],offset:parseInt(i[2])})}return e}var MathPath={pathFromString:pathFromString,pathToString:pathToString,pathDistance:function(t,e){let i=0,s=-1,a=!1;for(;!a;)a=(a=(s+=1)>=t.length||s>=e.length)||!(t[s].relation===e[s].relation&&t[s].offset===e[s].offset);return i=s===t.length&&s===e.length?0:s+1===t.length&&s+1===e.length&&t[s].relation===e[s].relation?1:2},pathCommonAncestor:function(t,e){const i=[],s=Math.min(t.length-1,e.length-1);let a=0;for(;a<=s&&t[a].relation===e[a].relation&&t[a].offset===e[a].offset;)i.push(t[a]),a+=1;return i},clone:function(t){return pathFromString(pathToString(t)).path}};function EditableMathlist(t,e){this.root=MathAtom$1.makeRoot(),this.path=[{relation:"body",offset:0}],this.extent=0,this.config=Object.assign({},t),this.target=e,this.suppressContentChangeNotifications=!1,this.suppressSelectionChangeNotifications=!1}function clone$1(t){const e=Object.assign(new EditableMathlist(t.config,t.target),t);return e.path=MathPath.clone(t.path),e}function arrayColRow(t,e){const i={row:0,col:0};for(;e>0;)i.col+=1,(!t.array[i.row]||i.col>=t.array[i.row].length)&&(i.col=0,i.row+=1),e-=1;return i}function arrayCell(t,e){let i;return Array.isArray(t.array)&&("number"==typeof e&&(e=arrayColRow(t,e)),Array.isArray(t.array[e.row])&&(i=t.array[e.row][e.col]||null)),i}function arrayCellCount(t){let e=0;if(Array.isArray(t.array)){let i=0,s=1;for(const e of t.array)i+=1,e.length>s&&(s=e.length);e=i*s}return e}function atomContains(t,e){if(!t)return!1;if(Array.isArray(t)){for(const i of t)if(atomContains(i,e))return!0}else{if(t===e)return!0;if(["body","numer","denom","index","subscript","superscript","underscript","overscript"].some(function(i){return i===e||atomContains(t[i],e)}))return!0;if(t.array)for(let i=arrayCellCount(t);i>=0;i--)if(atomContains(arrayCell(t,i),e))return!0}return!1}function getString(t){if(!t)return"";if(Array.isArray(t)){let e="";for(const i of t)e+=getString(i);return e}if("array"===t.type||"surd"===t.type||"rule"===t.type||"overunder"===t.type||"box"===t.type||"enclose"===t.type||"placeholder"===t.type||"command"===t.type)return"ï¿½";if("genfrac"===t.type)return"("+getString(t.numer)+")/("+getString(t.denom)+")";if("leftright"===t.type)return(t.leftDelim||"")+getString(t.body)+("?"===t.rightDelim?"":t.rightDelim||"");if("delim"===t.type||"sizeddelim"===t.type)return t.delim;if("spacing"===t.type||"space"===t.type)return" ";if("mathstyle"===t.type||"sizing"===t.type||"first"===t.type)return"";if("string"==typeof t.body)return t.body;if(Array.isArray(t.body)){let e="";for(const i of t.body)e+=getString(i);return e}return""}function removeParen(t){if(t)return t&&1===t.length&&"leftright"===t[0].type&&"("===t[0].leftDelim&&(t=t[0].body),t}EditableMathlist.prototype._announce=function(t,e,i){"function"==typeof this.config.onAnnounce&&this.config.onAnnounce(this.target,t,e,i)},EditableMathlist.prototype.filter=function(t,e){const i=this.suppressSelectionChangeNotifications;this.suppressSelectionChangeNotifications=!0,e=e<0?-1:1;const s=[],a=this.extent;e>=0?this.collapseForward():this.collapseBackward();const n=MathPath.pathToString(this.path);do{t.bind(this)(this.path,this.anchor())&&s.push(this.toString()),e>=0?this.next({iterateAll:!0}):this.previous({iterateAll:!0})}while(n!==MathPath.pathToString(this.path));return this.extent=a,this.suppressSelectionChangeNotifications=i,s},EditableMathlist.prototype.toString=function(){return MathPath.pathToString(this.path,this.extent)},EditableMathlist.prototype.adjustPlaceholder=function(){const t=this.siblings();if(t&&t.length<=1){let e;const i=this.relation();if("numer"===i?e="numerator":"denom"===i?e="denominator":"surd"===this.parent().type&&"body"===i?e="radicand":"overunder"===this.parent().type&&"body"===i?e="base":"underscript"!==i&&"overscript"!==i||(e="annotation"),e){const e=[new MathAtom$1.MathAtom("math","placeholder","â¬")];Array.prototype.splice.apply(t,[1,0].concat(e))}}},EditableMathlist.prototype.selectionWillChange=function(){"function"!=typeof this.config.onSelectionWillChange||this.suppressSelectionChangeNotifications||this.config.onSelectionWillChange(this.target)},EditableMathlist.prototype.selectionDidChange=function(){"function"!=typeof this.config.onSelectionDidChange||this.suppressSelectionChangeNotifications||this.config.onSelectionDidChange(this.target)},EditableMathlist.prototype.setPath=function(t,e){if("string"==typeof t)t=MathPath.pathFromString(t);else if(Array.isArray(t)){const i=MathPath.clone(t),s=this.path;this.path=i,0===e&&"placeholder"===this.anchor().type&&(e=1),t={path:i,extent:e||0},this.path=s}const i=0!==MathPath.pathDistance(this.path,t.path),s=t.extent!==this.extent;return(i||s)&&(i&&this.adjustPlaceholder(),this.selectionWillChange(),this.path=MathPath.clone(t.path),this.siblings().length<this.anchorOffset()?(this.path=[{relation:"body",offset:0}],this.extent=0):this.setExtent(t.extent),this.selectionDidChange()),i||s},EditableMathlist.prototype.setRange=function(t,e){const i=MathPath.pathDistance(t,e);if(0===i)return this.setPath(t,0);if(1===i){const i=e[e.length-1].offset-t[t.length-1].offset,s=MathPath.clone(t);return s[s.length-1]={relation:s[s.length-1].relation,offset:s[s.length-1].offset+1},this.setPath(s,i)}let s=MathPath.pathCommonAncestor(t,e);const a=s.length;if(t.length===a||e.length===a||t[a].relation!==e[a].relation)return this.setPath(s,1);s.push(t[a]),s=MathPath.clone(s);let n=e[a].offset-t[a].offset;return n<=0?e.length>a+1?(s[a].relation=e[a].relation,s[a].offset=e[a].offset,n=-n):(s[a].relation=e[a].relation,s[a].offset=e[a].offset+1,n=-n-1):e.length>t.length&&((s=MathPath.clone(s))[s.length-1].offset+=1,n-=1),this.setPath(s,n+1)},EditableMathlist.prototype.ancestor=function(t){if(t>this.path.length)return null;let e=this.root;for(let i=0;i<this.path.length-t;i++){const t=this.path[i];if(t.relation.startsWith("cell")){e=arrayCell(e,parseInt(t.relation.match(/cell([0-9]*)$/)[1]))[t.offset]}else{if(!e[t.relation])return null;{if(0===e[t.relation].length||"first"!==e[t.relation][0].type){const i=new MathAtom$1.MathAtom(e.parseMode,"first",null);e[t.relation].unshift(i)}const i=Math.min(t.offset,e[t.relation].length-1);e=e[t.relation][i]}}}return e},EditableMathlist.prototype.anchor=function(){if(this.relation().startsWith("cell")){const t=parseInt(this.relation().match(/cell([0-9]*)$/)[1]);return arrayCell(this.parent(),t)[this.anchorOffset()]}return this.siblings()[this.anchorOffset()]},EditableMathlist.prototype.parent=function(){return this.ancestor(1)},EditableMathlist.prototype.relation=function(){return this.path.length>0?this.path[this.path.length-1].relation:""},EditableMathlist.prototype.anchorOffset=function(){return this.path.length>0?this.path[this.path.length-1].offset:0},EditableMathlist.prototype.focusOffset=function(){return this.path.length>0?this.path[this.path.length-1].offset+this.extent:0},EditableMathlist.prototype.startOffset=function(){return Math.min(this.path[this.path.length-1].offset,this.path[this.path.length-1].offset+this.extent)},EditableMathlist.prototype.endOffset=function(){return Math.max(this.path[this.path.length-1].offset,this.path[this.path.length-1].offset+this.extent)},EditableMathlist.prototype.insertFirstAtom=function(){this.siblings()},EditableMathlist.prototype.siblings=function(){if(0===this.path.length)return[];let t;if(this.relation().startsWith("cell")){const e=parseInt(this.relation().match(/cell([0-9]*)$/)[1]);t=arrayCell(this.parent(),e)}else"string"==typeof(t=this.parent()[this.relation()]||[])&&(t=[]);if(0===t.length||"first"!==t[0].type){const e=new MathAtom$1.MathAtom(this.parent().parseMode,"first",null);t.unshift(e)}return t},EditableMathlist.prototype.sibling=function(t){const e=this.startOffset()+t,i=this.siblings();return e<0||e>i.length?null:i[e]},EditableMathlist.prototype.isCollapsed=function(){return 0===this.extent},EditableMathlist.prototype.setExtent=function(t){this.extent=t},EditableMathlist.prototype.collapseForward=function(){return!this.isCollapsed()&&(this.setSelection(Math.max(this.anchorOffset(),this.focusOffset())-1),!0)},EditableMathlist.prototype.collapseBackward=function(){return!this.isCollapsed()&&(this.setSelection(Math.min(this.anchorOffset(),this.focusOffset())),!0)},EditableMathlist.prototype.selectGroup_=function(){this.setSelection(1,"end")},EditableMathlist.prototype.selectAll_=function(){this.path=[{relation:"body",offset:0}],this.setSelection(1,"end")},EditableMathlist.prototype.deleteAll_=function(){this.selectAll_(),this.delete_()},EditableMathlist.prototype.contains=function(t){if(this.isCollapsed())return!1;const e=this.siblings(),i=this.startOffset(),s=this.endOffset();for(let a=i;a<s;a++)if(atomContains(e[a],t))return!0;return!1},EditableMathlist.prototype.extractContents=function(){if(this.isCollapsed())return null;const t=[],e=this.siblings(),i=this.startOffset();if(i<e.length){const s=this.endOffset();for(let a=i;a<s;a++)t.push(e[a])}return t},EditableMathlist.prototype.extractCharactersBeforeInsertionPoint=function(t){const e=this.siblings();if(e.length<=1)return"";let i="",s=this.startOffset();for(;s>=1&&t>0;)i=getString(e[s])+i,t-=1,s-=1;return i},EditableMathlist.prototype.commandOffsets=function(){const t=this.siblings();if(t.length<=1)return null;let e=Math.min(this.endOffset(),t.length-1);if("command"!==t[e].type)return null;for(;e>0&&"command"===t[e].type;)e-=1;let i=this.startOffset()+1;for(;i<=t.length-1&&"command"===t[i].type;)i+=1;return i>e?{start:e+1,end:i}:null},EditableMathlist.prototype.extractCommandStringAroundInsertionPoint=function(){let t="";const e=this.commandOffsets();if(e){const i=this.siblings();for(let s=e.start;s<e.end;s++)t+=i[s].body||""}return t},EditableMathlist.prototype.decorateCommandStringAroundInsertionPoint=function(t){const e=this.commandOffsets();if(e){const i=this.siblings();for(let s=e.start;s<e.end;s++)i[s].error=t}},EditableMathlist.prototype.commitCommandStringBeforeInsertionPoint=function(){const t=this.commandOffsets();if(t){const e=this.siblings(),i=this.anchorOffset()+1;for(let s=t.start;s<i;s++)e[s].suggestion=!1}},EditableMathlist.prototype.spliceCommandStringAroundInsertionPoint=function(t){const e=this.commandOffsets();if(e){Array.prototype.splice.apply(this.siblings(),[e.start,e.end-e.start].concat(t));let i=[];for(const e of t)i=i.concat(e.filter(t=>"placeholder"===t.type));this.setExtent(0),this.path[this.path.length-1].offset=e.start-1,0!==i.length&&this.leap(1,!1)||this.setSelection(e.start+t.length-1)}},EditableMathlist.prototype.extractContentsOrdInGroupBeforeInsertionPoint=function(){const t=[],e=this.siblings();if(e.length<=1)return[];let i=this.startOffset();for(;i>=1&&("mord"===e[i].type||"surd"===e[i].type||"leftright"===e[i].type||"font"===e[i].type);)t.unshift(e[i]),i--;return t},EditableMathlist.prototype.setSelection=function(t,e,i){const s=this.path[this.path.length-1].relation;i||(i=s);const a=this.parent(),n=i.startsWith("cell");if(!a&&"body"!==i)return!1;if(!n&&!a[i]||n&&!a.array)return!1;const o=i!==s;t=t||0,this.path[this.path.length-1].relation=i;const r=this.siblings().length;this.path[this.path.length-1].relation=s,t<0&&(t=r+t),t=Math.max(0,Math.min(t,r));const l=this.path[this.path.length-1].offset!==t,h=this.extent;"end"===(e=e||0)?0===(e=r-t)&&(t-=1):"start"===e&&0===(e=-t)&&(t-=1),this.setExtent(e);const c=this.extent!==h;return this.setExtent(h),(o||l||c)&&(o&&this.adjustPlaceholder(),this.selectionWillChange(),this.path[this.path.length-1].relation=i,this.path[this.path.length-1].offset=t,this.setExtent(e),this.selectionDidChange()),!0},EditableMathlist.prototype.next=function(t){t=t||{};const e={body:"numer",numer:"denom",denom:"index",index:"overscript",overscript:"underscript",underscript:"subscript",subscript:"superscript"};if(this.anchorOffset()===this.siblings().length-1){this.adjustPlaceholder(),this.selectionWillChange();let i=e[this.relation()];for(;i&&!this.setSelection(0,0,i);)i=e[i];if(i)return void this.selectionDidChange();if(this.relation().startsWith("cell")){const t=arrayCellCount(this.parent());let e=parseInt(this.relation().match(/cell([0-9]*)$/)[1])+1;for(;e<t;){if(arrayCell(this.parent(),e)&&this.setSelection(0,0,"cell"+e))return void this.selectionDidChange();e+=1}}if(1===this.path.length)(this.suppressSelectionChangeNotifications||!this.config.onMoveOutOf||this.config.onMoveOutOf(this,"forward"))&&(this.path[0].offset=0);else{const e=!t.iterateAll&&this.parent().skipBoundary;this.path.pop(),e&&this.next()}return void this.selectionDidChange()}this.setSelection(this.anchorOffset()+1);const i=this.anchor();if(!i.captureSelection){let s;if(i.array){let t=0;s="";const e=arrayCellCount(i);for(;!s&&t<e;)arrayCell(i,t)&&(s="cell"+t.toString()),t+=1;return this.path.push({relation:s,offset:0}),void this.setSelection(0,0,s)}for(s="body";s;){if(Array.isArray(i[s]))return this.path.push({relation:s,offset:0}),this.insertFirstAtom(),void(!t.iterateAll&&i.skipBoundary&&this.next());s=e[s]}}},EditableMathlist.prototype.previous=function(t){const e={numer:"body",denom:"numer",index:"denom",overscript:"index",underscript:"overscript",subscript:"underscript",superscript:"subscript"};if(!(t=t||{}).iterateAll&&1===this.anchorOffset()&&this.parent()&&this.parent().skipBoundary&&this.setSelection(0),this.anchorOffset()<1){let t;for(t=e[this.relation()];t&&!this.setSelection(-1,0,t);)t=e[t];if("body"===t&&this.parent()&&"msubsup"===this.parent().type&&(t=null),t)return;if(this.adjustPlaceholder(),this.selectionWillChange(),this.relation().startsWith("cell")){let t=parseInt(this.relation().match(/cell([0-9]*)$/)[1])-1;for(;t>=0;){if(arrayCell(this.parent(),t)&&this.setSelection(-1,0,"cell"+t))return void this.selectionDidChange();t-=1}}return 1===this.path.length?(this.suppressSelectionChangeNotifications||!this.config.onMoveOutOf||this.config.onMoveOutOf.bind(this)(-1))&&(this.path[0].offset=this.root.body.length-1):(this.path.pop(),this.setSelection(this.anchorOffset()-1)),void this.selectionDidChange()}const i=this.anchor();if(!i.captureSelection){let t;if(i.array){t="";const e=arrayCellCount(i);let s=e-1;for(;!t&&s<e;)arrayCell(i,s)&&(t="cell"+s.toString()),s-=1;return s+=1,this.path.push({relation:t,offset:arrayCell(i,s).length-1}),void this.setSelection(-1,0,t)}for(t="superscript";t;){if(Array.isArray(i[t]))return this.path.push({relation:t,offset:i[t].length-1}),void this.setSelection(-1,0,t);t=e[t]}}this.setSelection(this.anchorOffset()-1),!t.iterateAll&&this.sibling(0)&&this.sibling(0).skipBoundary&&this.previous()},EditableMathlist.prototype.move=function(t,e){const i=(e=e||{extend:!1}).extend||!1;if(this.removeSuggestion(),i)this.extend(t,e);else{const e=clone$1(this),i=this.parent(),s=this.relation(),a=this.siblings();if(t>0)for(this.collapseForward()&&t--;t>0;)this.next(),t--;else if(t<0)for(this.collapseBackward();0!==t;)this.previous(),t++;a.length<=1&&["superscript","subscript","index"].includes(s)&&(i[s]=null),this._announce("move",e)}},EditableMathlist.prototype.up=function(t){const e=(t=t||{extend:!1}).extend||!1;this.collapseForward(),"denom"===this.relation()?(e?(this.path.pop(),this.setExtent(1)):this.setSelection(this.anchorOffset(),0,"numer"),this._announce("moveUp")):this._announce("line")},EditableMathlist.prototype.down=function(t){const e=(t=t||{extend:!1}).extend||!1;this.collapseForward(),"numer"===this.relation()?(e?(this.path.pop(),this.setExtent(1)):this.setSelection(this.anchorOffset(),0,"denom"),this._announce("moveDown")):this._announce("line")},EditableMathlist.prototype.extend=function(t){let e=this.path[this.path.length-1].offset,i=0;const s=clone$1(this);this.isCollapsed()&&(e+=1),0===(i=this.extent+t)&&(e-=1);const a=e+i;a<=0?this.path.length>1?(this.path.pop(),e=this.path[this.path.length-1].offset+1,i=-1):(this.isCollapsed()&&(e-=1),i-=t):a>this.siblings().length&&(this.path.length>1?(this.path.pop(),e=this.anchorOffset(),i=1):(this.isCollapsed()&&(e-=1),i-=1)),this.setSelection(e,i),this._announce("move",s)},EditableMathlist.prototype.skip=function(t,e){const i=(e=e||{extend:!1}).extend||!1;t=t<0?-1:1;const s=clone$1(this),a=this.siblings(),n=this.focusOffset();let o=n+(t>0?1:0);const r=a[o=Math.max(0,Math.min(o,a.length-1))].type;if(0===o&&t<0||o===a.length-1&&t>0)this.move(t,e);else{if("mopen"===r&&t>0||"mclose"===r&&t<0){let e="mopen"===r?1:-1;for(o+=t>0?1:-1;o>=0&&o<a.length&&0!==e;)"mopen"===a[o].type?e+=1:"mclose"===a[o].type&&(e-=1),o+=t;0!==e&&(o=n+t),t>0&&(o-=1)}else{for(;o>=0&&o<a.length&&a[o].type===r;)o+=t;o-=t>0?1:0}i?this.extend(o-n):this.setSelection(o),this._announce("move",s)}},EditableMathlist.prototype.jump=function(t,e){const i=(e=e||{extend:!1}).extend||!1;t=t<0?-1:1;const s=this.siblings();let a=this.focusOffset();t>0&&(a=Math.min(a+1,s.length-1));const n=t<0?0:s.length-1;i?this.extend(n-a):this.move(n-a)},EditableMathlist.prototype.jumpToMathFieldBoundary=function(t,e){const i=(e=e||{extend:!1}).extend||!1;t=(t=t||1)<0?-1:1;const s=clone$1(this),a=[this.path[0]];let n;i?t<0?a[0].offset>0&&(n=-a[0].offset):a[0].offset<this.siblings().length-1&&(a[0].offset++,n=this.siblings().length-a[0].offset):(a[0].offset=t<0?0:this.root.body.length-1,n=0),this.setPath(a,n),this._announce("move",s)},EditableMathlist.prototype.leap=function(t,e){t=(t=t||1)<0?-1:1,e=e||!0;const i=clone$1(this),s=this.filter((t,e)=>"placeholder"===e.type||t.length>1&&1===this.siblings().length,t);if(0===s.length){if(e)if(this.config.onTabOutOf)this.config.onTabOutOf(this.target,t>0?"forward":"backward");else if(document.activeElement){const e='a[href]:not([disabled]),\n                    button:not([disabled]),\n                    textarea:not([disabled]),\n                    input[type=text]:not([disabled]),\n                    select:not([disabled]),\n                    [contentEditable="true"],\n                    [tabindex]:not([disabled]):not([tabindex="-1"])',i=Array.prototype.filter.call(document.querySelectorAll(e),t=>(t.offsetWidth>0||t.offsetHeight>0)&&!t.contains(document.activeElement)||t===document.activeElement);let s=i.indexOf(document.activeElement)+t;s<0&&(s=i.length-1),s>=i.length&&(s=0),i[s].focus()}return!1}return this.move(t),"placeholder"===this.anchor().type&&this.move(t),this.setPath(s[0]),"placeholder"===this.anchor().type&&this.setExtent(1),this._announce("move",i),!0},EditableMathlist.prototype.parseMode=function(){const t=this.anchor();return!t||"commandliteral"!==t.type&&"esc"!==t.type&&"command"!==t.type?"math":"command"},EditableMathlist.prototype.insert=function(t,e){e=e||{};const i=this.suppressContentChangeNotifications;e.suppressContentChangeNotifications&&(this.suppressContentChangeNotifications=!0),"function"!=typeof this.config.onContentWillChange||e.suppressContentChangeNotifications||this.config.onContentWillChange(this.target);const s=this.suppressContentChangeNotifications;this.suppressContentChangeNotifications=!0,e.insertionMode||(e.insertionMode="replaceSelection"),e.selectionMode||(e.selectionMode="placeholder"),e.format||(e.format="auto"),e.macros=e.macros||this.config.macros;const a=this.parseMode();let n;const o={};o[0]=this.extractContents(),void 0!==e.placeholder&&(o["?"]=e.placeholder),"replaceSelection"===e.insertionMode?this.delete_():"replaceAll"===e.insertionMode?(this.root.body.splice(1),this.path=[{relation:"body",offset:0}],this.extent=0):"insertBefore"===e.insertionMode?this.collapseBackward():"insertAfter"===e.insertionMode&&this.collapseForward();const r=this.siblings(),l=this.startOffset();if(l+1<r.length&&"placeholder"===r[l+1].type?this.delete_(1):l>0&&"placeholder"===r[l].type&&this.delete_(-1),"auto"===e.format)if("command"===a){n=[];for(const e of t){const t=Definitions.matchSymbol("command",e);t&&n.push(new MathAtom$1.MathAtom("command","command",t.value,"main"))}}else""===t?n=[new MathAtom$1.MathAtom("command","command","\\","main")]:(o[0]?t=t.replace(/(^|[^\\])#@/g,"$1#0"):/(^|[^\\])#@/.test(t)?(t=t.replace(/(^|[^\\])#@/g,"$1#0"),o[0]=this.extractContentsOrdInGroupBeforeInsertionPoint(),this._deleteAtoms(-o[0].length),Array.isArray(o[0])&&0===o[0].length&&(o[0]=void 0)):t=t.replace(/(^|[^\\])#@/g,"$1#?"),1===(n=ParserModule.parseTokens(Lexer$1.tokenize(Definitions.unicodeStringToLatex(t)),a,o,e.macros,e.smartFence)).length&&"genfrac"===n[0].type&&(n[0].numer=removeParen(n[0].numer),n[0].denom=removeParen(n[0].denom)));else"latex"===e.format&&(n=ParserModule.parseTokens(Lexer$1.tokenize(t),a,o,e.macros,e.smartFence));if(Array.prototype.splice.apply(this.siblings(),[this.anchorOffset()+1,0].concat(n)),this.insertFirstAtom(),"placeholder"===e.selectionMode){let t=[];for(const e of n)t=t.concat(e.filter(t=>"placeholder"===t.type));0!==t.length&&this.leap(1,!1)?this._announce("move"):this.setSelection(this.anchorOffset()+n.length)}else"before"===e.selectionMode||("after"===e.selectionMode?this.setSelection(this.anchorOffset()+n.length):"item"===e.selectionMode&&this.setSelection(this.anchorOffset()+1,n.length));this.suppressContentChangeNotifications=s,"function"!=typeof this.config.onContentDidChange||this.suppressContentChangeNotifications||this.config.onContentDidChange(this.target),this.suppressContentChangeNotifications=i},EditableMathlist.prototype._insertSmartFence=function(t){if(!this.config.smartFence)return!1;const e=this.parent();if(e&&"leftright"===e.type&&"|"!==e.leftDelim&&/\||\\vert|\\Vert|\\mvert|\\mid/.test(t))return this.insert("\\,\\middle"+t+"\\, "),!0;"{"===t&&(t="\\lbrace"),"["===t&&(t="\\lbrack"),"}"===t&&(t="\\rbrace"),"]"===t&&(t="\\rbrack");const i=Definitions.RIGHT_DELIM[t];if(i&&(!e||"leftright"!==e.type||"|"!==e.leftDelim)){let e="";const s=this.isCollapsed();return e=this.sibling(0).isFunction?"\\mleft"+t+"\\mright":"\\left"+t+"\\right",e+=s?"?":i,this.insert(e),s&&this.move(-1),!0}let s;for(const e in Definitions.RIGHT_DELIM)Definitions.RIGHT_DELIM.hasOwnProperty(e)&&t===Definitions.RIGHT_DELIM[e]&&(s=e);if(s){if(e&&"leftright"===e.type&&this.endOffset()===this.siblings().length-1)return e.rightDelim=t,this.move(1),!0;const i=this.siblings();let s;for(s=this.endOffset();s>=0&&"leftright"!==i[s].type;s--);if(s>=0)return i[s].rightDelim=t,i[s].body=i[s].body.concat(i.slice(s+1,this.endOffset()+1)),i.splice(s+1,this.endOffset()-s),this.setSelection(s),!0;if(e&&"leftright"===e.type){e.rightDelim=t;const s=i.slice(this.endOffset()+1);return i.splice(this.endOffset()+1),this.path.pop(),Array.prototype.splice.apply(this.siblings(),[this.endOffset()+1,0].concat(s)),!0}const a=this.ancestor(2);return a&&"leftright"===a.type&&this.endOffset()===i.length-1?(this.move(1),this._insertSmartFence(t)):(this.insert(t),!0)}return!1},EditableMathlist.prototype.positionInsertionPointAfterCommitedCommand=function(){const t=this.siblings(),e=this.commandOffsets();let i=e.start;for(;i<e.end&&!t[i].suggestion;)i++;this.setSelection(i-1)},EditableMathlist.prototype.removeSuggestion=function(){const t=this.siblings();for(let e=t.length-1;e>=0;e--)t[e].suggestion&&t.splice(e,1)},EditableMathlist.prototype.insertSuggestion=function(t,e){this.removeSuggestion();const i=[],s=t.substr(e);for(const t of s){const e=new MathAtom$1.MathAtom("command","command",t,"main");e.suggestion=!0,i.push(e)}Array.prototype.splice.apply(this.siblings(),[this.anchorOffset()+1,0].concat(i))},EditableMathlist.prototype._deleteAtoms=function(t){t>0?this.siblings().splice(this.anchorOffset()+1,t):(this.siblings().splice(this.anchorOffset()+t+1,-t),this.setSelection(this.anchorOffset()+t))},EditableMathlist.prototype.delete=function(t){if(0===(t=t||0))this.delete_(0);else if(t>0)for(;t>0;)this.delete_(1),t--;else for(;t<0;)this.delete_(-1),t++},EditableMathlist.prototype.delete_=function(t){"function"!=typeof this.config.onContentWillChange||this.suppressContentChangeNotifications||this.config.onContentWillChange(this.target);const e=this.suppressContentChangeNotifications;this.suppressContentChangeNotifications=!0,t=(t=t||0)<0?-1:t>0?1:t,this.removeSuggestion();const i=this.siblings();if(this.isCollapsed()){const e=this.anchorOffset();if(t<0)if(0!==e){const t=this.sibling(0);"leftright"===t.type?(t.rightDelim="?",this.move(-1)):!t.captureSelection&&/^(group|array|genfrac|surd|leftright|font|overlap|overunder|color|box|mathstyle|sizing)$/.test(t.type)?this.move(-1):(this._announce("delete",null,i.slice(e,e+1)),i.splice(e,1),this.setSelection(e-1))}else{const t=this.relation();if("superscript"===t||"subscript"===t){const e=this.parent()[t].filter(t=>"placeholder"!==t.type&&"first"!==t.type);this.parent()[t]=null,this.path.pop(),Array.prototype.splice.apply(this.siblings(),[this.anchorOffset(),0].concat(e)),this.setSelection(this.anchorOffset()-1),this._announce("deleted: "+t)}else if("denom"===t){const t=this.parent().numer.filter(t=>"placeholder"!==t.type&&"first"!==t.type),e=this.parent().denom.filter(t=>"placeholder"!==t.type&&"first"!==t.type);this.path.pop(),Array.prototype.splice.apply(this.siblings(),[this.anchorOffset(),1].concat(e)),Array.prototype.splice.apply(this.siblings(),[this.anchorOffset(),0].concat(t)),this.setSelection(this.anchorOffset()+t.length-1),this._announce("deleted: denominator")}else if("body"===t){const t=this.siblings().filter(t=>"placeholder"!==t.type);this.path.length>1&&(t.shift(),this.path.pop(),Array.prototype.splice.apply(this.siblings(),[this.anchorOffset(),1].concat(t)),this.setSelection(this.anchorOffset()-1),this._announce("deleted: root"))}else this.move(-1),this.delete(-1)}else if(t>0)if(e!==i.length-1)/^(group|array|genfrac|surd|leftright|font|overlap|overunder|color|box|mathstyle|sizing)$/.test(this.sibling(1).type)?this.move(1):(this._announce("delete",null,i.slice(e+1,e+2)),i.splice(e+1,1));else{if("numer"===this.relation()){const t=this.parent().numer.filter(t=>"placeholder"!==t.type&&"first"!==t.type),e=this.parent().denom.filter(t=>"placeholder"!==t.type&&"first"!==t.type);this.path.pop(),Array.prototype.splice.apply(this.siblings(),[this.anchorOffset(),1].concat(e)),Array.prototype.splice.apply(this.siblings(),[this.anchorOffset(),0].concat(t)),this.setSelection(this.anchorOffset()+t.length-1),this._announce("deleted: numerator")}else this.move(1),this.delete(1)}}else{const t=this.startOffset(),e=this.endOffset();this._announce("deleted",null,i.slice(t,e)),i.splice(t,e-t),this.setSelection(t-1)}this.suppressContentChangeNotifications=e,"function"!=typeof this.config.onContentDidChange||this.suppressContentChangeNotifications||this.config.onContentDidChange(this.target)},EditableMathlist.prototype.moveToNextPlaceholder_=function(){this.leap(1)},EditableMathlist.prototype.moveToPreviousPlaceholder_=function(){this.leap(-1)},EditableMathlist.prototype.moveToNextChar_=function(){this.move(1)},EditableMathlist.prototype.moveToPreviousChar_=function(){this.move(-1)},EditableMathlist.prototype.moveUp_=function(){this.up()},EditableMathlist.prototype.moveDown_=function(){this.down()},EditableMathlist.prototype.moveToNextWord_=function(){this.skip(1)},EditableMathlist.prototype.moveToPreviousWord_=function(){this.skip(-1)},EditableMathlist.prototype.moveToGroupStart_=function(){this.setSelection(0)},EditableMathlist.prototype.moveToGroupEnd_=function(){this.setSelection(-1)},EditableMathlist.prototype.moveToMathFieldStart_=function(){this.jumpToMathFieldBoundary(-1)},EditableMathlist.prototype.moveToMathFieldEnd_=function(){this.jumpToMathFieldBoundary(1)},EditableMathlist.prototype.deleteNextChar_=function(){this.delete_(1)},EditableMathlist.prototype.deletePreviousChar_=function(){this.delete_(-1)},EditableMathlist.prototype.deleteNextWord_=function(){this.extendToNextBoundary(),this.delete_()},EditableMathlist.prototype.deletePreviousWord_=function(){this.extendToPreviousBoundary(),this.delete_()},EditableMathlist.prototype.deleteToGroupStart_=function(){this.extendToGroupStart(),this.delete_()},EditableMathlist.prototype.deleteToGroupEnd_=function(){this.extendToMathFieldStart(),this.delete_()},EditableMathlist.prototype.deleteToMathFieldEnd_=function(){this.extendToMathFieldEnd(),this.delete_()},EditableMathlist.prototype.transpose_=function(){},EditableMathlist.prototype.extendToNextChar_=function(){this.extend(1)},EditableMathlist.prototype.extendToPreviousChar_=function(){this.extend(-1)},EditableMathlist.prototype.extendToNextWord_=function(){this.skip(1,{extend:!0})},EditableMathlist.prototype.extendToPreviousWord_=function(){this.skip(-1,{extend:!0})},EditableMathlist.prototype.extendUp_=function(){this.up({extend:!0})},EditableMathlist.prototype.extendDown_=function(){this.down({extend:!0})},EditableMathlist.prototype.extendToNextBoundary_=function(){this.skip(1,{extend:!0})},EditableMathlist.prototype.extendToPreviousBoundary_=function(){this.skip(-1,{extend:!0})},EditableMathlist.prototype.extendToGroupStart_=function(){this.setExtent(-this.anchorOffset())},EditableMathlist.prototype.extendToGroupEnd_=function(){this.setExtent(this.siblings().length-this.anchorOffset())},EditableMathlist.prototype.extendToMathFieldStart_=function(){this.jumpToMathFieldBoundary(-1,{extend:!0})},EditableMathlist.prototype.extendToMathFieldEnd_=function(){this.jumpToMathFieldBoundary(1,{extend:!0})},EditableMathlist.prototype.moveToSuperscript_=function(){if(this.collapseForward(),!this.anchor().superscript)if(this.anchor().subscript)this.anchor().superscript=[new MathAtom$1.MathAtom(this.parent().parseMode,"first",null)];else{const t=this.sibling(1);t&&t.superscript?this.path[this.path.length-1].offset+=1:t&&t.subscript?(this.path[this.path.length-1].offset+=1,this.anchor().superscript=[new MathAtom$1.MathAtom(this.parent().parseMode,"first",null)]):(this.siblings().splice(this.anchorOffset()+1,0,new MathAtom$1.MathAtom(this.parent().parseMode,"msubsup","â")),this.path[this.path.length-1].offset+=1,this.anchor().superscript=[new MathAtom$1.MathAtom(this.parent().parseMode,"first",null)])}this.path.push({relation:"superscript",offset:0}),this.selectGroup_()},EditableMathlist.prototype.moveToSubscript_=function(){if(this.collapseForward(),!this.anchor().subscript)if(this.anchor().superscript)this.anchor().subscript=[new MathAtom$1.MathAtom(this.parent().parseMode,"first",null)];else{const t=this.sibling(1);t&&t.subscript?this.path[this.path.length-1].offset+=1:t&&t.superscript?(this.path[this.path.length-1].offset+=1,this.anchor().subscript=[new MathAtom$1.MathAtom(this.parent().parseMode,"first",null)]):(this.siblings().splice(this.anchorOffset()+1,0,new MathAtom$1.MathAtom(this.parent().parseMode,"msubsup","â")),this.path[this.path.length-1].offset+=1,this.anchor().subscript=[new MathAtom$1.MathAtom(this.parent().parseMode,"first",null)])}this.path.push({relation:"subscript",offset:0}),this.selectGroup_()},EditableMathlist.prototype.moveToOpposite_=function(){const t={superscript:"subscript",subscript:"superscript",denom:"numer",numer:"denom"}[this.relation()];return t?(this.parent()[t]||(this.parent()[t]=[new MathAtom$1.MathAtom(this.parent().parseMode,"first",null)]),this.setSelection(1,"end",t),!0):(this.moveToSuperscript_(),!1)},EditableMathlist.prototype.moveBeforeParent_=function(){this.path.length>1?(this.path.pop(),this.setSelection(this.anchorOffset()-1)):this._announce("plonk")},EditableMathlist.prototype.moveAfterParent_=function(){if(this.path.length>1){const t=clone$1(this);this.path.pop(),this.setExtent(0),this._announce("move",t)}else this._announce("plonk")},EditableMathlist.prototype._addCell=function(t){const e=this.parent();if(e&&"array"===e.type&&Array.isArray(e.array)){const i=this.relation();if(i.startsWith("cell")){const s=arrayColRow(e,parseInt(i.match(/cell([0-9]*)$/)[1]));"after row"===t||"before row"===t?(s.col=0,s.row=s.row+("after row"===t?1:0),e.array.splice(s.row,0,[[]])):(s.col+="after column"===t?1:0,e.array[s.row].splice(s.col,0,[]));const a=function(t,e){let i=0;if(Array.isArray(t.array)){for(let s=0;s<e.row;s++)for(let e=0;e<t.array[s].length;e++)i+=1;i+=e.col}return i}(e,s);this.selectionWillChange(),this.path.pop(),this.path.push({relation:"cell"+a.toString(),offset:0}),this.insertFirstAtom(),this.selectionDidChange()}}},EditableMathlist.prototype.addRowAfter_=function(){this._addCell("after row")},EditableMathlist.prototype.addRowBefore_=function(){this._addCell("before row")},EditableMathlist.prototype.addColumnAfter_=function(){this._addCell("after column")},EditableMathlist.prototype.addColumnBefore_=function(){this._addCell("before column")},EditableMathlist.prototype._applyStyle=function(t){let e=null;const i=this.isCollapsed(),s=this.startOffset()===this.anchorOffset()?1:-1;if(!i){const i=this.parent();if(!i||"box"!==i.type&&"color"!==i.type||this.startOffset()<=1&&this.endOffset()===this.siblings().length&&(this.path.pop(),this.setSelection(this.startOffset(),1)),1===(e=this.extractContents()).length&&(t.color&&"color"===e[0].type&&e[0].textcolor===t.color||t.backgroundColor&&"box"===e[0].type&&e[0].backgroundcolor===t.backgroundColor))return"first"===(e=e[0].body)[0].type&&e.shift(),Array.prototype.splice.apply(this.siblings(),[this.startOffset(),1].concat(e)),void this.setSelection(this.startOffset(),e?e.length:0);e=function t(e,i){if(!e)return null;let s;if(Array.isArray(e)){if(1===e.length)return t(e[0],i);s=[];for(const a of e){const e=t(a,i);Array.isArray(e)?s=s.concat(e):s.push(e)}if(0===s.length)return null}else i.color&&"color"===e.type||i.backgroundColor&&"box"===e.type?("first"===e.body[0].type&&e.body.shift(),s=t(e.body,i)):"object"==typeof e?(e.body=t(e.body,i),e.superscript=t(e.superscript,i),e.subscript=t(e.subscript,i),e.index=t(e.index,i),e.denom=t(e.denom,i),e.numer=t(e.numer,i),e.array=t(e.array,i),s=e):s=e;return s}(e,t),Array.isArray(e)||(e=[e]),this.siblings().splice(this.startOffset(),this.endOffset()-this.startOffset())}if(t.color){const s=new MathAtom$1.MathAtom(this.parseMode(),"color",e);s.latex="\\textcolor",s.textcolor=t.color,s.skipBoundary=!0,s.body?"first"!==s.body[0].type&&s.body.unshift(new MathAtom$1.MathAtom(this.parseMode,"first",null)):s.body=[new MathAtom$1.MathAtom(this.parseMode,"first",null)];const a="transparent"===t.color||"black"===t.color||"#000"===t.color||"#000000"===t.color||this.parent()&&"color"===this.parent().type&&this.parent().textcolor===t.color;if(i&&this.parent()&&"color"===this.parent().type){if(this.path.pop(),this.setSelection(this.startOffset(),0),a)return;this.siblings().splice(this.startOffset()+1,0,s)}else if(!i&&a){if(!this.parent()||"color"!==this.parent().type)return e.length>0&&"first"===e[0].type&&e.shift(),Array.prototype.splice.apply(this.siblings(),[this.startOffset(),0].concat(e)),void this.setSelection(this.startOffset(),e.length);s.textcolor="#000",this.siblings().splice(this.startOffset(),0,s)}else this.siblings().splice(this.startOffset()+(i?1:0),0,s);e=[this.sibling(0)]}if(t.backgroundColor){const s=new MathAtom$1.MathAtom(this.parseMode(),"box",e);if(s.latex="\\colorbox",s.backgroundcolor=t.backgroundColor,s.skipBoundary=!0,s.body?"first"!==s.body[0].type&&s.body.unshift(new MathAtom$1.MathAtom(this.parseMode,"first",null)):s.body=[new MathAtom$1.MathAtom(this.parseMode,"first",null)],i&&this.parent()&&"box"===this.parent().type){const e="transparent"===t.backgroundColor||"white"===t.backgroundColor||"#fff"===t.backgroundColor||"#ffffff"===t.backgroundColor||this.parent().backgroundcolor===t.backgroundColor;if(this.path.pop(),this.setSelection(this.startOffset(),0),e)return;this.siblings().splice(this.startOffset()+1,0,s)}else this.siblings().splice(this.startOffset()+(i?1:0),0,s)}i?(this.setSelection(this.startOffset()+1,0),this.path.push({relation:"body",offset:0}),this.setSelection(0,0),this.insertFirstAtom()):this.setExtent(s)};var EditableMathlist$1={EditableMathlist:EditableMathlist};const KEY_NAMES={Escape:"Esc"," ":"Spacebar",ArrowLeft:"Left",ArrowUp:"Up",ArrowRight:"Right",ArrowDown:"Down",Delete:"Del"},VIRTUAL_KEY_NAMES={q:"KeyQ",w:"KeyW",e:"KeyE",r:"KeyR",t:"KeyT",y:"KeyY",u:"KeyU",i:"KeyI",o:"KeyO",p:"KeyP",a:"KeyA",s:"KeyS",d:"KeyD",f:"KeyF",g:"KeyG",h:"KeyH",j:"KeyJ",k:"KeyK",l:"KeyL",z:"KeyZ",x:"KeyX",c:"KeyC",v:"KeyV",b:"KeyB",n:"KeyN",m:"KeyM",1:"Digit1",2:"Digit2",3:"Digit3",4:"Digit4",5:"Digit5",6:"Digit6",7:"Digit7",8:"Digit8",9:"Digit9",0:"Digit0","!":"Shift-Digit1","@":"Shift-Digit2","#":"Shift-Digit3",$:"Shift-Digit4","%":"Shift-Digit5","^":"Shift-Digit6","&":"Shift-Digit7","*":"Shift-Digit8","(":"Shift-Digit9",")":"Shift-Digit0","-":"Minus",_:"Shift-Minus","/":"Slash","\\":"Backslash","|":"Shift-Backslash","?":"Shift-Slash"," ":"Spacebar"};function keyboardEventToString(t){let e;"Unidentified"===t.key&&t.target&&(e=VIRTUAL_KEY_NAMES[t.target.value]||t.target.value),e||(e=KEY_NAMES[t.key]||t.code)||(e=VIRTUAL_KEY_NAMES[t.key.toLowerCase()]||t.key);const i=[];return t.ctrlKey&&i.push("Ctrl"),t.metaKey&&i.push("Meta"),t.altKey&&i.push("Alt"),t.shiftKey&&i.push("Shift"),0===i.length?e:(i.push(e),i.join("-"))}function delegateKeyboardEvents(t,e){let i,s=null,a=null,n=!1,o=!1;function r(t){clearTimeout(i),i=setTimeout(function(){clearTimeout(i),t()})}function l(){if(function(t){return t.selectionStart!==t.selectionEnd}(t))return;const i=t.value;t.value="",i.length>0&&e.typedText(i)}const h=t||e.container;h.addEventListener("keydown",function(i){return"Dead"===i.key||"Unidentified"===i.key||229===i.keyCode?(o=!0,n=!1,t.blur(),t.focus()):o=!1,!(!n&&"CapsLock"!==i.code&&!/(Control|Meta|Alt|Shift)(Right|Left)/.test(i.code))||(s=i,a=null,e.keystroke(keyboardEventToString(i),i))},!0),h.addEventListener("keypress",function(t){n||(s&&a&&e.keystroke(keyboardEventToString(s),s),a=t,r(l))},!0),h.addEventListener("keyup",function(){n||!s||a||l()},!0),h.addEventListener("paste",function(){t.focus();const i=t.value;t.value="",i.length>0&&e.paste(i)},!0),h.addEventListener("copy",function(t){e.copy&&e.copy(t)},!0),h.addEventListener("cut",function(t){e.cut&&e.cut(t)},!0),h.addEventListener("blur",function(){s=null,a=null},!0),h.addEventListener("focus",function(){},!0),h.addEventListener("compositionstart",()=>{n=!0},!0),h.addEventListener("compositionend",()=>{n=!1,r(l)},!0),h.addEventListener("input",()=>{o?(t.blur(),t.focus(),o=!1,n=!1,r(l)):n||r(l)})}var Keyboard={delegateKeyboardEvents:delegateKeyboardEvents,select:delegateKeyboardEvents.select,keyboardEventToString:keyboardEventToString,eventToChar:function(t){let e;return"Unidentified"===t.key&&t.target&&(e=t.target.value),e=e||t.key||t.code,/^(Return|Enter|Tab|Escape|Delete|PageUp|PageDown|Home|End|Help|ArrowLeft|ArrowRight|ArrowUp|ArrowDown)$/.test(e)&&(e=""),e},charToEvent:function(t){return{key:t,metaKey:!1,ctrlKey:!1,altKey:!1,shiftKey:!1}}};var Undo={UndoManager:class{constructor(t){this.mathlist=t,this.stack=[],this.index=-1,this.maximumDepth=1e3}canUndo(){return this.index>=0}canRedo(){return this.index!==this.stack.length-1}undo(t){this.canUndo()&&(t&&"function"==typeof t.onUndoStateWillChange&&t.onUndoStateWillChange(this.mathlist.target,"undo"),this.restore(this.stack[this.index],t),this.index-=1,t&&"function"==typeof t.onUndoStateDidChange&&t.onUndoStateDidChange(this.mathlist.target,"undo"))}redo(t){this.canRedo()&&(t&&"function"===t.onUndoStateWillChange&&t.onUndoStateWillChange(this.mathlist.target,"redo"),this.index+=1,this.restore(this.stack[this.index],t),t&&"function"==typeof t.onUndoStateDidChange&&t.onUndoStateDidChange(this.mathlist.target,"redo"))}snapshot(t){t&&"function"===t.onUndoStateWillChange&&t.onUndoStateWillChange(this.mathlist.target,"snapshot"),this.stack.splice(this.index+1,this.stack.length-this.index-1),this.stack.push({latex:this.mathlist.root.toLatex(),selection:this.mathlist.toString()}),this.index++,this.stack.length>this.maximumDepth&&this.stack.shift(),t&&"function"==typeof t.onUndoStateDidChange&&t.onUndoStateDidChange(this.mathlist.target,"snapshot")}save(){return{latex:this.mathlist.root.toLatex(),selection:this.mathlist.toString()}}restore(t,e){this.mathlist.insert(t.latex,Object.assign({insertionMode:"replaceAll",selectionMode:"after",format:"latex"},e)),this.mathlist.setPath(t.selection)}}};const KEYBOARD_SHORTCUTS={Left:"moveToPreviousChar",Right:"moveToNextChar",Up:"moveUp",Down:"moveDown","Shift-Left":"extendToPreviousChar","Shift-Right":"extendToNextChar","Shift-Up":"extendUp","Shift-Down":"extendDown",Backspace:"deletePreviousChar","Alt-Del":"deletePreviousChar",Del:"deleteNextChar","Alt-Backspace":"deleteNextChar","Alt-Left":"moveToPreviousWord","Alt-Right":"moveToNextWord","Alt-Shift-Left":"extendToPreviousWord","Alt-Shift-Right":"extendToNextWord","Ctrl-Left":"moveToGroupStart","Ctrl-Right":"moveToGroupEnd","Ctrl-Shift-Left":"extendToGroupStart","Ctrl-Shift-Right":"extendToGroupEnd",Spacebar:"moveAfterParent","Shift-Spacebar":"moveBeforeParent",Home:"moveToMathFieldStart","mac:Meta-Left":"moveToMathFieldStart","Shift-Home":"extendToMathFieldStart","mac:Meta-Shift-Left":"extendToMathFieldStart",End:"moveToMathFieldEnd","mac:Meta-Right":"moveToMathFieldEnd","Shift-End":"extendToMathFieldEnd","mac:Meta-Shift-Right":"extendToMathFieldEnd",PageUp:"moveToGroupStart",PageDown:"moveToGroupEnd","math:Tab":"moveToNextPlaceholder","math:F8":"moveToNextPlaceholder","math:Shift-Tab":"moveToPreviousPlaceholder","math:Shift-F8":"moveToPreviousPlaceholder","math:Esc":"enterCommandMode","math:Backslash":"enterCommandMode","math:IntlBackslash":"enterCommandMode","command:Spacebar":"complete","command:Esc":"complete","command:Tab":"complete","command:Return":"complete","command:Enter":"complete","command:Shift-Esc":"complete","command:Down":"nextSuggestion","ios:command:Tab":"nextSuggestion","command:Up":"previousSuggestion","!mac:math:Ctrl-KeyA":"selectAll","mac:math:Meta-KeyA":"selectAll",Cut:"cut",Copy:"copy",Paste:"paste",Clear:"delete","!mac:Ctrl-KeyZ":"undo","mac:Meta-KeyZ":"undo",Undo:"undo","!mac:Ctrl-KeyY":"redo","mac:Meta-Shift-KeyY":"redo","!mac:Ctrl-Shift-KeyZ":"redo","mac:Meta-Shift-KeyZ":"redo",Redo:"redo",EraseEof:"deleteToGroupEnd","mac:Ctrl-KeyB":"moveToPreviousChar","mac:Ctrl-KeyF":"moveToNextChar","mac:Ctrl-KeyP":"moveUp","mac:Ctrl-KeyN":"moveDown","mac:Ctrl-KeyA":"moveToMathFieldStart","mac:Ctrl-KeyE":"moveToMathFieldEnd","mac:Ctrl-Shift-KeyB":"extendToPreviousChar","mac:Ctrl-Shift-KeyF":"extendToNextChar","mac:Ctrl-Shift-KeyP":"extendUp","mac:Ctrl-Shift-KeyN":"extendDown","mac:Ctrl-Shift-KeyA":"extendToMathFieldStart","mac:Ctrl-Shift-KeyE":"extendToMathFieldEnd","mac:Ctrl-Alt-KeyB":"moveToPreviousWord","mac:Ctrl-Alt-KeyF":"moveToNextWord","mac:Ctrl-Shift-Alt-KeyB":"extendToPreviousWord","mac:Ctrl-Shift-Alt-KeyF":"extendToNextWord","mac:Ctrl-KeyH":"deletePreviousChar","mac:Ctrl-KeyD":"deleteNextChar","mac:Ctrl-KeyL":"scrollIntoView","mac:Ctrl-KeyT":"transpose","math:Ctrl-Digit2":["insert","\\sqrt{#0}"],"math:Ctrl-Digit5":"moveToOpposite","math:Ctrl-Digit6":"moveToSuperscript","math:Ctrl-Minus":"moveToSubscript","math:Alt-BracketLeft":["insert","\\left[ #0 \\right]"],"math:Alt-Shift-BracketLeft":["insert","\\left{ #0 \\right}"],"math:Ctrl-Enter":"addRowAfter","math:Ctrl-Comma":"addColumnAfter","math:Alt-KeyQ":["insert","\\theta"],"math:Alt-KeyP":["insert","\\pi"],"math:Alt-KeyV":["insert","\\sqrt{#0}"],"math:Alt-KeyW":["insert","\\sum_{i=#?}^{#?}"],"math:Alt-KeyB":["insert","\\int_{#?}^{#?}"],"math:Alt-KeyU":["insert","\\cup"],"math:Alt-KeyN":["insert","\\cap"],"math:Alt-KeyO":["insert","\\emptyset"],"math:Alt-KeyD":["insert","\\differentialD"],"math:Alt-Shift-KeyO":["insert","\\varnothing"],"math:Alt-Shift-KeyD":["insert","\\partial"],"math:Alt-Shift-KeyP":["insert","\\prod_{i=#?}^{#?}"],"math:Alt-Shift-KeyU":["insert","\\bigcup"],"math:Alt-Shift-KeyN":["insert","\\bigcap"],"math:Alt-Shift-KeyA":["insert","\\forall"],"math:Alt-Shift-KeyE":["insert","\\exists"],"math:Alt-Digit5":["insert","\\infty"],"math:Alt-Digit6":["insert","\\wedge"],"math:Alt-Shift-Digit6":["insert","\\vee"],"math:Alt-Digit9":["insert","("],"math:Alt-Digit0":["insert",")"],"math:Slash":["insert","\\frac{#@}{#?}"],"math:Alt-Slash":["insert","\\frac{#?}{#@}"],"math:NumpadDivide":["insert","\\frac{#@}{#?}"],"math:Alt-NumpadDivide":["insert","\\frac{#?}{#@}"],"math:Shift-Backquote":["insert","\\~"],"math:Alt-Shift-Slash":["insert","\\/"],"Alt-Shift-KeyK":"toggleKeystrokeCaption","Alt-Space":"toggleVirtualKeyboard","mac:Ctrl-Meta-Up":"speakParent","!mac:Ctrl-Alt-Up":"speakParent","mac:Ctrl-Meta-Down":"speakGroup","!mac:Ctrl-Alt-Down":"speakGroup","mac:Ctrl-Meta-Left":"speakLeftSibling","!mac:Ctrl-Alt-Left":"speakLeftSibling","mac:Ctrl-Meta-Right":"speakRightSibling","!mac:Ctrl-Alt-Right":"speakRightSibling","mac:Ctrl-Meta-Shift-Down":"speakAllWithSynchronizedHighlighting","!mac:Ctrl-Alt-Shift-Down":"speakAllWithSynchronizedHighlighting"},REVERSE_KEYBOARD_SHORTCUTS={"\\theta":"Alt-KeyQ","\\sqrt":["Alt-KeyV","Ctrl-Digit2"],"\\pi":"Alt-KeyP","\\prod":"Alt-Shift-KeyP","\\sum":"Alt-KeyW","\\int":"Alt-KeyB","\\cup":"Alt-KeyU","\\cap":"Alt-KeyN","\\bigcup":"Alt-Shift-KeyU","\\bigcap":"Alt-Shift-KeyN","\\forall":"Alt-Shift-KeyA","\\exists":"Alt-Shift-KeyE","\\infty":"Alt-Digit5","\\wedge":"Alt-Digit5","\\vee":"Alt-Shift-Digit6","\\differentialD":"Alt-keyD","\\partial":"Alt-Shift-KeyD","\\frac":"Slash","\\emptyset":"Alt-KeyO","\\varnothing":"Alt-Shift-KeyO","\\~":"~"},INLINE_SHORTCUTS={alpha:"\\alpha",delta:"\\delta",Delta:"\\Delta",pi:"\\pi","Ï":"\\pi",Pi:"\\Pi",theta:"\\theta",Theta:"\\Theta",ii:"\\imaginaryI",jj:"\\imaginaryJ",ee:"\\exponentialE",nabla:"\\nabla",grad:"\\nabla",del:"\\partial","â":"\\infty",oo:"\\infty","â":"\\sum",sum:"\\sum_{#?}^{#?}",prod:"\\prod_{#?}^{#?}","â":"\\sqrt",sqrt:"\\sqrt","â«":"\\int","â":"\\differentialD","â":"\\differentialD",sin:"\\sin",cos:"\\cos",tan:"\\tan",tanh:"\\tanh",log:"\\log",ln:"\\ln",exp:"\\exp",lim:"\\lim_{#?}",AA:"\\forall",EE:"\\exists","!EE":"\\nexists","&&":"\\land",in:"\\in","!in":"\\notin",NN:"\\N",ZZ:"\\Z",QQ:"\\Q",RR:"\\R",CC:"\\C",PP:"\\P",xx:"\\times","+-":"\\pm","!=":"\\ne",">=":"\\ge","<=":"\\le","<<":"\\ll",">>":"\\gg","~~":"\\approx","â":"\\approx","?=":"\\questeq","Ã·":"\\div","Â¬":"\\neg",":=":"\\coloneq","::":"\\Colon","(:":"\\langle",":)":"\\rangle",beta:"\\beta",chi:"\\chi",epsilon:"\\epsilon",varepsilon:"\\varepsilon",eta:"\\eta",gamma:"\\gamma",Gamma:"\\Gamma",iota:"\\iota",kappa:"\\kappa",lambda:"\\lambda",Lambda:"\\Lambda",mu:"\\mu",nu:"\\nu","Âµ":"\\mu",phi:"\\phi",Phi:"\\Phi",varphi:"\\varphi",psi:"\\psi",Psi:"\\Psi",rho:"\\rho",sigma:"\\sigma",Sigma:"\\Sigma",tau:"\\tau",vartheta:"\\vartheta",upsilon:"\\upsilon",xi:"\\xi",Xi:"\\Xi",zeta:"\\zeta",omega:"\\omega",Omega:"\\Omega","Î©":"\\omega",forall:"\\forall",exists:"\\exists","!exists":"\\nexists",":.":"\\therefore",liminf:"\\mathop{lim~inf}\\limits_{#?}",limsup:"\\mathop{lim~sup}\\limits_{#?}",argmin:"\\mathop{arg~min}\\limits_{#?}",argmax:"\\mathop{arg~max}\\limits_{#?}",det:"\\det",mod:"\\mod",max:"\\max",min:"\\min",erf:"\\mathop{erf}",erfc:"\\mathop{erfc}",bessel:"\\mathop{bessel}",mean:"\\mathop{mean}",median:"\\mathop{median}",fft:"\\mathop{fft}",lcm:"\\mathop{lcm}",gcd:"\\mathop{gcd}",randomReal:"\\mathop{randomReal}",randomInteger:"\\mathop{randomInteger}",mm:"\\mathop{mm}",cm:"\\mathop{cm}",km:"\\mathop{km}",kg:"\\mathop{kg}","...":"\\ldots","+...":"+\\cdots","-...":"-\\cdots","->...":"\\to\\cdots","->":"\\to","|->":"\\mapsto","--\x3e":"\\longrightarrow","<--":"\\longleftarrow","=>":"\\Rightarrow","==>":"\\Longrightarrow","<=>":"\\Leftrightarrow","<->":"\\leftrightarrow","(.)":"\\odot","(+)":"\\oplus","(/)":"\\oslash","(*)":"\\otimes","(-)":"\\ominus","||":"\\Vert","{":"\\{","}":"\\}"};function platform(t){let e="other";return navigator&&navigator.platform&&navigator.userAgent&&(/^(mac)/i.test(navigator.platform)?e="mac":/^(win)/i.test(navigator.platform)?e="win":/(android)/i.test(navigator.userAgent)?e="android":/(iphone)/i.test(navigator.userAgent)||/(ipod)/i.test(navigator.userAgent)||/(ipad)/i.test(navigator.userAgent)?e="ios":/\bCrOS\b/i.test(navigator.userAgent)&&(e="chromeos")),e===t?t:"!"+t}function commandToString(t){let e=t;return Array.isArray(e)&&e.length>0&&(e=e[0]+"("+e.slice(1).join("")+")"),e}function stringify(t,e){let i="";Array.isArray(t)||(t=[t]);for(const s of t){let t;const a=s.match(/(^[^:]*):/),n=a?a[1]:"";if(n===platform("mac")||n===platform("win")||n===platform("ios")||n===platform("android")||n===platform("chromeos")||n===platform("other")){const e=s.match(/:([^:]*)$/);t=e?e[1]:s}else if(!["mac","!mac","win","!win","ios","!ios","android","!android","chromeos","!chromeos","other","!other"].includes(n)){const e=s.match(/:([^:]*)$/);t=e?e[1]:s}if(t){const s="mac"===platform("mac")||"ios"===platform("ios"),a=t.length>1?t.split("-"):[t];let n="";for(const t of a)!s&&n.length>0&&(n+='<span class="ML__shortcut-join">+</span>'),"Key"===t.substr(0,3)?n+=t.substr(3,1):"Digit"===t.substr(0,5)?n+=t.substr(5,1):n+={Meta:s?"â":"command",Shift:s?"â§":"shift",Alt:s?"â¥":"alt",Ctrl:s?"â":"control","\n":s?"â":"return",Return:s?"â":"return",Enter:s?"â¤":"enter",Tab:s?"â¥":"tab",Esc:"esc",Backspace:s?"â«":"backspace",Del:s?"â¦":"del",PageUp:s?"â":"page up",PageDown:s?"â":"page down",Home:s?"â¤":"home",End:s?"â¤":"end",Spacebar:"space",Semicolon:";",Period:".",Comma:",",Minus:"-",Equal:"=",Quote:"'",BracketLeft:"[",BracketRight:"]",Backslash:"\\",IntlBackslash:"\\",Backquote:"`",Slash:"/",NumpadMultiply:"* &#128290;",NumpadDivide:"/ &#128290;",NumpadSubstract:"- &#128290;",NumpadAdd:"+ &#128290;",NumpadDecimal:". &#128290;",NumpadComma:", &#128290;",Help:"help",Left:"â ",Up:"â¡",Right:"â¢",Down:"â£"}[t]||t;i.length>0&&(i+=e||" or "),i+=n}}return i}var Shortcuts={KEYBOARD_SHORTCUTS:KEYBOARD_SHORTCUTS,INLINE_SHORTCUTS:INLINE_SHORTCUTS,stringify:stringify,startsWithString:function(t,e){const i=[];for(let s=0;s<=t.length-1;s++){const a=t.slice(s);e&&e.overrideDefaultInlineShortcuts||Object.keys(INLINE_SHORTCUTS).forEach(t=>{t.startsWith(a)&&!i.includes(t)&&i.push(t)});const n=e&&e.inlineShortcuts?e.inlineShortcuts:null;n&&Object.keys(n).forEach(t=>{t.startsWith(a)&&i.push(t)})}return i},forString:function(t,e){let i=[];e&&e.overrideDefaultInlineShortcuts||(i=INLINE_SHORTCUTS[t]);const s=e&&e.inlineShortcuts?e.inlineShortcuts:null;let a;return s&&(a=s[t]),a||i},selectorForKeystroke:function(t,e){for(const i of[platform("mac")+":"+t+":"+e,platform("win")+":"+t+":"+e,platform("ios")+":"+t+":"+e,platform("android")+":"+t+":"+e,platform("chromeos")+":"+t+":"+e,platform("other")+":"+t+":"+e,platform("mac")+":"+e,platform("win")+":"+e,platform("ios")+":"+e,platform("android")+":"+e,platform("chromeos")+":"+e,t+":"+e,e])if(KEYBOARD_SHORTCUTS[i])return KEYBOARD_SHORTCUTS[i];return""},forCommand:function(t){let e=[];if("string"==typeof t){const i=REVERSE_KEYBOARD_SHORTCUTS[t];Array.isArray(i)?e=i.slice():i&&e.push(i)}t=commandToString(t);const i=new RegExp("^"+t.replace("\\","\\\\").replace("|","\\|").replace("*","\\*").replace("$","\\$").replace("^","\\^")+"([^*a-zA-Z]|$)");for(const t in KEYBOARD_SHORTCUTS)if(KEYBOARD_SHORTCUTS.hasOwnProperty(t)&&i.test(commandToString(KEYBOARD_SHORTCUTS[t]))){const i=t.match(/:([^:]*)$/);i&&e.push(i[1])}return stringify(e)}};const SAMPLES={"\\mathrm":"\\mathrm{ABab=+01}","\\mathbf":"\\mathbf{ABab=+01}","\\bf":"\\bf{ABab=+01}","\\bm":"\\bm{ABab=+01}","\\bold":"\\bold{ABab=+01}","\\mathit":"\\mathbb{ab=+01}","\\mathbb":"\\mathbb{ABCD}","\\Bbb":"\\mathbb{ABCD}","\\frak":"\\frak{ABCD}","\\mathfrak":"\\mathfrak{ABCD}","\\mathscr":"\\mathscr{ABCD}","\\mathsf":"\\mathsf{ABab01}","\\mathtt":"\\mathtt{ABab=+01}","\\mathcal":"\\mathcal{ABCD}","\\boldsymbol":"\\boldsymbol{ABab01+=}","\\text":"\\text{ABC abc}","\\textrm":"\\textrm{ABC abc}","\\textnormal":"\\textnormal{ABC abc}","\\textit":"\\textit{ABC abc}","\\textbf":"\\textbf{ABC abc}","\\texttt":"\\texttt{ABC abc}","\\textsf":"\\textsf{ABC abc}","\\textcolor":"{\\textcolor{m0}A}{\\textcolor{m1}B}{\\textcolor{m2}C }{\\textcolor{m3}a}{\\textcolor{m4}b}{\\textcolor{m5}c}{\\textcolor{m6}8}","\\color":"{\\color{m0}A}{\\color{m1}B}{\\color{m2}C}{\\color{m3}a}{\\color{m4}b}{\\color{m5}c}{\\color{m6}8}","\\underline":'\\underline{\\unicode{"2B1A}}',"\\overline":'\\overline{\\unicode{"2B1A}}',"\\vec":'\\vec{\\unicode{"25CC}}',"\\check":'\\check{\\unicode{"25CC}}',"\\acute":'\\acute{\\unicode{"25CC}}',"\\breve":'\\breve{\\unicode{"25CC}}',"\\tilde":'\\tilde{\\unicode{"25CC}}',"\\hat":'\\hat{\\unicode{"25CC}}',"\\ddot":'\\ddot{\\unicode{"25CC}}',"\\dot":'\\dot{\\unicode{"25CC}}',"\\bar":'\\bar{\\unicode{"25CC}}',"\\!":'\\unicode{"203A}\\!\\unicode{"2039}',"\\,":'\\unicode{"203A}\\,\\unicode{"2039}',"\\:":'\\unicode{"203A}\\:\\unicode{"2039}',"\\;":'\\unicode{"203A}\\;\\unicode{"2039}',"\\quad":'\\unicode{"203A}\\quad\\unicode{"2039}',"\\qquad":'\\unicode{"203A}\\qquad\\unicode{"2039}',"\\enskip":'\\unicode{"203A}\\enskip\\unicode{"2039}',"\\space":'\\unicode{"203A}\\space\\unicode{"2039}',"\\frac":'\\frac{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\dfrac":'\\dfrac{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\cfrac":'\\cfrac{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\tfrac":'\\tfrac{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\dbinom":'\\dbinom{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\tbinom":'\\tbinom{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\binom":'\\binom{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\pdiff":'\\pdiff{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\bigcup":'\\bigcup_{\\unicode{"2B1A}}',"\\bigcap":'\\bigcap_{\\unicode{"2B1A}}',"\\sqrt":'\\sqrt{\\unicode{"2B1A}}',"\\prod":'\\prod_{\\unicode{"2B1A}}^{\\unicode{"2B1A}}',"\\sum":'\\sum_{\\unicode{"2B1A}}^{\\unicode{"2B1A}}',"\\int":'\\int_{\\unicode{"2B1A}}^{\\unicode{"2B1A}}',"\\stackrel":'\\stackrel{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\stackbin":'\\stackbin{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\underset":'\\underset{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\overset":'\\overset{\\unicode{"2B1A}}{\\unicode{"2B1A}}',"\\prime":'\\unicode{"2B1A}^{\\prime}',"\\boxed":'\\boxed{\\unicode{"2B1A}}',"\\colorbox":'\\colorbox{#fbc0bd}{\\unicode{"2B1A}}',"\\bbox":'\\bbox[#ffd400, solid 2px #ffd400]{\\unicode{"2B1A}}',"\\enclose":'\\enclose{updiagonalstrike,roundedbox}[1px solid red, mathbackground="#fbc0bd"]{23+45}',"\\fcolorbox":'\\fcolorbox{#cd0030}{#ffd400}{\\unicode{"2B1A}}',"\\ ":'\\char"2423',"\\top":"{\\color{red}P}\\top","\\bot":"{\\color{#0F0}P}\\bot","\\mid":"P(A\\mid B)","\\rlap":"\\rlap{x}o","\\llap":"o\\llap{/}"},NOTES={"\\text":"roman text","\\textrm":"roman text","\\textnormal":"roman text","\\textit":"italic text","\\textbf":"bold text","\\texttt":"monospaced text","\\textsf":"sans-serif text","\\mathrm":["roman","(upright)"],"\\mathbf":"bold","\\bf":"bold","\\bold":"bold","\\mathit":"italic","\\mathbb":"blackboard","\\Bbb":"blackboard","\\mathscr":"script","\\mathtt":["typewriter","(monospaced)"],"\\mathsf":"sans-serif","\\mathcal":"caligraphic","\\frak":["fraktur","(gothic)"],"\\mathfrak":["fraktur","(gothic)"],"\\textcolor":"text color","\\color":"color","\\forall":"for all","\\exists":"there exists","\\nexists":"there does not exist","\\frac":"fraction","\\dfrac":"display fraction","\\cfrac":"continuous fraction","\\tfrac":"text fraction","\\binom":"binomial coefficient","\\dbinom":"display binomial coefficient","\\tbinom":"text binomial coefficient","\\pdiff":"partial differential","\\vec":"vector","\\check":"caron","\\acute":"acute","\\breve":"breve","\\tilde":"tilde","\\dot":"dot","\\hat":["hat","circumflex"],"\\ddot":"double dot","\\bar":"bar","\\prime":"prime","\\varnothing":"empty set","\\emptyset":"empty set","\\subseteq":"subset of or <br>equal to","\\supseteq":"superset of or <br>equal to","\\supset":"superset of","\\subset":"subset of","\\partial":"partial derivative","\\bigcup":"union","\\bigcap":"intersection","\\approx":"approximately equal to","\\notin":"not an element of","\\in":["element of","included in"],"\\infty":"infinity","\\land":"logical and","\\sqrt":"square root","\\prod":"product","\\sum":"summation","\\amalg":["amalgamation","coproduct","free product","disjoint union"],"\\cup":"union with","\\cap":"intersection with","\\int":"integral","\\iint":"surface integral","\\oint":"curve integral","\\iiint":"volume integral","\\iff":"if and only if","\\ln":"natural logarithm","\\boldsymbol":"bold","\\setminus":"set substraction","\\stackrel":"relation with symbol above","\\stackbin":"operator with symbol above","\\underset":"symbol with annotation below","\\overset":"symbol with annotation above","\\hslash":["h-bar","Planck constant"],"\\gtrsim":"greater than or <br>similar to","\\propto":"proportional to","\\equiv":"equivalent to","\\!":["negative thin space","(-3 mu)"],"\\ ":["space","(6 mu)"],"\\,":["thin space","(3 mu)"],"\\:":["medium space","(4 mu)"],"\\;":["thick space","(5 mu)"],"\\quad":["1 em space","(18 mu)"],"\\qquad":["2 em space","(36 mu)"],"\\enskip":["&#189; em space","(9 mu)"],"\\mp":"minus or plus","\\pm":"plus or minus","\\Im":"Imaginary part of","\\Re":"Real part of","\\gothicCapitalR":"Real part of","\\gothicCapitalI":"Imaginary part part of","\\differentialD":"differential d","\\aleph":["aleph","infinite cardinal",'<a target="_blank" href="https://en.wikipedia.org/wiki/Cardinal_number">Wikipedia <big>&#x203A;</big></a>'],"\\beth":["beth","beth number",'<a target="_blank" href="https://en.wikipedia.org/wiki/Beth_number">Wikipedia <big>&#x203A;</big></a>'],"\\gimel":["gimel","gimel function",'<a target="_blank" href="https://en.wikipedia.org/wiki/Gimel_function">Wikipedia <big>&#x203A;</big></a>'],"\\O":"empty set","\\N":"set of <br>natural numbers","\\Z":"set of <br>integers","\\Q":"set of <br>rational numbers","\\C":"set of <br>complex numbers","\\R":"set of <br>real numbers","\\P":"set of <br>prime numbers","\\lesseqqgtr":"less than, equal to or<br> greater than","\\gnapprox":"greater than and <br>not approximately","\\lnapprox":"lesser than and <br>not approximately","\\j":"dotless j","\\i":"dotless i","\\cdot":"centered dot","\\lmoustache":"left moustache","\\rmoustache":"right moustache","\\nabla":["nabla","del","differential vector operator"],"\\square":["square","dâAlembert operator",'<a target="_blank" href="https://en.wikipedia.org/wiki/D%27Alembert_operator">Wikipedia <big>&#x203A;</big></a>'],"\\blacksquare":["black square","end of proof","tombstone","Halmos symbol"],"\\Box":"end of proof","\\colon":["such that","ratio"],"\\coloneq":["is defined by","is assigned"],"\\Colon":["is defined by","as"],"\\_":["underbar","underscore"],"\\ll":"much less than","\\gg":"much greater than","\\doteq":"approximately equal to","\\Doteq":"approximately equal to","\\doteqdot":"approximately equal to","\\cong":["isomorphism of","(for algebras, modules...)"],"\\det":["determinant of","(of a matrix)"],"\\dotplus":"Cartesian product algebra","\\otimes":["tensor product","(of algebras)","Kronecker product","(of matrices)"],"\\oplus":["direct sum","(of modules)"],"\\lb":"base-2 logarithm","\\lg":"base-10 logarithm","\\wp":["Weierstrass P",'<a target="_blank" href="https://en.wikipedia.org/wiki/Weierstrass%27s_elliptic_functions">Wikipedia <big>&#x203A;</big></a>'],"\\wr":["wreath product",'<a target="_blank" href="https://en.wikipedia.org/wiki/Wreath_product">Wikipedia <big>&#x203A;</big></a>'],"\\top":["tautology","Proposition P is universally true"],"\\bot":["contradiction","Proposition P is contradictory"],"\\mid":["probability","of event A given B"],"\\mho":["Siemens","electrical conductance in SI unit",'<a target="_blank" href="https://en.wikipedia.org/wiki/Siemens_(unit)">Wikipedia <big>&#x203A;</big></a>'],"\\Longrightarrow":"implies","\\Longleftrightarrow":"if, and only if,","\\prec":"precedes","\\preceq":"precedes or is equal to","\\succ":"succeedes","\\succeq":"succeedes or is equal to","\\perp":["is perpendicular to","is independent of"],"\\models":["entails","double-turnstyle, models","is a semantic consequence of",'<a target="_blank" href="https://en.wikipedia.org/wiki/Double_turnstile">Wikipedia <big>&#x203A;</big></a>'],"\\vdash":["satisfies","turnstyle, assertion sign","syntactic inference",'<a target="_blank" href="https://en.wikipedia.org/wiki/Turnstile_(symbol)">Wikipedia <big>&#x203A;</big></a>'],"\\implies":["implies","logical consequence"],"\\impliedby":["implied by","logical consequence"],"\\surd":["surd","root of","checkmark"],"\\ltimes":["semi direct product",'<a target="_blank" href="https://en.wikipedia.org/wiki/Semidirect_product">Wikipedia <big>&#x203A;</big></a>'],"\\rtimes":["semi direct product",'<a target="_blank" href="https://en.wikipedia.org/wiki/Semidirect_product">Wikipedia <big>&#x203A;</big></a>'],"\\leftthreetimes":["semi direct product",'<a target="_blank" href="https://en.wikipedia.org/wiki/Semidirect_product">Wikipedia <big>&#x203A;</big></a>'],"\\rightthreetimes":["semi direct product",'<a target="_blank" href="https://en.wikipedia.org/wiki/Semidirect_product">Wikipedia <big>&#x203A;</big></a>'],"\\divideontimes":["divide on times"],"\\curlywedge":"nor","\\curlyvee":"nand","\\simeq":"is group isomorphic with","\\vartriangleleft":["is a normal subgroup of","is an ideal ring of"],"\\circ":["circle","ring","function composition"],"\\rlap":["overlap right","\\rlap{x}o"],"\\llap":["overlap left","o\\llap{/}"],"\\colorbox":["color box","\\colorbox{#fbc0bd}{...}"],"\\ast":["asterisk","reflexive closure (as a superscript)"],"\\bullet":"bullet","\\lim":"limit"};function getNote(t){let e=NOTES[t]||"";return Array.isArray(e)&&(e=e.join("<br>")),e}function showPopover(t,e){t.popover.innerHTML=e;const i=t._getCaretPosition();i&&(t.popover.style.left=i.x-t.popover.offsetWidth/2+"px",t.popover.style.top=i.y+5+"px"),t.popover.classList.add("is-visible")}function hidePopover(t){t.popover.classList.remove("is-visible")}var Popover={getNote:getNote,SAMPLES:SAMPLES,NOTES:NOTES,showPopoverWithLatex:function(t,e,i){if(!e||0===e.length)return void hidePopover(t);const s=e,a=function(t,e){const i=ParserModule.parseTokens(Lexer$1.tokenize(t),"math",null,e.config.macros),s=MathAtom$1.decompose({mathstyle:"displaystyle",macros:e.config.macros},i),a=Span$1.makeSpan(s,"ML__base"),n=Span$1.makeSpan("","ML__strut");n.setStyle("height",a.height,"em");const o=Span$1.makeSpan("","ML__strut--bottom");return o.setStyle("height",a.height+a.depth,"em"),o.setStyle("vertical-align",-a.depth,"em"),Span$1.makeSpan([n,o,a],"ML__mathlive").toMarkup()}(SAMPLES[s]||e,t),n=getNote(s),o=Shortcuts.forCommand(s);let r=i?'<div class="ML__popover__prev-shortcut" role="button" aria-label="Previous suggestion"><span><span>&#x25B2;</span></span></div>':"";r+='<span class="ML__popover__content">',r+='<div class="ML__popover__command" role="button" >'+a+"</div>",n&&(r+='<div class="ML__popover__note">'+n+"</div>"),o&&(r+='<div class="ML__popover__shortcut">'+o+"</div>"),r+="</span>",showPopover(t,r+=i?'<div class="ML__popover__next-shortcut" role="button" aria-label="Next suggestion"><span><span>&#x25BC;</span></span></div>':"");let l=t.popover.getElementsByClassName("ML__popover_content");l&&l.length>0&&t._attachButtonHandlers(l[0],"complete"),(l=t.popover.getElementsByClassName("ML__popover__prev-shortcut"))&&l.length>0&&t._attachButtonHandlers(l[0],"previousSuggestion"),(l=t.popover.getElementsByClassName("ML__popover__next-shortcut"))&&l.length>0&&t._attachButtonHandlers(l[0],"nextSuggestion")},showPopover:showPopover,hidePopover:hidePopover,updatePopoverPosition:function t(e,i){if(e.popover.classList.contains("is-visible"))if(i&&i.deferred)setTimeout(t.bind(null,e),0);else if(e.blurred||!e.mathlist.anchor()||"command"!==e.mathlist.anchor().type)hidePopover(e);else{const t=e._getCaretPosition();t&&(e.popover.style.left=t.x-e.popover.offsetWidth/2+"px",e.popover.style.top=t.y+5+"px")}}};function latexify(t,e){let i="";if(Array.isArray(t))for(const s of t)i+=latexify(s,e);else"number"==typeof t||"boolean"==typeof t?i=t.toString():"string"==typeof t?i=t.replace(/\s/g,"~"):t&&"function"==typeof t.toLatex&&(i=t.toLatex(e));return i}MathAtom$1.MathAtom.prototype.toLatex=function(t){t=void 0!==t&&t;let e,i="",s=0,a=0;const n=this.latex?this.latex.trim():null;switch(this.type){case"group":i+=this.latexOpen||"{",i+=t?latexify(this.body,!0):this.latex||latexify(this.body,!1),i+=this.latexClose||"}";break;case"array":if(i+="\\begin{"+this.env.name+"}","array"===this.env.name){if(i+="{",this.colFormat)for(a=0;a<this.colFormat.length;a++)this.colFormat[a].align?i+=this.colFormat[a].align:this.colFormat[a].rule&&(i+="|");i+="}"}for(s=0;s<this.array.length;s++){for(e=0;e<this.array[s].length;e++)e>0&&(i+=" & "),i+=latexify(this.array[s][e],t);s<this.array.length-1&&(i+=" \\\\ ")}i+="\\end{"+this.env.name+"}";break;case"root":i=latexify(this.body,t);break;case"genfrac":/^(choose|atop|over)$/.test(this.body)?(i+="{",i+=latexify(this.numer,t),i+="\\"+this.body+" ",i+=latexify(this.denom,t),i+="}"):(i+=this.latex,i+=`{${latexify(this.numer,t)}}{${latexify(this.denom,t)}}`);break;case"surd":i+="\\sqrt",this.index&&(i+="[",i+=latexify(this.index,t),i+="]"),i+=`{${latexify(this.body,t)}}`;break;case"leftright":this.inner?(i+="\\left"+(this.leftDelim||"."),this.leftDelim&&this.leftDelim.length>1&&(i+=" "),i+=latexify(this.body,t),i+="\\right"+(this.rightDelim||"."),this.rightDelim&&this.rightDelim.length>1&&(i+=" ")):(i+=this.leftDelim||"",this.leftDelim&&this.leftDelim.length>1&&(i+=" "),i+=latexify(this.body,t),i+="?"===this.rightDelim||"."===this.rightDelim?"":this.rightDelim,this.rightDelim&&this.rightDelim.length>1&&(i+=" "));break;case"delim":case"sizeddelim":i+=n+"{"+this.delim+"}";break;case"rule":i+=n,this.shift&&(i+=`[${latexify(this.shift,t)}em]`),i+=`{${latexify(this.width,t)}em}{${latexify(this.height,t)}em}`;break;case"line":case"overlap":case"font":case"accent":i+=`${n}{${latexify(this.body,t)}}`;break;case"overunder":i+=`${n}{${latexify(this.overscript||this.underscript,t)}}{${latexify(this.body,t)}}`;break;case"mord":case"minner":case"mbin":case"mrel":case"mpunct":case"mopen":case"mclose":case"textord":"\\mathbin"===n||"\\mathrel"===n||"\\mathopen"===n||"\\mathclose"===n||"\\mathpunct"===n||"\\mathord"===n||"\\mathinner"===n?i+=n+"{"+latexify(this.body,t)+"}":"\\unicode"===n?(i+='\\unicode{"',i+=("000000"+this.body.charCodeAt(0).toString(16)).toUpperCase().substr(-6),i+="}"):(this.latex||"string"==typeof this.body)&&(this.latex&&"\\"===this.latex[0]?i+=this.latex+" ":this.latex?i+=this.latex:i+="â"!==this.body?this.body:"");break;case"mop":"â"!==this.body&&(i+="\\mathop"===n||"\\operatorname"===n?n+"{"+latexify(this.body,t)+"}":this.latex||this.body),this.explicitLimits&&("limits"===this.limits&&(i+="\\limits "),"nolimits"===this.limits&&(i+="\\nolimits "));break;case"color":i+=n,this.color?i+=`{${this.color}}`:this.textcolor&&(i+="{"+this.textcolor+"}{"+latexify(this.body,t)+"}");break;case"box":if("\\bbox"===n){if(i+=n,this.padding||this.border||this.backgroundcolor){let e=latexify(this.padding,t);this.border&&(e&&(e+=","),e+="border:"+latexify(this.border,t)),this.backgroundcolor&&(e&&(e+=","),e+=latexify(this.backgroundcolor,t)),i+=`[${e}]`}i+=`{${latexify(this.body,t)}}`}else"\\boxed"===n?i+=`\\boxed{${latexify(this.body,t)}}`:(i+=n,this.framecolor&&(i+=`{${latexify(this.framecolor,t)}}`),this.backgroundcolor&&(i+=`{${latexify(this.backgroundcolor,t)}}`),i+=`{${latexify(this.body,t)}}`);break;case"spacing":i+=n,this.width?i+=`{${latexify(this.width,t)}}`:i+=" ";break;case"enclose":if(i+=n,"\\enclose"===n){i+="{";let t="";for(const e in this.notation)this.notation.hasOwnProperty(e)&&this.notation[e]&&(i+=t+e,t=" ");i+="}";let e="";t="",this.backgroundcolor&&"transparent"!==this.backgroundcolor&&(e+=t+'mathbackground="'+this.backgroundcolor+'"',t=","),this.shadow&&"auto"!==this.shadow&&(e+=t+'shadow="'+this.shadow+'"',t=","),1!==this.strokeWidth||"solid"!==this.strokeStyle?(e+=t+this.borderStyle,t=","):this.strokeColor&&"currentColor"!==this.strokeColor&&(e+=t+'mathcolor="'+this.strokeColor+'"',t=","),e&&(i+=`[${e}]`)}i+=`{${latexify(this.body,t)}}`;break;case"mathstyle":i+="\\"+this.mathstyle+" ";break;case"sizing":i={size1:"\\tiny ",size2:"\\scriptsize ",size3:"\\footnotesize ",size4:"\\small ",size5:"\\normalsize ",size6:"\\large ",size7:"\\Large ",size8:"\\LARGE ",size9:"\\huge ",size10:"\\Huge "}[this.size]||"";break;case"space":i+=this.latex;break;case"placeholder":i+="\\placeholder{"+(this.value||"")+"}";break;case"first":case"command":case"msubsup":break;case"error":i+=this.latex}if(this.superscript){const e=latexify(this.superscript,t);1===e.length?i+="^"+e:i+="^{"+e+"}"}if(this.subscript){const e=latexify(this.subscript,t);1===e.length?i+="_"+e:i+="_{"+e+"}"}return i};const KEYBOARDS={numeric:{tooltip:"Numeric",layer:"math",label:"123",layers:["math"]},roman:{tooltip:"Symbols and Roman Letters",layer:"lower-roman",label:"ABC",layers:["lower-roman","upper-roman","symbols"]},greek:{tooltip:"Greek Letters",layer:"lower-greek",label:"&alpha;&beta;&gamma;",classes:"tex-math",layers:["lower-greek","upper-greek"]},functions:{tooltip:"Functions",layer:"functions",label:"<i>f</i>&thinsp;()",classes:"tex",layers:["functions"]},command:{tooltip:"LaTeX Command Mode",command:"enterCommandMode",label:"<svg><use xlink:href='#svg-command' /></svg>",layers:["lower-command","upper-command","symbols-command"]}},SHIFTED_KEYS={"\\varphi ":{label:"&Phi;",insert:"\\Phi "},"\\varsigma ":{label:"&Sigma;",insert:"\\Sigma "},"\\epsilon ":{label:"&#x0190;",insert:'{\\char"0190}'},"\\rho ":{label:"&#x3A1",insert:'{\\char"3A1}'},"\\tau ":{label:"&#x3A4;",insert:'{\\char"3A4}'},"\\upsilon ":{label:"&Upsilon;",insert:"\\Upsilon "},"\\theta ":{label:"&Theta;",insert:"\\Theta "},"\\iota ":{label:"&Iota;",insert:'{\\char"399}'},"\\omicron ":{label:"&#x039F;",insert:'{\\char"39F}'},"\\pi ":{label:"&Pi;",insert:"\\Pi "},"\\alpha ":{label:"&Alpha;",insert:'{\\char"391}'},"\\sigma ":{label:"&Sigma;",insert:"\\Sigma "},"\\delta ":{label:"&Delta;",insert:"\\Delta "},"\\phi ":{label:"&#x03a6;",insert:"\\Phi "},"\\gamma ":{label:"&Gamma;",insert:"\\Gamma "},"\\eta ":{label:"&Eta;",insert:'{\\char"397}'},"\\xi ":{label:"&Xi;",insert:"\\Xi "},"\\kappa ":{label:"&Kappa;",insert:'{\\char"39A}'},"\\lambda ":{label:"&Lambda;",insert:"\\Lambda "},"\\zeta ":{label:"&Zeta;",insert:'{\\char"396}'},"\\chi ":{label:"&Chi;",insert:'{\\char"3A7}'},"\\psi ":{label:"&Psi;",insert:"\\Psi "},"\\omega ":{label:"&Omega;",insert:"\\Omega "},"\\beta ":{label:"&Beta;",insert:'{\\char"392}'},"\\nu ":{label:"&Nu;",insert:'{\\char"39D}'},"\\mu ":{label:"&Mu;",insert:'{\\char"39C}'}},ALT_KEYS_BASE={0:["\\emptyset","\\varnothing","\\infty",{latex:"#?_0",insert:"#@_0"},"\\circ","\\bigcirc","\\bullet"],2:["\\frac{1}{2}",{latex:"#?^2",insert:"#@^2"}],3:["\\frac{1}{3}",{latex:"#?^3",insert:"#@^3"}],".":[",",";","\\colon",{latex:":",aside:"ratio"},{latex:"\\cdotp",aside:"center dot",classes:"box"},{latex:"\\cdots",aside:"center ellipsis",classes:"box"},{latex:"\\ldotp",aside:"low dot",classes:"box"},{latex:"\\ldots",aside:"low ellipsis",classes:"box"},{latex:"\\vdots",aside:"",classes:"box"},{latex:"\\ddots",aside:"",classes:"box"},"\\odot","\\oslash","\\circledcirc"],"*":["\\cdot","\\ast","\\star","\\bigstar","\\ltimes","\\rtimes","\\rightthreetimes","\\leftthreetimes","\\intercal","\\prod",{latex:"\\prod_{n\\mathop=0}^{\\infty}",classes:"small"}],"+":["\\pm","\\mp","\\sum",{latex:"\\sum_{n\\mathop=0}^{\\infty}",classes:"small"},"\\dotplus","\\oplus"],"-":["\\pm","\\mp","\\ominus","\\vert #0  \\vert"],"/":["\\divideontimes","/","\\div"],"(":["\\left( #0\\right)","\\left[ #0\\right]","\\left\\{ #0\\right\\}","\\left\\langle #0\\right\\rangle","\\lfloor","\\llcorner","(","\\lbrack","\\lvert","\\lVert","\\lgroup","\\langle","\\lceil","\\ulcorner","\\lmoustache","\\lbrace"],")":["\\rfloor","\\lrcorner",")","\\rbrack","\\rvert","\\rVert","\\rgroup","\\rangle","\\rceil","\\urcorner","\\rmoustache","\\rbrace"],"=":["\\cong","\\asymp","\\equiv","\\differencedelta","\\varpropto","\\thickapprox","\\approxeq","\\thicksim","\\backsim","\\eqsim","\\simeq","\\Bumpeq","\\bumpeq","\\doteq","\\Doteq","\\fallingdotseq","\\risingdotseq","\\coloneq","\\eqcirc","\\circeq","\\triangleq","\\between"],"!=":["\\neq","\\ncong","","\\nsim"],"<":["\\leq","\\leqq","\\lneqq","\\ll","\\nless","\\nleq","\\precsim","\\lesssim","\\lessgtr","\\prec","\\preccurlyeq","\\lessdot","\\nprec"],">":["\\geq","\\geqq","\\gneqq","\\gg","\\ngtr","\\ngeq","\\succsim","\\gtrsim","\\gtrless","\\succ","\\succcurlyeq","\\gtrdot","\\nsucc"],set:["\\in","\\owns","\\subset","\\nsubset","\\supset","\\nsupset"],"!set":["\\notin","\\backepsilon"],subset:[],supset:[],infinity:["\\aleph_0","\\aleph_1","\\omega","\\mathfrak{m}"],"numeric-pi":["\\prod","\\theta","\\rho","\\sin","\\cos","\\tan"],ee:["\\times 10^{#?}","\\ln","\\ln_{10}","\\log"],"^":["_{#?}"],int:[{latex:"\\int_{#?}^{#?}",classes:"small"},{latex:"\\int",classes:"small"},{latex:"\\smallint",classes:"small"},{latex:"\\iint",classes:"small"},{latex:"\\iiint",classes:"small"},{latex:"\\oint",classes:"small"},{latex:"\\dfrac{\\rd}{\\rd x}",classes:"small"},{latex:"\\frac{\\partial}{\\partial x}",classes:"small"},"\\capitalDifferentialD","\\rd","\\partial"],nabla:["\\nabla\\times","\\nabla\\cdot","\\nabla^{2}"],"!":["!!","\\Gamma","\\Pi"],accents:["\\bar{#@}","\\vec{#@}","\\hat{#@}","\\check{#@}","\\dot{#@}","\\ddot{#@}","\\mathring{#@}","\\breve{#@}","\\acute{#@}","\\tilde{#@}","\\grave{#@}"],A:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"}],a:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"}],b:[{latex:"\\beth",aside:"beth"}],B:[{latex:"\\beth",aside:"beth"}],c:[{latex:"\\C",aside:"set of complex numbers"}],d:[{latex:"\\daleth",aside:"daleth"}],D:[{latex:"\\daleth",aside:"daleth"}],e:[{latex:"\\exponentialE",aside:"exponential e"},{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isnât"}],g:[{latex:"\\gimel",aside:"gimel"}],G:[{latex:"\\gimel",aside:"gimel"}],h:[{latex:"\\hbar",aside:"h bar"},{latex:"\\hslash",aside:"h slash"}],i:[{latex:"\\imaginaryI",aside:"imaginary i"}],j:[{latex:"\\imaginaryJ",aside:"imaginary j"}],l:[{latex:"\\ell",aside:"ell"}],n:[{latex:"\\N",aside:"set of natural numbers"}],p:[{latex:"\\P",aside:"set of primes"}],q:[{latex:"\\Q",aside:"set of rational numbers"}],r:[{latex:"\\R",aside:"set of real numbers"}],z:[{latex:"\\Z",aside:"set of integers"}],"x-var":["y","z","t","r",{latex:"f(#?)",classes:"small"},{latex:"g(#?)",classes:"small"},"x^2","x^n","x_n","x_{n+1}","x_i","x_{i+1}"],"n-var":["i","j","p","k","a","u"],ii:["\\Re","\\Im","\\imaginaryJ","\\Vert #0 \\Vert"],logic:[{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isnât"},{latex:"\\ni",aside:"such that"},{latex:"\\Colon",aside:"such that"},{latex:"\\implies",aside:"implies"},{latex:"\\impliedby",aside:"implied by"},{latex:"\\iff",aside:"if and only if"},{latex:"\\land",aside:"and"},{latex:"\\lor",aside:"or"},{latex:"\\oplus",aside:"xor"},{latex:"\\lnot",aside:"not"},{latex:"\\downarrow",aside:"nor"},{latex:"\\uparrow",aside:"nand"},{latex:"\\curlywedge",aside:"nor"},{latex:"\\bar\\curlywedge",aside:"nand"},{latex:"\\therefore",aside:"therefore"},{latex:"\\because",aside:"because"},{latex:"^\\biconditional",aside:"biconditional"},"\\leftrightarrow","\\Leftrightarrow","\\to","\\models","\\vdash","\\gets","\\dashv","\\roundimplies"],"set-operators":["\\cap","\\cup","\\setminus","\\smallsetminus","\\complement"],"set-relations":["\\in","\\notin","\\ni","\\owns","\\subset","\\supset","\\subseteq","\\supseteq","\\subsetneq","\\supsetneq","\\varsubsetneq","\\subsetneqq","\\nsubset","\\nsupset","\\nsubseteq","\\nsupseteq"],space:[{latex:'\\char"203A\\!\\char"2039',insert:"\\!",aside:"negative thin space<br>â»Â³â§¸ââ em"},{latex:'\\unicode{"203A}\\,\\unicode{"2039}',insert:"\\,",aside:"thin space<br>Â³â§¸ââ em"},{latex:'\\unicode{"203A}\\:\\unicode{"2039}',insert:"\\:",aside:"medium space<br>â´â§¸ââ em"},{latex:'\\unicode{"203A}\\;\\unicode{"2039}',insert:"\\;",aside:"thick space<br>âµâ§¸ââ em"},{latex:'\\unicode{"203A}\\ \\unicode{"2039}',insert:"\\ ",aside:"â em"},{latex:'\\unicode{"203A}\\enspace\\unicode{"2039}',insert:"\\enspace",aside:"Â½ em"},{latex:'\\unicode{"203A}\\quad\\unicode{"2039}',insert:"\\quad",aside:"1 em"},{latex:'\\unicode{"203A}\\qquad\\unicode{"2039}',insert:"\\qquad",aside:"2 em"}],delete:[{label:'<span class="warning"><svg><use xlink:href="#svg-trash" /></svg></span>',command:'"deleteAll"'}],"->|":[]};let ALT_KEYS={};const LAYERS={math:"\n        <div class='rows'>\n            <ul>\n                <li class='keycap tex' data-alt-keys='x-var'><i>x</i></li>\n                <li class='keycap tex' data-alt-keys='n-var'><i>n</i></li>\n                <li class='separator w5'></li>\n                <row name='numpad-1'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-key='ee' data-alt-keys='ee'>e</li>\n                <li class='keycap tex' data-key='ii' data-alt-keys='ii'>i</li>\n                <li class='keycap tex' data-latex='\\pi' data-alt-keys='numeric-pi'></li>\n            </ul>\n            <ul>\n                <li class='keycap tex' data-key='<' data-alt-keys='<'>&lt;</li>\n                <li class='keycap tex' data-key='>' data-alt-keys='>'>&gt;</li>\n                <li class='separator w5'></li>\n                <row name='numpad-2'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-alt-keys='x2' data-insert='#@^{2}'><span><i>x</i>&thinsp;Â²</span></li>\n                <li class='keycap tex' data-alt-keys='^' data-insert='#@^{#?}'><span><i>x</i><sup>&thinsp;<small>&#x2b1a;</small></sup></span></li>\n                <li class='keycap tex' data-alt-keys='sqrt' data-insert='\\sqrt{#0}' data-latex='\\sqrt{#0}'></li>\n            </ul>\n            <ul>\n                <li class='keycap tex' data-alt-keys='(' >(</li>\n                <li class='keycap tex' data-alt-keys=')' >)</li>\n                <li class='separator w5'></li>\n                <row name='numpad-3'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex small' data-alt-keys='int' data-latex='\\int_0^\\infty'><span></span></li>\n                <li class='keycap tex' data-latex='\\forall' data-alt-keys='logic' ></li>\n                <li class='action font-glyph bottom right' data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'>&#x232b;</li></ul>\n            </ul>\n            <ul>\n                <li class='keycap' data-alt-keys='foreground-color' data-command='[\"applyStyle\",{\"color\":\"#cc2428\"}]'><span style='border-radius: 50%;width:22px;height:22px; background:#cc2428'></span><aside>text</aside></li>\n                <li class='keycap' data-alt-keys='background-color' data-command='[\"applyStyle\",{\"backgroundColor\":\"#fff590\"}]'><span style='border-radius: 50%;width:22px;height:22px; background:#fff590'></span><aside>highlight</aside></li>\n                <li class='separator w5'></li>\n                <row name='numpad-4'/>\n                <li class='separator w5'></li>\n                <arrows/>\n            </ul>\n        </div>\n    ","lower-roman":"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <row name='lower-1' shift-layer='upper-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <row name='lower-2'  shift-layer='upper-roman''/>\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <row name='lower-3'  shift-layer='upper-roman''/>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='symbols'>&infin;â </li>\n                <li class='keycap' data-alt-keys=','>,</li>\n                <li class='keycap w50' data-key=' ' data-alt-keys='space'>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>","upper-roman":"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <row name='upper-1'  shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <row name='upper-2' shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <row name='upper-3' shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='symbols'>&infin;â </li>\n                <li class='keycap' data-alt-keys='.'>;</li>\n                <li class='keycap w50' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",symbols:"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\lbrace '>{</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rbrace '>}</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-alt-keys='set' data-insert='\\in '>&#x2208;</li>\n                <li class='keycap tex' data-alt-keys='!set' data-insert='\\notin '>&#x2209;</li>\n                <li class='keycap tex' data-insert='\\Re '>&#x211c;<aside>Real</aside></li>\n                <li class='keycap tex' data-insert='\\Im '>&#x2111;<aside>Imaginary</aside></li>\n                <li class='keycap w15' data-insert='\\ulcorner#0\\urcorner '><span><sup>&#x250c;</sup><span><span style='color:#ddd'>o</span><sup>&#x2510;</sup></span><aside>ceil</aside></li>\n                <li class='keycap tex' data-alt-keys='nabla' data-insert='\\nabla '>&#x2207;<aside>nabla</aside></li>\n                <li class='keycap tex' data-alt-keys='infinity' data-insert='\\infty '>&#x221e;</li>\n\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\lbrack '>[</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rbrack '>]</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-alt-keys='subset' data-insert='\\subset '>&#x2282;</li>\n                <li class='keycap tex' data-alt-keys='supset' data-insert='\\supset '>&#x2283;</li>\n                <li class='keycap tex' data-key='!' data-alt-keys='!'>!<aside>factorial</aside></li>\n                <li class='keycap' data-insert='^\\prime '><span><sup><span><span style='color:#ddd'>o</span>&#x2032</sup></span><aside>prime</aside></li>\n                <li class='keycap w15' data-insert='\\llcorner#0\\lrcorner '><span><sub>&#x2514;</sub><span style='color:#ddd'>o</span><sub>&#x2518;</sub></span><aside>floor</aside></li>\n                <li class='keycap tex' data-insert='\\partial '>&#x2202;<aside>partial<br>derivative</aside></li>\n                <li class='keycap tex' data-insert='\\emptyset '>&#x2205;<aside>empty set</aside></li>\n\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\langle '>&#x27e8;</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rangle '>&#x27e9;</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-insert='\\subseteq '>&#x2286;</li>\n                <li class='keycap tex' data-insert='\\supseteq '>&#x2287;</li>\n                <li class='keycap tex' data-alt-keys='accents' data-insert='\\vec{#@}' data-latex='\\vec{#?}' data-aside='vector'></li>\n                <li class='keycap tex' data-alt-keys='accents' data-insert='\\bar{#@}' data-latex='\\bar{#?}' data-aside='bar'></li>\n                <li class='keycap tex' data-alt-keys='absnorm' data-insert='\\lvert #@ \\rvert ' data-latex='\\lvert #? \\rvert' data-aside='abs'></li>\n                <li class='keycap tex' data-insert='\\ast '>&#x2217;<aside>asterisk</aside></li>\n\n                <li class='action font-glyph bottom right w15'\n                    data-shifted='<span class=\"warning\"><svg><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'\n                >&#x232b;</li>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='lower-roman'>abc</li>\n                <li class='keycap tex' data-insert='\\cdot '>&#x22c5;<aside>centered dot</aside></li>\n                <li class='keycap tex' data-insert='\\colon '>:<aside>colon</aside></li>\n                <li class='keycap tex' data-insert='\\circ '>&#x2218;<aside>circle</aside></li>\n                <li class='keycap tex' data-insert='\\approx '>&#x2248;<aside>approx.</aside></li>\n                <li class='keycap tex' data-insert='\\ne '>&#x2260;</li>\n                <li class='keycap tex' data-insert='\\pm '>&#x00b1;</li>\n                <arrows/>\n            </ul>\n        </div>","lower-greek":"\n        <div class='rows'>\n            <ul><li class='keycap tex' data-insert='\\varphi '><i>&#x03c6;</i><aside>phi var.</aside></li>\n                <li class='keycap tex' data-insert='\\varsigma '><i>&#x03c2;</i><aside>sigma var.</aside></li>\n                <li class='keycap tex' data-insert='\\epsilon '><i>&#x03f5;</i></li>\n                <li class='keycap tex' data-insert='\\rho '><i>&rho;</i></li>\n                <li class='keycap tex' data-insert='\\tau '><i>&tau;</i></li>\n                <li class='keycap tex' data-insert='\\upsilon '><i>&upsilon;</i></li>\n                <li class='keycap tex' data-insert='\\theta '><i>&theta;</i></li>\n                <li class='keycap tex' data-insert='\\iota '><i>&iota;</i></li>\n                <li class='keycap tex' data-insert='\\omicron '>&omicron;</i></li>\n                <li class='keycap tex' data-insert='\\pi '><i>&pi;</i></li>\n            </ul>\n            <ul><li class='keycap tex' data-insert='\\alpha ' data-shifted='&Alpha;' data-shifted-command='[\"insert\",\"{\\\\char\\\"391}\"]'><i>&alpha;</i></li>\n                <li class='keycap tex' data-insert='\\sigma '><i>&sigma;</i></li>\n                <li class='keycap tex' data-insert='\\delta '><i>&delta;</i></li>\n                <li class='keycap tex' data-insert='\\phi '><i>&#x03d5;</i></i></li>\n                <li class='keycap tex' data-insert='\\gamma '><i>&gamma;</i></li>\n                <li class='keycap tex' data-insert='\\eta '><i>&eta;</i></li>\n                <li class='keycap tex' data-insert='\\xi '><i>&xi;</i></li>\n                <li class='keycap tex' data-insert='\\kappa '><i>&kappa;</i></li>\n                <li class='keycap tex' data-insert='\\lambda '><i>&lambda;</i></li>\n            </ul>\n            <ul><li class='shift modifier font-glyph bottom left w15 layer-switch' data-layer='upper-greek'>&#x21e7;</li>\n                <li class='keycap tex' data-insert='\\zeta '><i>&zeta;</i></li>\n                <li class='keycap tex' data-insert='\\chi '><i>&chi;</i></li>\n                <li class='keycap tex' data-insert='\\psi '><i>&psi;</i></li>\n                <li class='keycap tex' data-insert='\\omega '><i>&omega;</i></li>\n                <li class='keycap tex' data-insert='\\beta '><i>&beta;</i></li>\n                <li class='keycap tex' data-insert='\\nu '><i>&nu;</i></li>\n                <li class='keycap tex' data-insert='\\mu '><i>&mu;</i></li>\n                <li class='action font-glyph bottom right w15'\n                    data-shifted='<span class=\"warning\"><svg><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'\n                >&#x232b;</li>\n            </ul>\n            <ul>\n                <li class='keycap ' data-key=' '>&nbsp;</li>\n                <li class='keycap'>,</li>\n                <li class='keycap tex' data-insert='\\varepsilon '><i>&#x03b5;</i><aside>epsilon var.</aside></li>\n                <li class='keycap tex' data-insert='\\vartheta '><i>&#x03d1;</i><aside>theta var.</aside></li>\n                <li class='keycap tex' data-insert='\\varkappa '><i>&#x3f0;</i><aside>kappa var.</aside></li>\n                <li class='keycap tex' data-insert='\\varpi '><i>&#x03d6;<aside>pi var.</aside></i></li>\n                <li class='keycap tex' data-insert='\\varrho '><i>&#x03f1;</i><aside>rho var.</aside></li>\n                <arrows/>\n            </ul>\n        </div>","upper-greek":"\n        <div class='rows'>\n            <ul><li class='keycap tex' data-insert='\\Phi '>&Phi;<aside>phi</aside></li>\n                <li class='keycap tex' data-insert='\\Sigma '>&Sigma;<aside>sigma</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"0190}'>&#x0190;<aside>epsilon</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"3A1}'>&#x3A1;<aside>rho</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"3A4}'>&#x3A4;<aside>tau</aside></li>\n                <li class='keycap tex' data-insert='\\Upsilon '>&Upsilon;<aside>upsilon</aside></li>\n                <li class='keycap tex' data-insert='\\Theta '>&Theta;<aside>theta</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"399}'>&Iota;<aside>iota</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"39F}'>&#x039F;<aside>omicron</aside></li>\n                <li class='keycap tex' data-insert='\\Pi '>&Pi;<aside>pi</aside></li></ul>\n            <ul><li class='keycap tex' data-insert='{\\char\"391}'>&#x391;<aside>alpha</aside></li>\n                <li class='keycap tex' data-insert='\\Sigma '>&Sigma;<aside>sigma</aside></li>\n                <li class='keycap tex' data-insert='\\Delta '>&Delta;<aside>delta</aside></li>\n                <li class='keycap tex' data-insert='\\Phi '>&#x03a6;<aside>phi</aside></li>\n                <li class='keycap tex' data-insert='\\Gamma '>&Gamma;<aside>gamma</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"397}'>&Eta;<aside>eta</aside></li>\n                <li class='keycap tex' data-insert='\\Xi '>&Xi;<aside>xi</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"39A}'>&Kappa;<aside>kappa</aside></li>\n                <li class='keycap tex' data-insert='\\Lambda '>&Lambda;<aside>lambda</aside></li></ul>\n            <ul><li class='shift modifier font-glyph bottom left selected w15 layer-switch' data-layer='lower-greek'>&#x21e7;</li>\n                <li class='keycap tex' data-insert='{\\char\"396}'>&Zeta;<aside>zeta</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"3A7}'>&Chi;<aside>chi</aside></li>\n                <li class='keycap tex' data-insert='\\Psi '>&Psi;<aside>psi</aside></li>\n                <li class='keycap tex' data-insert='\\Omega '>&Omega;<aside>omega</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"392}'>&Beta;<aside>beta</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"39D}'>&Nu;<aside>nu</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"39C}'>&Mu;<aside>mu</aside></li>\n                <li class='action font-glyph bottom right w15' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'>&#x232b;</li></ul>\n            <ul>\n                <li class='separator w10'>&nbsp;</li>\n                <li class='keycap'>.</li>\n                <li class='keycap w50' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>","lower-command":"\n        <div class='rows'>\n            <ul><row name='lower-1' class='tt' shift-layer='upper-command'/></ul>\n            <ul><row name='lower-2' class='tt' shift-layer='upper-command'/></ul>\n            <ul><row name='lower-3' class='tt' shift-layer='upper-command'/></ul>\n            <ul>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='symbols-command'>01#</li>\n                <li class='keycap tt' data-shifted='[' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \"[\"]'>{</li>\n                <li class='keycap tt' data-shifted=']' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \"]\"]'>}</li>\n                <li class='keycap tt' data-shifted='(' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \"(\"]'>^</li>\n                <li class='keycap tt' data-shifted=')' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \")\"]'>_</li>\n                <li class='keycap w20' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>","upper-command":"\n        <div class='rows'>\n            <ul><row name='upper-1' class='tt' shift-layer='lower-command'/></ul>\n            <ul><row name='upper-2' class='tt' shift-layer='lower-command'/></ul>\n            <ul><row name='upper-3' class='tt' shift-layer='lower-command'/></ul>\n            <ul>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='symbols-command'01#</li>\n                <li class='keycap tt'>[</li>\n                <li class='keycap tt'>]</li>\n                <li class='keycap tt'>(</li>\n                <li class='keycap tt'>)</li>\n                <li class='keycap w20' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>","symbols-command":"\n        <div class='rows'>\n            <ul><li class='keycap tt'>1</li><li class='keycap tt'>2</li><li class='keycap tt'>3</li><li class='keycap tt'>4</li><li class='keycap tt'>5</li><li class='keycap tt'>6</li><li class='keycap tt'>7</li><li class='keycap tt'>8</li><li class='keycap tt'>9</li><li class='keycap tt'>0</li></ul>\n            <ul><li class='keycap tt'>!</li><li class='keycap tt'>@</li><li class='keycap tt'>#</li><li class='keycap tt'>$</li><li class='keycap tt'>%</li><li class='keycap tt'>^</li><li class='keycap tt'>&</li><li class='keycap tt'>*</li><li class='keycap tt'>+</li><li class='keycap tt'>=</li></ul>\n            <ul>\n                <li class='keycap tt'>\\</li>\n                <li class='keycap tt'>|</li>\n                <li class='keycap tt'>/</li>\n                <li class='keycap tt'>`</li>\n                <li class='keycap tt'>;</li>\n                <li class='keycap tt'>:</li>\n                <li class='keycap tt'>?</li>\n                <li class='keycap tt'>'</li>\n                <li class='keycap tt'>\"</li>\n                <li class='action font-glyph bottom right'\n                    data-shifted='<span class=\"warning\"><svg><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'\n                >&#x232b;</li>\n            </ul>\n            <ul>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='lower-command'>abc</li>\n                <li class='keycap tt'>&lt;</li>\n                <li class='keycap tt'>&gt;</li>\n                <li class='keycap tt'>~</li>\n                <li class='keycap tt'>,</li>\n                <li class='keycap tt'>.</li>\n                <li class='keycap' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",functions:"\n        <div class='rows'>\n            <ul><li class='separator'></li>\n                <li class='fnbutton' data-insert='\\sin'></li>\n                <li class='fnbutton' data-insert='\\sin^{-1}'></li>\n                <li class='fnbutton' data-insert='\\ln'></li>\n                <li class='fnbutton' data-insert='\\exponentialE^{#?}'></li>\n                <li class='bigfnbutton' data-insert='\\mathop{lcm}(#?)' data-latex='\\mathop{lcm}()'></li>\n                <li class='bigfnbutton' data-insert='\\mathop{ceil}(#?)' data-latex='\\mathop{ceil}()'></li>\n                <li class='bigfnbutton' data-insert='\\lim_{n\\to\\infty}'></li>\n                <li class='bigfnbutton' data-insert='\\int'></li>\n                <li class='bigfnbutton' data-insert='\\mathop{abs}(#?)' data-latex='\\mathop{abs}()'></li>\n            </ul>\n            <ul><li class='separator'></li>\n                <li class='fnbutton' data-insert='\\cos'></li>\n                <li class='fnbutton' data-insert='\\cos^{-1}'></li>\n                <li class='fnbutton' data-insert='\\ln_{10}'></li>\n                <li class='fnbutton' data-insert='10^{#?}'></li>\n                <li class='bigfnbutton' data-insert='\\mathop{gcd}(#?)' data-latex='\\mathop{gcd}()'></li>\n                <li class='bigfnbutton' data-insert='\\mathop{floor}(#?)' data-latex='\\mathop{floor}()'></li>\n                <li class='bigfnbutton' data-insert='\\sum_{n\\mathop=0}^{\\infty}'></li>\n                <li class='bigfnbutton' data-insert='\\int_{0}^{\\infty}'></li>\n                <li class='bigfnbutton' data-insert='\\mathop{sign}(#?)' data-latex='\\mathop{sign}()'></li>\n            </ul>\n            <ul><li class='separator'></li>\n                <li class='fnbutton' data-insert='\\tan'></li>\n                <li class='fnbutton' data-insert='\\tan^{-1}'></li>\n                <li class='fnbutton' data-insert='\\log_{#?}'></li>\n                <li class='fnbutton' data-insert='\\sqrt[#?]{#0}'></li>\n                <li class='bigfnbutton' data-insert='#0 \\mod' data-latex='\\mod'></li>\n                <li class='bigfnbutton' data-insert='\\mathop{round}(#?) ' data-latex='\\mathop{round}()'></li>\n                <li class='bigfnbutton' data-insert='\\prod_{n\\mathop=0}^{\\infty}' data-latex='{\\tiny \\prod_{n=0}^{\\infty}}'></li>\n                <li class='bigfnbutton' data-insert='\\frac{\\differentialD #0}{\\differentialD x}'></li>\n                <li class='action font-glyph bottom right' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'>&#x232b;</li></ul>\n            <ul><li class='separator'></li>\n                <li class='fnbutton'>(</li>\n                <li class='fnbutton'>)</li>\n                <li class='fnbutton' data-insert='^{#?} ' data-latex='x^{#?} '></li>\n                <li class='fnbutton' data-insert='_{#?} ' data-latex='x_{#?} '></li>\n                <li class='keycap w20 ' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>"};function latexToMarkup$1(t,e,i){t=t.replace(/(^|[^\\])#@/g,"$1#?");const s=ParserModule.parseTokens(Lexer$1.tokenize(t),"math",e,i.config.macros),a=MathAtom$1.decompose({mathstyle:"displaystyle",macros:i.config.macros},s),n=Span$1.makeSpan(a,"ML__base"),o=Span$1.makeSpan("","ML__strut");o.setStyle("height",n.height,"em");const r=Span$1.makeSpan("","ML__strut--bottom");return r.setStyle("height",n.height+n.depth,"em"),r.setStyle("vertical-align",-n.depth,"em"),Span$1.makeSpan([o,r,n],"ML__mathlive").toMarkup()}function makeKeyboardToolbar(t,e,i){let s="<div class='left'>";const a=e.replace(/\s+/g," ").split(" ");if(a.length>1){const e=Object.assign({},KEYBOARDS,t.config.customVirtualKeyboards||{});for(const t of a){if(!e[t])break;s+="<div class='",t===i?s+="selected ":e[t].command?s+="action ":s+="layer-switch ",s+=(e[t].classes||"")+"'",e[t].tooltip&&(s+="data-tooltip='"+e[t].tooltip+"' ",s+="data-placement='top' data-delay='1s'"),t!==i&&(e[t].command&&(s+="data-command='\""+e[t].command+"\"'"),e[t].layer&&(s+="data-layer='"+e[t].layer+"'")),s+=">"+e[t].label+"</div>"}}return s+="</div>","<div class='keyboard-toolbar' role='toolbar'>"+(s+="\n        <div class='right'>\n            <div class='action'\n                data-command='\"copyToClipboard\"'\n                data-tooltip='Copy to Clipboard' data-placement='top' data-delay='1s'>\n                <svg><use xlink:href='#svg-copy' /></svg>\n            </div>\n            <div class='action disabled'\n                data-command='\"undo\"'\n                data-tooltip='Undo' data-placement='top' data-delay='1s'>\n                <svg><use xlink:href='#svg-undo' /></svg>\n            </div>\n            <div class='action disabled'\n                data-command='\"redo\"'\n                data-tooltip='Redo' data-placement='top' data-delay='1s'>\n                <svg><use xlink:href='#svg-redo' /></svg>\n            </div>\n        </div>\n    ")+"</div>"}function makeKeycap(t,e,i){for(let s=0;s<e.length;++s){const a=e[s];a.getAttribute("data-latex")?a.innerHTML=latexToMarkup$1(a.getAttribute("data-latex").replace(/&quot;/g,'"'),{"?":'{\\color{#555}{\\tiny \\char"2B1A}}'},t):""===a.innerHTML&&a.getAttribute("data-insert")?a.innerHTML=latexToMarkup$1(a.getAttribute("data-insert").replace(/&quot;/g,'"'),{"?":'{\\color{#555}{\\tiny \\char"2B1A}}'},t):a.getAttribute("data-content")&&(a.innerHTML=a.getAttribute("data-content").replace(/&quot;/g,'"')),a.getAttribute("data-aside")&&(a.innerHTML+="<aside>"+a.getAttribute("data-aside").replace(/&quot;/g,'"')+"</aside>"),a.getAttribute("data-classes")&&a.classList.add(a.getAttribute("data-classes"));let n,o=a.getAttribute("data-insert");if(o&&(o=o.replace(/&quot;/g,'"')),o&&SHIFTED_KEYS[o]&&(a.setAttribute("data-shifted",SHIFTED_KEYS[o].label),a.setAttribute("data-shifted-command",JSON.stringify(["insertAndUnshiftKeyboardLayer",SHIFTED_KEYS[o].insert]))),n=a.getAttribute("data-command")?JSON.parse(a.getAttribute("data-command")):a.getAttribute("data-insert")?["insert",a.getAttribute("data-insert"),{focus:!0,feedback:!0}]:a.getAttribute("data-latex")?["insert",a.getAttribute("data-latex"),{focus:!0,feedback:!0}]:["typedText",a.getAttribute("data-key")||a.textContent,{focus:!0,feedback:!0,simulateKeystroke:!0}],i&&(n=[i,n]),a.getAttribute("data-alt-keys")){const t=ALT_KEYS[a.getAttribute("data-alt-keys")];t&&(n={default:n,pressAndHoldStart:["showAlternateKeys",a.getAttribute("data-alt-keys"),t],pressAndHoldEnd:"hideAlternateKeys"})}t._attachButtonHandlers(a,n)}}function expandLayerMarkup(t,e){const i={qwerty:{"lower-1":"qwertyuiop","lower-2":" asdfghjkl ","lower-3":"^zxcvbnm~","upper-1":"QWERTYUIOP","upper-2":" ASDFGHJKL ","upper-3":"^ZXCVBNM~","numpad-1":"789/","numpad-2":"456*","numpad-3":"123-","numpad-4":"0.=+"},azerty:{"lower-1":"azertyuiop","lower-2":"qsdfghjklm","lower-3":"^ wxcvbn ~","upper-1":"AZERTYUIOP","upper-2":"QSDFGHJKLM","upper-3":"^ WXCVBN ~"},qwertz:{"lower-1":"qwertzuiop","lower-2":" asdfghjkl ","lower-3":"^yxcvbnm~","upper-1":"QWERTZUIOP","upper-2":" ASDFGHJKL","upper-3":"^YXCVBNM~"},dvorak:{"lower-1":"^  pyfgcrl ","lower-2":"aoeuidhtns","lower-3":"qjkxbmwvz~","upper-1":"^  PYFGCRL ","upper-2":"AOEUIDHTNS","upper-3":"QJKXBMWVZ~"},colemak:{"lower-1":" qwfpgjluy ","lower-2":"arstdhneio","lower-3":"^zxcvbkm~","upper-1":" QWFPGNLUY ","upper-2":"ARSTDHNEIO","upper-3":"^ZXCVBKM~"}},s=i[t.config.virtualKeyboardLayout]?i[t.config.virtualKeyboardLayout]:i.qwerty;let a,n=e,o=(n=n.replace(/<arrows\/>/g,"\n        <li class='action' data-command='[\"performWithFeedback\",\"moveToPreviousChar\"]'\n            data-shifted='<svg><use xlink:href=\"#svg-angle-double-left\" /></svg>'\n            data-shifted-command='[\"performWithFeedback\",\"extendToPreviousChar\"]'>\n            <svg><use xlink:href='#svg-arrow-left' /></svg>\n        </li>\n        <li class='action' data-command='[\"performWithFeedback\",\"moveToNextChar\"]'\n            data-shifted='<svg><use xlink:href=\"#svg-angle-double-right\" /></svg>'\n            data-shifted-command='[\"performWithFeedback\",\"extendToNextChar\"]'>\n            <svg><use xlink:href='#svg-arrow-right' /></svg>\n        </li>\n        <li class='action' data-command='[\"performWithFeedback\",\"moveToNextPlaceholder\"]'>\n        <svg><use xlink:href='#svg-tab' /></svg></li>")).match(/(<row\s+)(.*)((?:<\/row|\/)>)/);for(;o;){a="";const t=o[2].match(/[a-zA-Z][a-zA-Z0-9-]*=(['"])(.*?)\1/g),e={};for(const i of t){const t=i.match(/([a-zA-Z][a-zA-Z0-9-]*)=(['"])(.*?)\2/);e[t[1]]=t[3]}let r=s[e.name];if(r||(r=i.qwerty[e.name]),r)for(const t of r){let i=e.class||"";i&&(i=" "+i),"~"===t?(a+="<li class='action font-glyph bottom right ",a+=r.length-(r.match(/ /g)||[]).length/2==10?"w10":"w15",a+='\' data-shifted=\'<span class="warning"><svg><use xlink:href="#svg-trash" /></svg></span>\'\n                        data-shifted-command=\'"deleteAll"\'\n                        data-alt-keys=\'delete\' data-command=\'["performWithFeedback","deletePreviousChar"]\'\n                        >&#x232b;</li>'):" "===t?a+="<li class='separator w5'></li>":"^"===t?a+="<li class='shift modifier font-glyph bottom left w15 layer-switch' data-layer='"+e["shift-layer"]+"'>&#x21e7;</li>":"/"===t?a+="<li class='keycap"+i+"' data-alt-keys='/' data-insert='\\frac{#0}{#?}'>&divide;</li>":"*"===t?a+="<li class='keycap"+i+"' data-alt-keys='*' data-insert='\\times '>&times;</li>":"-"===t?a+="<li class='keycap"+i+"' data-alt-keys='*' data-key='-' data-alt-keys='-'>&#x2212;</li>":/tt/.test(i)?a+="<li class='keycap"+i+"' data-alt-keys='"+t+'\' data-command=\'["typedText","'+t+'",{"commandMode":true, "focus":true, "feedback":true}]\'>'+t+"</li>":a+="<li class='keycap"+i+"' data-alt-keys='"+t+"'>"+t+"</li>"}else;o=(n=n.replace(new RegExp(o[1]+o[2]+o[3]),a)).match(/(<row\s+)(.*)((?:<\/row|\/)>)/)}return n}var VirtualKeyboard={make:function(t,e){let i='<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">\n\n            <symbol id="svg-command" viewBox="0 0 640 512">\n                <path d="M34.495 36.465l211.051 211.05c4.686 4.686 4.686 12.284 0 16.971L34.495 475.535c-4.686 4.686-12.284 4.686-16.97 0l-7.071-7.07c-4.686-4.686-4.686-12.284 0-16.971L205.947 256 10.454 60.506c-4.686-4.686-4.686-12.284 0-16.971l7.071-7.07c4.686-4.687 12.284-4.687 16.97 0zM640 468v-10c0-6.627-5.373-12-12-12H300c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h328c6.627 0 12-5.373 12-12z"/>\n            </symbol>\n\n            <symbol id="svg-undo" viewBox="0 0 512 512">\n                <path d="M20 8h10c6.627 0 12 5.373 12 12v110.625C85.196 57.047 165.239 7.715 256.793 8.001 393.18 8.428 504.213 120.009 504 256.396 503.786 393.181 392.834 504 256 504c-63.926 0-122.202-24.187-166.178-63.908-5.113-4.618-5.354-12.561-.482-17.433l7.069-7.069c4.503-4.503 11.749-4.714 16.482-.454C150.782 449.238 200.935 470 256 470c117.744 0 214-95.331 214-214 0-117.744-95.331-214-214-214-82.862 0-154.737 47.077-190.289 116H180c6.627 0 12 5.373 12 12v10c0 6.627-5.373 12-12 12H20c-6.627 0-12-5.373-12-12V20c0-6.627 5.373-12 12-12z"/>\n            </symbol>\n            <symbol id="svg-redo" viewBox="0 0 512 512">\n                <path d="M492 8h-10c-6.627 0-12 5.373-12 12v110.625C426.804 57.047 346.761 7.715 255.207 8.001 118.82 8.428 7.787 120.009 8 256.396 8.214 393.181 119.166 504 256 504c63.926 0 122.202-24.187 166.178-63.908 5.113-4.618 5.354-12.561.482-17.433l-7.069-7.069c-4.503-4.503-11.749-4.714-16.482-.454C361.218 449.238 311.065 470 256 470c-117.744 0-214-95.331-214-214 0-117.744 95.331-214 214-214 82.862 0 154.737 47.077 190.289 116H332c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h160c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12z"/>\n            </symbol>\n            <symbol id="svg-arrow-left" viewBox="0 0 192 512">\n                <path d="M25.1 247.5l117.8-116c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L64.7 256l102.2 100.4c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L25 264.5c-4.6-4.7-4.6-12.3.1-17z"/>\n            </symbol>\n            <symbol id="svg-arrow-right" viewBox="0 0 192 512">\n                    <path d="M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17z"/>\n            </symbol>\n            <symbol id="svg-tab" viewBox="0 0 448 512">\n                    <path d="M32 217.1c0-8.8 7.2-16 16-16h144v-93.9c0-7.1 8.6-10.7 13.6-5.7l143.5 143.1c6.3 6.3 6.3 16.4 0 22.7L205.6 410.4c-5 5-13.6 1.5-13.6-5.7v-93.9H48c-8.8 0-16-7.2-16-16v-77.7m-32 0v77.7c0 26.5 21.5 48 48 48h112v61.9c0 35.5 43 53.5 68.2 28.3l143.6-143c18.8-18.8 18.8-49.2 0-68L228.2 78.9c-25.1-25.1-68.2-7.3-68.2 28.3v61.9H48c-26.5 0-48 21.6-48 48zM436 64h-8c-6.6 0-12 5.4-12 12v360c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12z"/>\n            </symbol>\n            <symbol id="svg-copy" viewBox="0 0 448 512">\n                <path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM352 32.491a15.88 15.88 0 0 1 7.431 4.195l51.882 51.883A15.885 15.885 0 0 1 415.508 96H352V32.491zM288 464c0 8.822-7.178 16-16 16H48c-8.822 0-16-7.178-16-16V144c0-8.822 7.178-16 16-16h80v240c0 26.51 21.49 48 48 48h112v48zm128-96c0 8.822-7.178 16-16 16H176c-8.822 0-16-7.178-16-16V48c0-8.822 7.178-16 16-16h144v72c0 13.2 10.8 24 24 24h72v240z"/>\n            </symbol>\n            <symbol id="svg-angle-double-right" viewBox="0 0 320 512">\n                <path d="M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17zm128-17l-117.8-116c-4.7-4.7-12.3-4.7-17 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17L255.3 256 153.1 356.4c-4.7 4.7-4.7 12.3 0 17l7.1 7.1c4.7 4.7 12.3 4.7 17 0l117.8-116c4.6-4.7 4.6-12.3-.1-17z"/>\n            </symbol>\n            <symbol id="svg-angle-double-left" viewBox="0 0 320 512">\n                <path d="M153.1 247.5l117.8-116c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L192.7 256l102.2 100.4c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L153 264.5c-4.6-4.7-4.6-12.3.1-17zm-128 17l117.8 116c4.7 4.7 12.3 4.7 17 0l7.1-7.1c4.7-4.7 4.7-12.3 0-17L64.7 256l102.2-100.4c4.7-4.7 4.7-12.3 0-17l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0L25 247.5c-4.6 4.7-4.6 12.3.1 17z"/>\n            </symbol>\n            <symbol id="svg-trash" viewBox="0 0 448 512">\n                <path d="M336 64l-33.6-44.8C293.3 7.1 279.1 0 264 0h-80c-15.1 0-29.3 7.1-38.4 19.2L112 64H24C10.7 64 0 74.7 0 88v2c0 3.3 2.7 6 6 6h26v368c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V96h26c3.3 0 6-2.7 6-6v-2c0-13.3-10.7-24-24-24h-88zM184 32h80c5 0 9.8 2.4 12.8 6.4L296 64H152l19.2-25.6c3-4 7.8-6.4 12.8-6.4zm200 432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V96h320v368zm-176-44V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm-80 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm160 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12z"/>\n            </symbol>\n        </svg>\n        ';i+='<div class="alternate-keys"></div>',ALT_KEYS_BASE["foreground-color"]=[];for(const t of Color.LINE_COLORS)ALT_KEYS_BASE["foreground-color"].push({classes:"small-button",content:'<span style="border-radius:50%;width:32px;height:32px; background:'+t+'"></span>',command:'["applyStyle",{"color":"'+t+'"}]'});ALT_KEYS_BASE["background-color"]=[];for(const t of Color.AREA_COLORS)ALT_KEYS_BASE["background-color"].push({classes:"small-button",content:'<span style="border-radius:50%;width:32px;height:32px; background:'+t+'"></span>',command:'["applyStyle",{"backgroundColor":"'+t+'"}]'});ALT_KEYS={},ALT_KEYS=Object.assign({},ALT_KEYS_BASE);for(const t in ALT_KEYS)ALT_KEYS.hasOwnProperty(t)&&(ALT_KEYS[t]=ALT_KEYS[t].slice());const s="abcdefghijklmnopqrstuvwxyz";for(let t=0;t<26;t++){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[t];ALT_KEYS[e]||(ALT_KEYS[e]=[]),ALT_KEYS[e].unshift({latex:"\\mathbb{"+e+"}",aside:"blackboard",insert:"\\mathbb{"+e+"}"}),ALT_KEYS[e].unshift({latex:"\\mathbf{"+e+"}",aside:"bold",insert:"\\mathbf{"+e+"}"}),ALT_KEYS[e].unshift({latex:"\\mathsf{"+e+"}",aside:"sans",insert:"\\mathsf{"+e+"}"}),ALT_KEYS[e].unshift({latex:"\\mathtt{"+e+"}",aside:"monospace",insert:"\\mathtt{"+e+"}"}),ALT_KEYS[e].unshift({latex:"\\mathcal{"+e+"}",aside:"script",insert:"\\mathcal{"+e+"}"}),ALT_KEYS[e].unshift({latex:"\\mathfrak{"+e+"}",aside:"fraktur",insert:"\\mathfrak{"+e+"}"}),ALT_KEYS[e].unshift({latex:"\\mathbb{"+s[t]+"}",aside:"blackboard",insert:"\\mathbb{"+s[t]+"}"}),ALT_KEYS[e].unshift({latex:"\\mathbf{"+s[t]+"}",aside:"bold",insert:"\\mathbf{"+s[t]+"}"}),ALT_KEYS[e].unshift({latex:"\\mathsf{"+s[t]+"}",aside:"sans",insert:"\\mathsf{"+s[t]+"}"}),ALT_KEYS[e].unshift({latex:"\\mathcal{"+s[t]+"}",aside:"script",insert:"\\mathcal{"+s[t]+"}"}),ALT_KEYS[e].unshift({latex:"\\mathfrak{"+s[t]+"}",aside:"fraktur",insert:"\\mathfrak{"+s[t]+"}"})}for(let t=0;t<=26;t++){const e=s[t];ALT_KEYS[e]||(ALT_KEYS[e]=[]),ALT_KEYS[e].unshift({latex:"\\mathsf{"+e+"}",aside:"sans",insert:"\\mathbb{"+e+"}"}),ALT_KEYS[e].unshift({latex:"\\mathbf{"+e+"}",aside:"bold",insert:"\\mathbf{"+e+"}"}),ALT_KEYS[e].unshift({latex:"\\mathtt{"+e+"}",aside:"monospace",insert:"\\mathtt{"+e+"}"}),ALT_KEYS[e].unshift({latex:"\\mathfrak{"+e+"}",aside:"fraktur",insert:"\\mathfrak{"+e+"}"})}for(let t=0;t<10;t++){const e="0123456789"[t];ALT_KEYS[e]||(ALT_KEYS[e]=[]),ALT_KEYS[e].unshift({latex:"\\mathbf{"+e+"}",aside:"bold",insert:"\\mathbf{"+e+"}"}),ALT_KEYS[e].unshift({latex:"\\mathsf{"+e+"}",aside:"sans",insert:"\\mathsf{"+e+"}"}),ALT_KEYS[e].unshift({latex:"\\mathtt{"+e+"}",aside:"monospace",insert:"\\mathtt{"+e+"}"}),ALT_KEYS[e].unshift({latex:"\\mathcal{"+e+"}",aside:"script",insert:"\\mathcal{"+e+"}"}),ALT_KEYS[e].unshift({latex:"\\mathfrak{"+e+"}",aside:"fraktur",insert:"\\mathfrak{"+e+"}"})}let a=t.config.virtualKeyboards;a||(a="all"),a=a.replace(/\ball\b/i,"numeric roman greek functions command");const n=Object.assign({},LAYERS,t.config.customVirtualKeyboardLayers||{}),o=Object.assign({},KEYBOARDS,t.config.customVirtualKeyboards||{}),r=a.replace(/\s+/g," ").split(" ");for(const e of r){if(!o[e])break;let s=o[e].layers||[];o[e].layer&&s.push(o[e].layer),s=Array.from(new Set(s));for(const o of s){if(!n[o])break;if("object"==typeof n[o]){let t="";if(n[o].styles&&(t+=`<style>${n[o].styles}</style>`),n[o].backdrop&&(t+=`<div class='${n[o].backdrop}'>`),n[o].container&&(t+=`<div class='${n[o].container}'>`),n[o].rows){t+="<div class='rows'>";for(const e of n[o].rows){t+="<ul>";for(const i of e)t+="<li",i.class&&(t+=` class="${i.class}"`),i.key&&(t+=` data-key="${i.key}"`),i.command&&(t+=` data-command='"${i.command}"'`),i.insert&&(t+=` data-insert="${i.insert}"`),i.latex&&(t+=` data-latex="${i.latex}"`),i.aside&&(t+=` data-aside="${i.aside}"`),i.altKeys&&(t+=` data-alt-keys="${i.altKeys}"`),i.shifted&&(t+=` data-shifted="${i.shifted}"`),i.shiftedCommand&&(t+=` data-shifted-command="${i.shiftedCommand}"`),t+=`>${i.label?i.label:""}</li>`;t+="</ul>"}t+="</div>",n[o].container&&(t+="</div'>"),n[o].backdrop&&(t+="</div'>")}n[o]=t}i+="<div class='keyboard-layer' id='"+o+"'>",i+=makeKeyboardToolbar(t,a,e);const s="function"==typeof n[o]?n[o]():n[o];i+=expandLayerMarkup(t,s),i+="</div>"}}const l=document.createElement("div");l.id="ML__keyboard",e?l.classList.add(e):t.config.virtualKeyboardTheme?l.classList.add(t.config.virtualKeyboardTheme):/android|cros/i.test(navigator.userAgent)&&l.classList.add("material"),l.innerHTML=i,makeKeycap(t,l.querySelectorAll(".keycap, .action, .fnbutton, .bigfnbutton"));const h=l.getElementsByClassName("layer-switch");for(let e=0;e<h.length;++e)h[e].classList.contains("shift")?t._attachButtonHandlers(h[e],{pressed:["shiftKeyboardLayer","shift"],default:["switchKeyboardLayer",h[e].getAttribute("data-layer")],pressAndHoldEnd:"unshiftKeyboardLayer"}):t._attachButtonHandlers(h[e],{default:["switchKeyboardLayer",h[e].getAttribute("data-layer")]});return l.getElementsByClassName("keyboard-layer")[0].classList.add("is-visible"),window.addEventListener("mouseup",function(){t.hideAlternateKeys_(),t.unshiftKeyboardLayer_()}),window.addEventListener("blur",function(){t.hideAlternateKeys_(),t.unshiftKeyboardLayer_()}),window.addEventListener("touchend",function(){t.hideAlternateKeys_(),t.unshiftKeyboardLayer_()}),window.addEventListener("touchcancel",function(){t.hideAlternateKeys_(),t.unshiftKeyboardLayer_()}),l},makeKeycap:makeKeycap};const SPECIAL_OPERATORS={"\\pm":"&PlusMinus;","\\times":"&times;","\\colon":":","\\vert":"|","\\Vert":"â¥","\\mid":"â£","\\lbrace":"{","\\rbrace":"}","\\langle":"â¨","\\rangle":"â©","\\lfloor":"â","\\rfloor":"â","\\lceil":"â","\\rceil":"â","\\vec":"&#x20d7;","\\acute":"&#x00b4;","\\grave":"&#x0060;","\\dot":"&#x02d9;","\\ddot":"&#x00a8;","\\tilde":"&#x007e;","\\bar":"&#x00af;","\\breve":"&#x02d8;","\\check":"&#x02c7;","\\hat":"&#x005e;"};function xmlEscape(t){return t.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function makeID$1(t,e){return t&&e.generateID?' extid="'+t+'"':""}function scanIdentifier(t,e,i){let s=!1;e=e||t.atoms.length;let a="",n="",o=-1,r=-1;const l=t.atoms[t.index];return t.index<e&&("mord"===l.type||"textord"===l.type)&&"0123456789,.".indexOf(l.latex)<0&&(n=l.toMathML(i),l.superscript&&(o=t.index),l.subscript&&(r=t.index),t.index+=1),n.length>0&&(s=!0,isSuperscriptAtom(t)&&(o=t.index,t.index+=1),isSubscriptAtom(t)&&(r=t.index,t.index+=1),o>=0&&r>=0?(a="<msubsup>"+n,a+=toMathML(t.atoms[r].subscript,0,0,i).mathML,a+=toMathML(t.atoms[o].superscript,0,0,i).mathML,a+="</msubsup>"):o>=0?(a="<msup>"+n,a+=toMathML(t.atoms[o].superscript,0,0,i).mathML,a+="</msup>"):r>=0?(a="<msub>"+n,a+=toMathML(t.atoms[r].subscript,0,0,i).mathML,a+="</msub>"):a=n,"mi"!==t.lastType&&"mn"!==t.lastType&&"fence"!==t.lastType||/^<mo>(.*)<\/mo>$/.test(a)||(a="<mo>&InvisibleTimes;</mo>"+a),n.endsWith(">f</mi>")||n.endsWith(">g</mi>")?(a+="<mo> &ApplyFunction; </mo>",t.lastType="applyfunction"):t.lastType=/^<mo>(.*)<\/mo>$/.test(a)?"mo":"mi",t.mathML+=a),s}function isSuperscriptAtom(t){return t.index<t.atoms.length&&t.atoms[t.index].superscript&&"msubsup"===t.atoms[t.index].type}function isSubscriptAtom(t){return t.index<t.atoms.length&&t.atoms[t.index].subscript&&"msubsup"===t.atoms[t.index].type}function scanNumber(t,e,i){let s=!1;e=e||t.atoms.length;const a=t.index;let n="",o=function(t){let e=-1,i=t.index,s=!1,a=!1;for(;i<t.atoms.length&&!s&&!a;)a=!(s="mord"!==t.atoms[i].type||"0123456789,.".indexOf(t.atoms[i].latex)<0)&&t.atoms[i].superscript,i++;return a&&(e=i),e}(t);for(o>=0&&o<e&&(e=o);t.index<e&&"mord"===t.atoms[t.index].type&&"0123456789,.".indexOf(t.atoms[t.index].latex)>=0;)n+=t.atoms[t.index].latex,t.index+=1;return n.length>0&&(s=!0,n="<mn"+makeID$1(t.atoms[a].id,i)+">"+n+"</mn>",o<0&&isSuperscriptAtom(t)&&(o=t.index,t.index+=1),o>=0&&(n="<msup>"+n,n+=toMathML(t.atoms[o].superscript,0,0,i).mathML,n+="</msup>"),t.mathML+=n,t.lastType="mn"),s}function scanFence(t,e,i){let s=!1;e=e||t.atoms.length;let a="",n="";if(t.index<e&&"mopen"===t.atoms[t.index].type){let o=!1,r=0;const l=t.index;let h=-1,c=l+1;for(;c<e&&!o;)"mopen"===t.atoms[c].type?r+=1:"mclose"===t.atoms[c].type&&(r-=1),-1===r&&(o=!0,h=c),c+=1;o&&(a="<mrow>",a+=toMo(t.atoms[l],i),a+=toMathML(t.atoms,l+1,h,i).mathML,a+=toMo(t.atoms[h],i),a+="</mrow>","mi"!==t.lastType&&"mn"!==t.lastType&&"mfrac"!==t.lastType&&"fence"!==t.lastType||(a="<mo>&InvisibleTimes;</mo>"+a),t.index=h+1,function(t,e,i){let s=!1,a="",n=e.atoms[e.index-1];return!!n&&(n.superscript||n.subscript||(isSuperscriptAtom(e)||isSubscriptAtom(e))&&(n=e.atoms[e.index],e.index+=1),!!n&&(n.superscript&&n.subscript?(a="<msubsup>"+t,a+=toMathML(n.subscript,0,0,i).mathML,a+=toMathML(n.superscript,0,0,i).mathML,a+="</msubsup>"):n.superscript?(a="<msup>"+t,a+=toMathML(n.superscript,0,0,i).mathML,a+="</msup>"):n.subscript&&(a="<msub>"+t,a+=toMathML(n.subscript,0,0,i).mathML,a+="</msub>"),a.length>0&&(s=!0,e.mathML+=a,e.lastType=""),s))}(a,t,i)&&(s=!0,t.lastType="",a=""),n="fence")}return a.length>0&&(s=!0,t.mathML+=a,t.lastType=n),s}function scanOperator(t,e,i){let s=!1;e=e||t.atoms.length;let a="",n="";const o=t.atoms[t.index];if(t.index<e&&("mbin"===o.type||"mrel"===o.type))a+=t.atoms[t.index].toMathML(i),t.index+=1,n="mo";else if(t.index<e&&"mop"===o.type){if(o.limits&&(o.superscript||o.subscript)){const t=toMo(o,i);o.superscript&&o.subscript?(a+=("nolimits"!==o.limits?"<munderover>":"<msubsup>")+t,a+=toMathML(o.subscript,0,0,i).mathML,a+=toMathML(o.superscript,0,0,i).mathML,a+="nolimits"!==o.limits?"</munderover>":"</msubsup>"):o.superscript?(a+=("nolimits"!==o.limits?"<mover>":"<msup>")+t,a+=toMathML(o.superscript,0,0,i).mathML,a+="nolimits"!==o.limits?"</mover>":"</msup>"):(a+=("nolimits"!==o.limits?"<munder>":"<msub>")+t,a+=toMathML(o.subscript,0,0,i).mathML,a+="nolimits"!==o.limits?"</munder>":"</msub>"),n="mo"}else{const e=toMo(t.atoms[t.index],i);a+=e,/^<mo>(.*)<\/mo>$/.test(e)?n="mo":(a+="<mo> &ApplyFunction; </mo>",n="applyfunction")}"mi"!==t.lastType&&"mn"!==t.lastType||/^<mo>(.*)<\/mo>$/.test(a)||(a="<mo>&InvisibleTimes;</mo>"+a),t.index+=1}return a.length>0&&(s=!0,t.mathML+=a,t.lastType=n),s}function toMathML(t,e,i,s){const a={atoms:t,index:e||0,mathML:"",lastType:""};if(i=i||(t?t.length:0),"number"==typeof t||"boolean"==typeof t)a.mathML=t.toString();else if("string"==typeof t)a.mathML=t;else if(t&&"function"==typeof t.toMathML)a.mathML=t.toMathML(s);else if(Array.isArray(t)){let t=0;for(;a.index<i;)if(scanNumber(a,i,s)||scanIdentifier(a,i,s)||scanOperator(a,i,s)||scanFence(a,i,s))t+=1;else if(a.index<i){let e=a.atoms[a.index].toMathML(s);"mn"===a.lastType&&e.length>0&&"genfrac"===a.atoms[a.index].type&&(e="<mo>&#x2064;</mo>"+e),"genfrac"===a.atoms[a.index].type?a.lastType="mfrac":a.lastType="",e.length>0&&(a.mathML+=e,t+=1),a.index+=1}t>1&&(a.mathML="<mrow>"+a.mathML+"</mrow>")}return a}function toMo(t,e){let i="";const s=toString$1(t.body);return s&&(i="<mo"+makeID$1(t.id,e)+">"+s+"</mo>"),i}function toString$1(t){if(!t)return"";if("string"==typeof t)return xmlEscape(t);if(!Array.isArray(t)&&"string"==typeof t.body)return xmlEscape(t.body);let e="";for(const i of t)"string"==typeof i.body&&(e+=i.body);return xmlEscape(e)}MathAtom$1.MathAtom.prototype.toMathML=function(t){const e={"\\exponentialE":"&ExponentialE;","\\imaginaryI":"&ImaginaryI;","\\differentialD":"&DifferentialD;","\\capitalDifferentialD":"&CapitalDifferentialD;","\\alpha":"&alpha;","\\pi":"&pi;","\\infty":"&infin;","\\forall":"&forall;","\\nexists":"&nexists;","\\exists":"&exist;","\\hbar":"â","\\cdotp":"â","\\ldots":"â¦","\\cdots":"â¯","\\ddots":"â±","\\vdots":"â®","\\ldotp":"."},i={"\\!":-3/18,"\\ ":6/18,"\\,":3/18,"\\:":4/18,"\\;":5/18,"\\enspace":.5,"\\quad":1,"\\qquad":2,"\\enskip":.5};let s,a,n,o,r,l,h="",c="",d={mathbb:"double-struck",mathbf:"bold",mathcal:"script",mathfrak:"fraktur",mathscr:"script",mathsf:"sans-serif",mathtt:"monospace"}[this.fontFamily||this.font]||"";d&&(d=' mathvariant="'+d+'"');const m=this.latex?this.latex.trim():null;let p;switch(this.type){case"group":case"root":h=toMathML(this.body,0,0,t).mathML;break;case"array":if((this.lFence&&"."!==this.lFence||this.rFence&&"."!==this.rFence)&&(h+="<mrow>",this.lFence&&"."!==this.lFence&&(h+="<mo>"+(SPECIAL_OPERATORS[this.lFence]||this.lFence)+"</mo>")),h+="<mtable",this.colFormat){for(h+=' columnalign="',n=0;n<this.colFormat.length;n++)this.colFormat[n].align&&(h+={l:"left",c:"center",r:"right"}[this.colFormat[n].align]+" ");h+='"'}for(h+=">",a=0;a<this.array.length;a++){for(h+="<mtr>",s=0;s<this.array[a].length;s++)h+="<mtd>"+toMathML(this.array[a][s],0,0,t).mathML+"</mtd>";h+="</mtr>"}h+="</mtable>",(this.lFence&&"."!==this.lFence||this.rFence&&"."!==this.rFence)&&(this.rFence&&"."!==this.rFence&&(h+="<mo>"+(SPECIAL_OPERATORS[this.lFence]||this.rFence)+"</mo>"),h+="</mrow>");break;case"genfrac":(this.leftDelim||this.rightDelim)&&(h+="<mrow>"),this.leftDelim&&"."!==this.leftDelim&&(h+="<mo"+makeID$1(this.id,t)+">"+(SPECIAL_OPERATORS[this.leftDelim]||this.leftDelim)+"</mo>"),this.hasBarLine?(h+="<mfrac>",h+=toMathML(this.numer,0,0,t).mathML||"<mi>&nbsp;</mi>",h+=toMathML(this.denom,0,0,t).mathML||"<mi>&nbsp;</mi>",h+="</mfrac>"):(h+="<mtable"+makeID$1(this.id,t)+">",h+="<mtr>"+toMathML(this.numer,0,0,t).mathML+"</mtr>",h+="<mtr>"+toMathML(this.denom,0,0,t).mathML+"</mtr>",h+="</mtable>"),this.rightDelim&&"."!==this.rightDelim&&(h+="<mo"+makeID$1(this.id,t)+">"+(SPECIAL_OPERATORS[this.rightDelim]||this.rightDelim)+"</mo>"),(this.leftDelim||this.rightDelim)&&(h+="</mrow>");break;case"surd":this.index?(h+="<mroot"+makeID$1(this.id,t)+">",h+=toMathML(this.body,0,0,t).mathML,h+=toMathML(this.index,0,0,t).mathML,h+="</mroot>"):(h+="<msqrt"+makeID$1(this.id,t)+">",h+=toMathML(this.body,0,0,t).mathML,h+="</msqrt>");break;case"leftright":h="<mrow>",this.leftDelim&&"."!==this.leftDelim&&(h+="<mo"+makeID$1(this.id,t)+">"+(SPECIAL_OPERATORS[this.leftDelim]||this.leftDelim)+"</mo>"),this.body&&(h+=toMathML(this.body,0,0,t).mathML),this.rightDelim&&"."!==this.rightDelim&&(h+="<mo"+makeID$1(this.id,t)+">"+(SPECIAL_OPERATORS[this.rightDelim]||this.rightDelim)+"</mo>"),h+="</mrow>";break;case"sizeddelim":case"delim":h+='<mo separator="true"'+makeID$1(this.id,t)+">"+(SPECIAL_OPERATORS[this.delim]||this.delim)+"</mo>";break;case"font":"\\text"===m||"\\textrm"===m||"\\textsf"===m||"\\texttt"===m||"\\textnormal"===m||"\\textbf"===m||"\\textit"===m?(h+="<mtext"+d+makeID$1(this.id,t)+">",h+=toString$1(this.body).replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;"),h+="</mtext>"):h+="<mi"+d+">"+toString$1(this.body)+"</mi>";break;case"accent":h+='<mover accent="true"'+makeID$1(this.id,t)+">",h+=toMathML(this.body,0,0,t).mathML,h+="<mo>"+(SPECIAL_OPERATORS[m]||this.accent)+"</mo>",h+="</mover>";break;case"line":case"overlap":break;case"overunder":r=this.overscript,o=this.underscript,r&&o?l=this.body:r?(l=this.body,this.body[0]&&this.body[0].underscript?(o=this.body[0].underscript,l=this.body[0].body):this.body[0]&&"first"===this.body[0].type&&this.body[1]&&this.body[1].underscript&&(o=this.body[1].underscript,l=this.body[1].body)):o&&(l=this.body,this.body[0]&&this.body[0].overscript?(r=this.body[0].overscript,l=this.body[0].body):this.body[0]&&"first"===this.body[0].type&&this.body[1]&&this.body[1].overscript&&(r=this.body[1].overscript,l=this.body[1].body)),r&&o?(h+="<munderover"+d+makeID$1(this.id,t)+">"+toMathML(l,0,0,t).mathML,h+=toMathML(o,0,0,t).mathML,h+=toMathML(r,0,0,t).mathML,h+="</munderover>"):r?(h+="<mover"+d+makeID$1(this.id,t)+">"+toMathML(l,t).mathML,h+=toMathML(r,0,0,t).mathML,h+="</mover>"):o&&(h+="<munder"+d+makeID$1(this.id,t)+">"+toMathML(l,t).mathML,h+=toMathML(o,0,0,t).mathML,h+="</munder>");break;case"mord":h=e[m]||m||("string"==typeof this.body?this.body:""),(p=m?m.match(/[{]?\\char"([0-9abcdefABCDEF]*)[}]?/):null)?h="&#x"+p[1]+";":h.length>0&&"\\"===h.charAt(0)&&(h="string"==typeof this.body&&this.body.charCodeAt(0)>255?"&#x"+("000000"+this.body.charCodeAt(0).toString(16)).substr(-4)+";":"string"==typeof this.body?this.body.charAt(0):this.latex),h="<mi"+d+makeID$1(this.id,t)+">"+xmlEscape(h)+"</mi>";break;case"mbin":case"mrel":case"textord":case"minner":h=m&&e[m]?"<mi"+makeID$1(this.id,t)+">"+e[m]+"</mi>":m&&SPECIAL_OPERATORS[m]?"<mo"+makeID$1(this.id,t)+">"+SPECIAL_OPERATORS[m]+"</mo>":toMo(this,t);break;case"mpunct":h='<mo separator="true"'+makeID$1(this.id,t)+">"+(SPECIAL_OPERATORS[m]||m)+"</mo>";break;case"mop":"â"!==this.body&&(h="<mo"+makeID$1(this.id,t)+">",h+="\\operatorname"===m?this.body:m||this.body,h+="</mo>");break;case"color":this.textcolor&&(h+='<mstyle color="'+Color.stringToColor(this.textcolor)+'"',h+=makeID$1(this.id,t)+">",h+=toMathML(this.body,0,0,t).mathML,h+="</mstyle>");break;case"mathstyle":break;case"box":h='<menclose notation="box"',this.backgroundcolor&&(h+=' mathbackground="'+Color.stringToColor(this.backgroundcolor)+'"'),h+=makeID$1(this.id,t)+">"+toMathML(this.body,0,0,t).mathML+"</menclose>";break;case"spacing":h+='<mspace width="'+(i[m]||0)+'em"/>';break;case"enclose":h='<menclose notation="';for(const t in this.notation)this.notation.hasOwnProperty(t)&&this.notation[t]&&(h+=c+t,c=" ");h+=makeID$1(this.id,t)+'">'+toMathML(this.body,0,0,t).mathML+"</menclose>";break;case"sizing":break;case"space":h+="&nbsp;"}return h},MathAtom$1.toMathML=function(t,e){return toMathML(t,0,0,e).mathML};const CANONICAL_NAMES={"\\imaginaryI":"â","\\imaginaryJ":"â","\\pi":"Ï","\\exponentialE":"â¯","ï¹¢":"+","ï¼":"+","â":"-","-":"-","ï¹£":"-","ï¼":"-","\\times":"*","â¨":"*","ï¸â":"*","ï¸Ã":"*",".":"*","Ã·":"/","â":"/","ï¼":"/","!":"factorial","ï¸\\pm":"plusminus","\\mp":"minusplus","\\land":"and","\\wedge":"and","\\lor":"or","\\vee":"or","\\oplus":"xor","\\veebar":"xor","\\lnot":"not","\\neg":"not","\\exists":"exists","\\nexists":"!exists","\\forall":"forAll","\\backepsilon":"suchThat","\\therefore":"therefore","\\because":"because","\\nabla":"nabla","\\circ":"circle","\\ominus":"ominus","\\odot":"odot","\\otimes":"otimes","\\zeta":"Zeta","\\Gamma":"Gamma","\\min":"min","\\max":"max","\\mod":"mod","\\lim":"lim","\\sum":"sum","\\prod":"prod","\\int":"integral","\\iint":"integral2","\\iiint":"integral3","\\Re":"Re","\\gothicCapitalR":"Re","\\Im":"Im","\\gothicCapitalI":"Im","\\binom":"nCr","\\partial":"partial","\\differentialD":"differentialD","\\capitalDifferentialD":"capitalDifferentialD","\\Finv":"Finv","\\Game":"Game","\\wp":"wp","\\ast":"ast","\\star":"star","\\asymp":"asymp","\\to":"to","\\gets":"gets","\\rightarrow":"shortLogicalImplies","\\leftarrow":"shortLogicalImpliedBy","\\leftrightarrow":"shortLogicalEquivalent","\\longrightarrow":"logicalImplies","\\longleftarrow":"logicalImpliedBy","\\longleftrightarrow":"logicalEquivalent","\\Rightarrow":"shortImplies","\\Leftarrow":"shortImpliedBy","\\Leftrightarrow":"shortEquivalent","\\implies":"implies","\\Longrightarrow":"implies","\\impliedby":"impliedBy","\\Longleftarrow":"impliedBy","\\iff":"equivalent","\\Longleftrightarrow":"equivalent"},FUNCTION_TEMPLATE={sin:"\\sin%_%^ %",cos:"\\cos%_%^ %",tan:"\\tan%_%^ %",cot:"\\cot%_%^ %",sec:"\\sec%_%^ %",csc:"\\csc%_%^ %",sinh:"\\sinh %",cosh:"\\cosh %",tanh:"\\tanh %",csch:"\\csch %",sech:"\\sech %",coth:"\\coth %",arcsin:"\\arcsin %",arccos:"\\arccos %",arctan:"\\arctan %",arccot:"\\arcctg %",arcsec:"\\arcsec %",arccsc:"\\arccsc %",arsinh:"\\arsinh %",arcosh:"\\arcosh %",artanh:"\\artanh %",arcsch:"\\arcsch %",arsech:"\\arsech %",arcoth:"\\arcoth %",ln:"\\ln%_%^ %",log:"\\log%_%^ %",lg:"\\lg %",lb:"\\lb %",sum:"\\sum%_%^ %",Zeta:"\\zeta%_%^ %",Gamma:"\\Gamma %",min:"\\min%_%^ %",max:"\\max%_%^ %",mod:"\\mod%_%^ %",lim:"\\lim%_%^ %",binom:"\\binom %",nabla:"\\nabla %",curl:"\\nabla\\times %",div:"\\nabla\\cdot %",floor:"\\lfloor % \\rfloor%_%^",ceil:"\\lceil % \\rceil%_%^",abs:"\\vert % \\vert%_%^",norm:"\\lVert % \\rVert%_%^",ucorner:"\\ulcorner % \\urcorner%_%^",lcorner:"\\llcorner % \\lrcorner%_%^",angle:"\\langle % \\rangle%_%^",group:"\\lgroup % \\rgroup%_%^",moustache:"\\lmoustache % \\rmoustache%_%^",brace:"\\lbrace % \\rbrace%_%^",sqrt:"\\sqrt[%^]{%}",lcm:"\\mathop{lcm}%",gcd:"\\mathop{gcd}%",erf:"\\mathop{erf}%",erfc:"\\mathop{erfc}%",randomReal:"\\mathop{randomReal}%",randomInteger:"\\mathop{randomInteger}%","*":"%0 \\times %1",and:"%0 \\land %1",or:"%0 \\lor %1",xor:"%0 \\oplus %1",not:"%0 \\lnot %1",circle:"%0 \\circ %1",ast:"%0 \\ast %1",star:"%0 \\star %1",asymp:"%0 \\asymp %1","/":"\\frac{%0}{%1}",Re:"\\Re{%}",Im:"\\Im{%}",factorial:"%!",factorial2:"%!!"},OP_PRECEDENCE={degree:880,nabla:740,curl:740,partial:740,differentialD:740,capitalDifferentialD:740,odot:710,not:680,div:660,solidus:660,"/":660,setminus:650,"%":640,otimes:410,union:350,intersection:350,"*":390,ast:390,".":390,oplus:300,ominus:300,"+":275,"-":275,"+-":275,"-+":275,circle:265,circledast:265,circledcirc:265,star:265,"..":263,to:262,in:262,"=":260,"!=":255,approx:247,"<":245,">":243,"â¥":242,"â¤":241,complement:240,subset:240,superset:240,elementof:240,"!elementof":240,exists:230,"!exists":230,forall:230,and:200,xor:195,or:190,suchThat:110,":":100,":=":80,therefore:70,because:70,shortLogicalImplies:52,shortImplies:51,logicalImplies:50,implies:49,shortLogicalImpliedBy:48,shortImpliedBy:47,logicalImpliedBy:46,impliedBy:45,shortLogicalEquivalent:44,shortEquivalent:43,logicalEquivalent:42,equivalent:41,",":40,";":30};function getAssociativity(t){return/=|=>/.test(t)?"right":"left"}function isFunction(t){if("f"===t||"g"===t)return!0;let e=FUNCTION_TEMPLATE[t];return!!e&&(e=e.replace("%0","").replace("%1",""),!!/%/.test(e))}function getCanonicalName(t){t=(t||"").trim();let e=CANONICAL_NAMES[t];if(!e)if("\\"===t.charAt(0)){const i=Definitions.getInfo(t,"math",{});e=i&&"error"!==i.type&&i.value||t.slice(1)}else e=t;return e}function opPrec(t){if(!t)return null;const e=getCanonicalName(getString$1(t)),i={prec:(s=e,s&&OP_PRECEDENCE[s]||-1),assoc:getAssociativity(e)};var s;return i.prec<=0?null:i}function isOperator(t){return null!==opPrec(t)}const DELIM_FUNCTION={"\\lfloor\\rfloor":"floor","\\lceil\\rceil":"ceil","\\vert\\vert":"abs","\\lvert\\rvert":"abs","||":"abs","\\Vert\\Vert":"norm","\\lVert\\rVert":"norm","\\ulcorner\\urcorner":"ucorner","\\llcorner\\lrcorner":"lcorner","\\langle\\rangle":"angle","\\lgroup\\rgroup":"group","\\lmoustache\\rmoustache":"moustache","\\lbrace\\rbrace":"brace"},POSTFIX_FUNCTION={"!":"factorial","\\dag":"dagger","\\dagger":"dagger","\\ddager":"dagger2","\\maltese":"maltese","\\backprime":"backprime","\\backdoubleprime":"backprime2","\\prime":"prime","\\doubleprime":"prime2","\\$":"$","\\%":"%","\\_":"_","\\degree":"degree"},ASSOCIATIVE_FUNCTION={"+":"+","-":"+","*":"*",",":"list",";":"list2",and:"and",or:"or",xor:"xor",union:"union",shortLogicalEquivalent:"logicalEquivalent",logicalEquivalent:"logicalEquivalent",shortEquivalent:"equivalent",equivalent:"equivalent"},SUPER_ASSOCIATIVE_FUNCTION={",":"list",";":"list2"};function getString$1(t){if(t.latex&&"\\mathop "!==t.latex&&"\\mathbin "!==t.latex&&"\\mathrel "!==t.latex&&"\\mathopen "!==t.latex&&"\\mathpunct "!==t.latex&&"\\mathord "!==t.latex&&"\\mathinner "!==t.latex&&"font"!==t.type)return t.latex.trim();if("leftright"===t.type)return"";if("string"==typeof t.body)return t.body;if(Array.isArray(t.body)){let e="";for(const i of t.body)e+=getString$1(i);return e}return""}function isAtom(t,e,i){let s=!1;const a=t.atoms[t.index];return a&&a.type===e&&(s=void 0===i||getString$1(a)===i),s}function negate(t){return"number"==typeof t?-t:t&&"number"==typeof t.num?(t.num=-t.num,t):{op:"-",lhs:t}}function parseSupsub(t,e){let i=t.atoms[t.index-1];return i&&(i.superscript||i.subscript)||(i=null),i||(i=t.atoms[t.index],isAtom(t,"msubsup")&&(i.superscript||i.subscript)?t.index+=1:i=null),i&&("string"==typeof t.ast?t.ast={sym:t.ast}:"number"==typeof t.ast?t.ast={num:t.ast}:t.ast.group||t.ast.fn||t.ast.sym||(t.ast={group:t.ast}),i.subscript&&(t.ast.sub=parse(i.subscript,e)),i.superscript&&(t.ast.sup=parse(i.superscript,e))),t}function parsePostfix(t,e){const i=t.atoms[t.index],s=t.ast,a=parseDigraph(t);if(a)t.ast={op:a.ast,lhs:s},t=parsePostfix(t=parseSupsub(t,e),e);else if(i&&i.latex&&i.latex.match(/\^{.*}/)){t.index+=1,"string"==typeof t.ast?t.ast={sym:t.ast}:"number"==typeof t.ast?t.ast={num:t.ast}:t.ast.group||t.ast.fn||t.ast.sym||(t.ast={group:t.ast});const e=i.latex.match(/\^{(.*)}/)[1],s=parseInt(e);isNaN(s)?t.ast.sup=e:t.ast.sup=s}else i&&"textord"===i.type&&POSTFIX_FUNCTION[i.latex.trim()]&&(t.index+=1,t.ast={fn:POSTFIX_FUNCTION[i.latex.trim()],arg:s},t=parsePostfix(t=parseSupsub(t,e),e));return t}function parseDelim(t,e,i,s){if(t.index=t.index||0,0===t.atoms.length||t.index>=t.atoms.length)return t.ast=void 0,t;const a=t.minPrec;t.minPrec=0;let n=t.atoms[t.index];if(!e){let s=!0;return"mopen"===n.type?(e=n.latex.trim(),i=Definitions.RIGHT_DELIM[e]):"sizeddelim"===n.type?(e=n.delim,i=Definitions.RIGHT_DELIM[e]):"leftright"===n.type?(s=!1,e=n.leftDelim,i=n.rightDelim):"textord"===n.type&&(e=n.latex.trim(),i=Definitions.RIGHT_DELIM[e]),e&&i&&(t=parseDelim(t,e,i))?(s&&(t.index+=1),t.ast={fn:DELIM_FUNCTION[e+i]||e+i,arg:t.ast},t.minPrec=a,t):void 0}if("mopen"===n.type&&getString$1(n)===e)t.index+=1,(n=(t=parseExpression(t,s)).atoms[t.index])&&"mclose"===n.type&&getString$1(n)===i&&(t.index+=1,t=parsePostfix(t=parseSupsub(t,s),s));else if("textord"===n.type&&getString$1(n)===e)t.index+=1,(n=(t=parseExpression(t,s)).atoms[t.index])&&"textord"===n.type&&getString$1(n)===i&&(t.index+=1,t=parsePostfix(t=parseSupsub(t,s),s));else if("sizeddelim"===n.type&&n.delim===e)t.index+=1,(n=(t=parseExpression(t,s)).atoms[t.index])&&"sizeddelim"===n.type&&n.delim===i&&(t.index+=1,t=parsePostfix(t=parseSupsub(t,s),s));else{if("leftright"!==n.type||n.leftDelim!==e||"?"!==n.rightDelim&&n.rightDelim!==i)return;t.ast=parse(n.body,s),t.index+=1,t=parsePostfix(t=parseSupsub(t,s),s)}return t.minPrec=a,t}function parseDigraph(t){if(t.index=t.index||0,!(0===t.atoms.length||t.index>=t.atoms.length))if(isAtom(t,"textord","\\nabla")){if(t.index+=1,isAtom(t,"mbin","\\times"))return t.index+=1,t.ast="curl",t;if(isAtom(t,"mbin","\\cdot"))return t.index+=1,t.ast="div",t;t.index-=1}else if(isAtom(t,"textord","!")){if(t.index+=1,isAtom(t,"textord","!"))return t.index+=1,t.ast="factorial2",t;t.index-=1}}function parseExpression(t,e){if(t.index=t.index||0,t.ast=void 0,0===t.atoms.length||t.index>=t.atoms.length)return t;t.minPrec=t.minPrec||0;let i=function t(e,i){if(e.index=e.index||0,e.ast=void 0,0===e.atoms.length||e.index>=e.atoms.length)return e;let s=e.atoms[e.index];const a=getCanonicalName(getString$1(s));if(parseDigraph(e)){const s={op:e.ast};s.lhs=t(e,i).ast,e.ast=s}else if("mbin"!==s.type||"-"!==a&&"+"!==a)if("mord"===s.type&&"0123456789.".indexOf(s.latex)>=0||isAtom(e,"mpunct",",")){let a="",n=!1,o="0123456789.eEdD";for(;e.index<e.atoms.length&&!n&&(isAtom(e,"spacing")||(isAtom(e,"mord")||isAtom(e,"mpunct",",")||isAtom(e,"mbin"))&&o.indexOf(e.atoms[e.index].latex)>=0);)if("spacing"===e.atoms[e.index].type)e.index+=1;else{let t=e.atoms[e.index].latex;"d"===t||"D"===t?(t="e",o="0123456789.+-"):"e"===t||"E"===t?o="0123456789.+-":"0123456789.+-"===o&&(o="0123456789"),a+=","===t?"":t,void 0!==s.superscript||void 0!==s.underscript?n=!0:e.index+=1}if(e.ast=parseFloat(a),(s=e.atoms[e.index])&&"genfrac"===s.type&&(void 0!==e.ast.num||!isNaN(e.ast))){const s=e.ast;(e=t(e,i)).ast={lhs:s,op:"+",rhs:e.ast}}if(s&&"group"===s.type&&s.latex&&s.latex.startsWith("\\nicefrac")){const s=e.ast;(e=t(e,i)).ast={lhs:s,op:"+",rhs:e.ast}}e=parsePostfix(e=parseSupsub(e,i),i)}else if("genfrac"===s.type||"surd"===s.type)e.index+=1,e.ast=s.toAST(i),e=parsePostfix(e=parseSupsub(e,i),i);else if("font"===s.type){if(e.ast=s.toAST(i),e.ast.sym&&"normal"===e.ast.variant&&isFunction(e.ast.sym)){e.ast={fn:e.ast.sym};const s=(e=parseSupsub(e,i)).ast;e.index+=1,s.arg=t(e,i).ast,e.ast=s}else void 0===s.superscript&&(e.index+=1),e=parseSupsub(e,i);e=parsePostfix(e,i)}else if("mord"===s.type){const a=getCanonicalName(getString$1(s));if(isFunction(a)&&!isOperator(s)){e.ast={fn:a};const s=(e=parseSupsub(e,i)).ast;e.index+=1,s.arg=t(e,i).ast,!s.arg||"list2"!==s.arg.fn&&"list"!==s.arg.fn||(s.arg=s.arg.arg),e.ast=s}else e.ast=s.toAST(i),void 0===s.superscript&&(e.index+=1),e=parseSupsub(e);e=parsePostfix(e,i)}else if("textord"===s.type){if(!isOperator(s)&&!Definitions.RIGHT_DELIM[s.latex.trim()]){const a=getCanonicalName(getString$1(s));if(isFunction(a)){e.ast={fn:a};const s=(e=parseSupsub(e,i)).ast;e.index+=1,s.arg=t(e,i).ast,e.ast=s,e=parsePostfix(e,i)}else e.ast=s.toAST(i),void 0===s.superscript&&(e.index+=1),e=parsePostfix(e=parseSupsub(e,i),i)}}else if("mop"===s.type){const a=getCanonicalName(getString$1(s));if(isFunction(a)&&!isOperator(s))if(e.index+=1,e.ast={fn:a},(e=parseSupsub(e,i)).ast.sup)if(-1===e.ast.sup||"-"===e.ast.sup.op&&1===e.ast.sup.rhs){const s={sin:"arcsin",cos:"arccos",tan:"arctan",cot:"arccot",sec:"arcsec",csc:"arccsc",sinh:"arsinh",cosh:"arcosh",tanh:"artanh",csch:"arcsch",sech:"arsech",coth:"arcoth"};if(s[e.ast.fn]){const a={fn:s[e.ast.fn]};a.arg=t(e,i).ast,e.ast=a}else{const s=e.ast;s.arg=t(e,i).ast,e.ast=s}}else{const s=e.ast;s.arg=t(e,i).ast,e.ast=s}else{const s=e.ast;s.arg=t(e,i).ast,e.ast=s}}else if("array"===s.type)e.index+=1,e.ast=s.toAST(i);else{if("sizing"===s.type)return e.index+=1,t(e,i);"group"===s.type&&(e.index+=1,e.ast=s.toAST(i))}else e.index+=1,s=e.atoms[e.index],e=t(e,i),s&&"0123456789.".indexOf(s.latex)>=0?e.ast.num&&"number"==typeof e.ast.num?e.ast.num="-"===a?-e.ast.num:e.ast.num:"number"==typeof e.ast?e.ast="-"===a?-e.ast:e.ast:e.ast={op:a,rhs:e.ast}:e.ast={op:a,rhs:e.ast};if(void 0===e.ast){const t=parseDelim(e,"(",")",i)||parseDelim(e,null,null,i);t?e=t:isOperator(s)||(e.ast={text:"?"},"placeholder"===s.type?e.ast.error="Placeholder '"+s.body+"'":(e.ast.error="Unexpected token '"+s.type+"'",s.body&&(e.ast.error+=" = "+s.body),s.latex&&(e.ast.error+=" = "+s.latex)),e.index+=1)}if((s=e.atoms[e.index])&&("mord"===s.type||"surd"===s.type||"mop"===s.type||"mopen"===s.type||"sizeddelim"===s.type||"leftright"===s.type)){if("sizeddelim"===s.type)for(const t in Definitions.RIGHT_DELIM)if(s.delim===Definitions.RIGHT_DELIM[t])return e.index+=1,e;if(("mord"===s.type||"textord"===s.type||"mop"===s.type)&&isOperator(s))return e;const a=e.ast;(e=t(e,i))&&e.ast?isFunction(a)?"list2"===e.ast.fn||"list"===e.ast.fn?e.ast={fn:a,arg:e.ast.arg}:e.ast={fn:a,arg:e.ast}:"*"===e.ast.fn?e.ast.arg.unshift(a):"*"===e.ast.op?e.ast={fn:"*",arg:[a,e.ast.lhs,e.ast.rhs]}:e.ast={lhs:a,op:"*",rhs:e.ast}:e.ast=a}return e}(t,e).ast,s=!1;const a=t.minPrec;for(;!s;){const n=t.atoms[t.index];if(!(s=!n||!isOperator(n)||opPrec(n).prec<a)){const s=getCanonicalName(getString$1(n)),{prec:a,assoc:o}=opPrec(n);t.minPrec="left"===o?a+1:a,t.index+=1;const r=parseExpression(t,e).ast;let l=SUPER_ASSOCIATIVE_FUNCTION[s];if(l&&i&&i.fn!==l){const t=[];void 0!==i&&t.push(i),i={fn:l,arg:t}}if("-"===s)if(i&&"+"===i.op){const t=[];void 0!==i.lhs&&t.push(i.lhs),void 0!==i.rhs&&t.push(i.rhs),void 0!==r&&t.push(negate(r)),i={fn:"+",arg:t}}else if(i&&"-"===i.op){const t=[];void 0!==i.lhs&&t.push(i.lhs),void 0!==i.rhs&&t.push(negate(i.rhs)),void 0!==r&&t.push(negate(r)),i={fn:"+",arg:t}}else i&&"+"===i.fn?void 0!==r&&i.arg.push(negate(r)):i={lhs:i,op:s,rhs:r};else if("+"===(l=ASSOCIATIVE_FUNCTION[s])&&i&&"-"===i.op){const t=[];void 0!==i.lhs&&t.push(i.lhs),void 0!==i.rhs&&t.push(negate(i.rhs)),void 0!==r&&t.push(r),i={fn:l,arg:t}}else if(l&&i&&i.op===s){const t=[];void 0!==i.lhs&&t.push(i.lhs),void 0!==i.rhs&&t.push(i.rhs),void 0!==r&&t.push(r),i={fn:l,arg:t}}else l&&i&&i.fn===l?void 0!==r&&i.arg.push(r):i={lhs:i,op:s,rhs:r}}}return t.ast=i,t}function toString$2(t){let e="";for(const i of t)"textord"!==i.type&&"mord"!==i.type||(e+=i.body);return escapeText(e)}function escapeText(t){return t.replace(/[\\]/g,"\\\\").replace(/["]/g,'\\"').replace(/[\b]/g,"\\b").replace(/[\f]/g,"\\f").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t")}function filterPresentationAtoms(t){if(!t)return[];let e;if(Array.isArray(t)){e=[];for(const i of t){const t=filterPresentationAtoms(i);e=e.concat(t)}}else{if("spacing"===t.type)return[];"first"===t.type||"color"===t.type||"box"===t.type||"sizing"===t.type?e=filterPresentationAtoms(t.body):(t.body&&Array.isArray(t.body)&&(t.body=filterPresentationAtoms(t.body)),t.superscript&&Array.isArray(t.superscript)&&(t.superscript=filterPresentationAtoms(t.superscript)),t.subscript&&Array.isArray(t.subscript)&&(t.subscript=filterPresentationAtoms(t.subscript)),t.index&&Array.isArray(t.index)&&(t.index=filterPresentationAtoms(t.index)),t.denom&&Array.isArray(t.denom)&&(t.denom=filterPresentationAtoms(t.denom)),t.numer&&Array.isArray(t.numer)&&(t.numer=filterPresentationAtoms(t.numer)),t.array&&Array.isArray(t.array)&&(t.array=filterPresentationAtoms(t.array)),e=[t])}return e}function parse(t,e){return parseExpression({atoms:filterPresentationAtoms(t)},e).ast}MathAtom$1.MathAtom.prototype.toAST=function(t){let e,i,s,a={},n="";const o={mathrm:"normal",mathbb:"double-struck",mathbf:"bold",mathcal:"script",mathfrak:"fraktur",mathscr:"script",mathsf:"sans-serif",mathtt:"monospace"}[this.fontFamily||this.font],r=this.latex?this.latex.trim():null;switch(this.type){case"root":case"group":this.latex&&this.latex.startsWith("\\nicefrac")?(e=this.latex.slice(9).match(/({.*}|[^}])({.*}|[^}])/))?(i=1===e[1].length?e[1]:e[1].substr(1,e[1].length-2),i=ParserModule.parseTokens(Lexer$1.tokenize(i),"math",null,t.macros),a.lhs=parse(i,t),s=1===e[2].length?e[2]:e[2].substr(1,e[2].length-2),s=ParserModule.parseTokens(Lexer$1.tokenize(s),"math",null,t.macros),a.op="/",a.rhs=parse(s,t)):a.op="/":a.group=parse(this.body,t);break;case"genfrac":i=parse(this.numer,t),s=parse(this.denom,t),a.lhs=i,a.op="/",a.rhs=s;break;case"surd":this.index?(a.fn="pow",a.arg=[parse(this.body,t)],a.arg[1]={lhs:1,op:"/",rhs:parse(this.index,t)}):(a.fn="sqrt",a.arg=parse(this.body,t));break;case"rule":break;case"font":"\\text "===this.latex?(a.text=toString$2(this.body),this.toLatex&&(a.latex=this.toLatex())):a.sym=toString$2(this.body);break;case"line":case"overlap":case"accent":case"overunder":break;case"mord":case"textord":(e=r?r.match(/[{]?\\char"([0-9abcdefABCDEF]*)[}]?/):void 0)?n=String.fromCodePoint(parseInt(e[1],16)):(n=getCanonicalName(getString$1(this))).length>0&&"\\"===n.charAt(0)&&"string"==typeof this.body&&(n=this.body),a=escapeText(Definitions.mathVariantToUnicode(n,this.fontFamily||this.font)),o&&"normal"!==o?a.sym=escapeText(n):a=escapeText(n);break;case"minner":case"mop":break;case"color":case"box":a=parse(this.body,t);break;case"enclose":break;case"array":"cardinality"===this.env.name&&(a={fn:"card",arg:[parse(this.array,t)]});break;case"spacing":case"space":case"sizing":case"mathstyle":break;default:a=void 0}return a&&o&&"normal"!==o&&(a.variant=o),a},MathAtom$1.toAST=function(t,e){return function t(e){if(!e)return e;if("string"==typeof e)return e;if("number"==typeof e)return e;if("object"==typeof e){if(e.sup&&(e.sup=t(e.sup)),e.op)return e.lhs&&e.rhs?{fn:e.op,arg:[t(e.lhs),t(e.rhs)]}:{fn:e.op,arg:[t(e.rhs)]};if(e.fn&&Array.isArray(e.arg))return{fn:e.fn,arg:e.arg.map(e=>t(e))};if(e.fn)return{fn:e.fn,arg:t(e.arg)};if(e.group)return{group:t(e.group)}}return e}(parse(t,e))};const PRONUNCIATION={"\\alpha":" alpha ","\\mu":" mew ","\\sigma":" sigma ","\\pi":" pie ","\\imaginaryI":" eye ","\\sum":" Summation ","\\prod":" Product ",";":' <break time="150ms"/> semi-colon <break time="150ms"/>',",":' <break time="150ms"/> comma  <break time="150ms"/>',"|":' <break time="150ms"/>Vertical bar<break time="150ms"/>',"(":' <break time="150ms"/>Open paren. <break time="150ms"/>',")":'. <break time="150ms"/> Close paren. <break time="150ms"/>',"=":" equals ","<":" is less than ","\\lt":" is less than ","<=":" is less than or equal to ","\\le":" is less than or equal to ","\\gt":" is greater than ",">":" is greater than ","\\ge":" is greater than or equal to ","\\geq":" is greater than or equal to ","\\leq":" is less than or equal to ","!":" factorial ","\\sin":" sine ","\\cos":" cosine ","â":"","â":" minus ",":":' <break time="150ms"/> such that <break time="200ms"/> ',"\\colon":' <break time="150ms"/> such that <break time="200ms"/> ',"\\hbar":" etch bar ","\\iff":' <break time="200ms"/>if, and only if, <break time="200ms"/>',"\\Longleftrightarrow":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\land":" and ","\\lor":" or ","\\neg":" not ","\\div":" divided by ","\\forall":" for all ","\\exists":" there exists ","\\nexists":" there does not exists ","\\in":" element of ","\\N":' the set <break time="150ms"/><say-as interpret-as="character">n</say-as>',"\\C":' the set <break time="150ms"/><say-as interpret-as="character">c</say-as>',"\\Z":' the set <break time="150ms"/><say-as interpret-as="character">z</say-as>',"\\Q":' the set <break time="150ms"/><say-as interpret-as="character">q</say-as>',"\\infty":" infinity ","\\nabla":" nabla ","\\partial":" partial derivative of ","\\cdots":" dot dot dot ","\\Rightarrow":" implies ","\\lbrace":'<break time="150ms"/>open brace<break time="150ms"/>',"\\{":'<break time="150ms"/>open brace<break time="150ms"/>',"\\rbrace":'<break time="150ms"/>close brace<break time="150ms"/>',"\\}":'<break time="150ms"/>close brace<break time="150ms"/>',"\\langle":'<break time="150ms"/>left angle bracket<break time="150ms"/>',"\\rangle":'<break time="150ms"/>right angle bracket<break time="150ms"/>',"\\lfloor":'<break time="150ms"/>open floor<break time="150ms"/>',"\\rfloor":'<break time="150ms"/>close floor<break time="150ms"/>',"\\lceil":'<break time="150ms"/>open ceiling<break time="150ms"/>',"\\rceil":'<break time="150ms"/>close ceiling<break time="150ms"/>',"\\vert":'<break time="150ms"/>vertical bar<break time="150ms"/>',"\\mvert":'<break time="150ms"/>divides<break time="150ms"/>',"\\lvert":'<break time="150ms"/>left vertical bar<break time="150ms"/>',"\\rvert":'<break time="150ms"/>right vertical bar<break time="150ms"/>',"\\lbrack":' <break time="150ms"/> open square bracket <break time="150ms"/>',"\\rbrack":' <break time="150ms"/> close square bracket <break time="150ms"/>'};function isAtomic(t){let e=0;if(t&&Array.isArray(t))for(const i of t)"first"!==i.type&&(e+=1);return 1===e}function atomicValue(t){let e="";if(t&&Array.isArray(t))for(const i of t)"first"!==i.type&&"string"==typeof i.body&&(e+=i.body);return e}MathAtom$1.toSpeakableFragment=function(t,e){function i(t){return"<emphasis>"+t+"</emphasis>"}if(!t)return"";let s="";if(t.id&&"math"===e.speechMode&&(s+='<mark name="'+t.id.toString()+'"/>'),Array.isArray(t)){let a=!1;for(let n=0;n<t.length;n++)n<t.length-2&&"mopen"===t[n].type&&"mclose"===t[n+2].type&&"mord"===t[n+1].type?(s+=" of ",s+=i(MathAtom$1.toSpeakableFragment(t[n+1],e)),n+=2):"mord"===t[n].type&&/[0123456789,.]/.test(t[n].latex)?a?s+=t[n].latex:(a=!0,s+=MathAtom$1.toSpeakableFragment(t[n],e)):(a=!1,s+=MathAtom$1.toSpeakableFragment(t[n],e))}else{let a="",n="",o="",r=!1;switch(t.type){case"group":case"root":s+=MathAtom$1.toSpeakableFragment(t.body,e);break;case"genfrac":if(a=MathAtom$1.toSpeakableFragment(t.numer,e),n=MathAtom$1.toSpeakableFragment(t.denom,e),isAtomic(t.numer)&&isAtomic(t.denom)){const e={"1/2":" half ","1/3":" one third ","2/3":" two third","1/4":" one quarter ","3/4":" three quarter ","1/5":" one fifth ","2/5":" two fifths ","3/5":" three fifths ","4/5":" four fifths ","1/6":" one sixth ","5/6":" five sixths ","1/8":" one eight ","3/8":" three eights ","5/8":" five eights ","7/8":" seven eights ","1/9":" one ninth ","2/9":" two ninths ","4/9":" four ninths ","5/9":" five ninths ","7/9":" seven ninths ","8/9":" eight ninths "}[atomicValue(t.numer)+"/"+atomicValue(t.denom)];e?s=e:s+=a+" over "+n}else s+=' the fraction <break time="150ms"/>'+a+', over <break time="150ms"/>'+n+'.<break time="150ms"/> End fraction.<break time="150ms"/>';break;case"surd":if(o=MathAtom$1.toSpeakableFragment(t.body,e),t.index){let i=MathAtom$1.toSpeakableFragment(t.index,e);const a=(i=i.trim()).replace(/<mark([^\/]*)\/>/g,"");s+="3"===a?' the cube root of <break time="200ms"/>'+o+'. <break time="200ms"/> End cube root':"n"===a?' the nth root of <break time="200ms"/>'+o+'. <break time="200ms"/> End root':' the root with index: <break time="200ms"/>'+i+', of <break time="200ms"/>'+o+'. <break time="200ms"/> End root'}else isAtomic(t.body)?s+=" the square root of "+o+" , ":s+=' the square root of <break time="200ms"/>'+o+'. <break time="200ms"/> End square root';break;case"accent":break;case"leftright":s+=PRONUNCIATION[t.leftDelim]||t.leftDelim,s+=MathAtom$1.toSpeakableFragment(t.body,e),s+=PRONUNCIATION[t.rightDelim]||t.rightDelim;break;case"line":case"rule":case"overunder":case"overlap":break;case"placeholder":s+="placeholder "+t.body;break;case"delim":case"sizeddelim":case"mord":case"minner":case"mbin":case"mrel":case"mpunct":case"mopen":case"mclose":case"textord":{const i=t.latex?t.latex.trim():"";if("\\mathbin"===i||"\\mathrel"===i||"\\mathopen"===i||"\\mathclose"===i||"\\mathpunct"===i||"\\mathord"===i||"\\mathinner"===i){s=MathAtom$1.toSpeakableFragment(t.body,e);break}let a=t.body,n=t.latex;if("delim"!==t.type&&"sizeddelim"!==t.type||(a=n=t.delim),"text"===e.speechMode)s+=a;else{if("mbin"===t.type&&(s+='<break time="150ms"/>'),a){const t=PRONUNCIATION[a]||(n?PRONUNCIATION[n.trim()]:"");if(t)s+=" "+t;else{const t=n?function(t){let e=Popover.NOTES[t];return e||"\\"!==t.charAt(0)||(e=" "+t.replace("\\","")+" "),Array.isArray(e)&&(e=e[0]),e}(n.trim()):"";s+=t||function(t){let i="";return e.textToSpeechMarkup?/[a-z]/.test(t)?i+=' <say-as interpret-as="character">'+t+"</say-as>":/[A-Z]/.test(t)?i+="capital "+t.toLowerCase():i+=t:/[a-z]/.test(t)?i+=" '"+t.toUpperCase()+"'":/[A-Z]/.test(t)?i+=" 'capital "+t.toUpperCase()+"'":i+=t,i}(a)}}else s+=MathAtom$1.toSpeakableFragment(t.body,e);"mbin"===t.type&&(s+='<break time="150ms"/>')}break}case"mop":if("â"!==t.body){const a=t.latex?t.latex.trim():"";if("\\sum"===a)if(t.superscript&&t.subscript){let i=MathAtom$1.toSpeakableFragment(t.superscript,e);i=i.trim();let a=MathAtom$1.toSpeakableFragment(t.subscript,e);s+=' the summation from <break time="200ms"/>'+(a=a.trim())+'<break time="200ms"/> to  <break time="200ms"/>'+i+'<break time="200ms"/> of <break time="150ms"/>',r=!0}else if(t.subscript){let i=MathAtom$1.toSpeakableFragment(t.subscript,e);s+=' the summation from <break time="200ms"/>'+(i=i.trim())+'<break time="200ms"/> of <break time="150ms"/>',r=!0}else s+=" the summation of";else if("\\prod"===a)if(t.superscript&&t.subscript){let i=MathAtom$1.toSpeakableFragment(t.superscript,e);i=i.trim();let a=MathAtom$1.toSpeakableFragment(t.subscript,e);s+=' the product from <break time="200ms"/>'+(a=a.trim())+'<break time="200ms"/> to <break time="200ms"/>'+i+'<break time="200ms"/> of <break time="150ms"/>',r=!0}else if(t.subscript){let i=MathAtom$1.toSpeakableFragment(t.subscript,e);s+=' the product from <break time="200ms"/>'+(i=i.trim())+'<break time="200ms"/> of <break time="150ms"/>',r=!0}else s+=" the product  of ";else if("\\int"===a)if(t.superscript&&t.subscript){let a=MathAtom$1.toSpeakableFragment(t.superscript,e);a=a.trim();let n=MathAtom$1.toSpeakableFragment(t.subscript,e);s+=' the integral from <break time="200ms"/>'+i(n=n.trim())+'<break time="200ms"/> to <break time="200ms"/>'+i(a)+' <break time="200ms"/> of ',r=!0}else s+=' the integral of <break time="200ms"/> ';else if("string"==typeof t.body){const e=PRONUNCIATION[t.body]||PRONUNCIATION[t.latex.trim()];s+=e||" "+t.body}else t.latex&&t.latex.length>0&&("\\"===t.latex[0]?s+=" "+t.latex.substr(1):s+=" "+t.latex)}break;case"font":e.speechMode="text",s+='<break time="200ms"/>',s+=MathAtom$1.toSpeakableFragment(t.body,e),s+='<break time="200ms"/>',e.speechMode="math";break;case"enclose":o=MathAtom$1.toSpeakableFragment(t.body,e),isAtomic(t.body)?s+=" crossed out "+o+" , ":s+=" crossed out "+o+". End cross out"}if(!r&&t.superscript){let i=MathAtom$1.toSpeakableFragment(t.superscript,e);const a=(i=i.trim()).replace(/<[^>]*>/g,"");if(isAtomic(t.superscript)){if("math"===e.speechMode){const e=function(t){if(t&&Array.isArray(t))for(const e of t)if("first"!==e.type&&e.id)return e.id.toString();return""}(t.superscript);e&&(s+='<mark name="'+e+'"/>')}"â²"===a?s+=" prime ":"2"===a?s+=" squared ":"3"===a?s+=" cubed ":isNaN(parseInt(a))?s+=" to the "+i+"; ":s+=' to the <say-as interpret-as="ordinal">'+a+"</say-as> power; "}else isNaN(parseInt(a))?s+=" raised to the "+i+"; ":s+=' raised to the <say-as interpret-as="ordinal">'+a+"</say-as> power; "}if(!r&&t.subscript){let i=MathAtom$1.toSpeakableFragment(t.subscript,e);i=i.trim(),isAtomic(t.subscript)?s+=" sub "+i:s+=" subscript "+i+". End subscript. "}}return s},MathAtom$1.toSpeakableText=function(t,e){if(e||(e={textToSpeechMarkup:"",textToSpeechRules:"mathlive"}),e.speechMode="math",window.sre&&"sre"===e.textToSpeechRules){e.generateID=!0;const i=MathAtom$1.toMathML(t,e);return i?(e.textToSpeechMarkup&&(e.textToSpeechRulesOptions=e.textToSpeechRulesOptions||{},e.textToSpeechRulesOptions.markup=e.textToSpeechMarkup,"ssml"===e.textToSpeechRulesOptions.markup&&(e.textToSpeechRulesOptions.markup="arno"),e.textToSpeechRulesOptions.rate=e.speechEngineRate),e.textToSpeechRulesOptions&&window.sre.System.getInstance().setupEngine(e.textToSpeechRulesOptions),window.sre.System.getInstance().toSpeech(i)):""}let i=MathAtom$1.toSpeakableFragment(t,e);if("ssml"===e.textToSpeechMarkup){let t="";e.speechEngineRate&&(t='<prosody rate="'+e.speechEngineRate+'">'),i='<?xml version="1.0"?><speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US"><amazon:auto-breaths>'+t+"<p><s>"+i+"</s></p>"+(t?"</prosody>":"")+"</amazon:auto-breaths></speak>"}else i="mac"===e.textToSpeechMarkup&&"mac"===function(t){let e="other";return navigator&&navigator.platform&&navigator.userAgent&&(/^(mac)/i.test(navigator.platform)?e="mac":/^(win)/i.test(navigator.platform)?e="win":/(android)/i.test(navigator.userAgent)?e="android":/(iphone)/i.test(navigator.userAgent)||/(ipod)/i.test(navigator.userAgent)||/(ipad)/i.test(navigator.userAgent)?e="ios":/\bCrOS\b/i.test(navigator.userAgent)&&(e="chromeos")),e===t?t:"!"+t}("mac")?i.replace(/<mark([^\/]*)\/>/g,"").replace(/<emphasis>/g,"[[emph+]]").replace(/<\/emphasis>/g,"").replace(/<break time="([0-9]*)ms"\/>/g,"[[slc $1]]").replace(/<say-as[^>]*>/g,"").replace(/<\/say-as>/g,""):i.replace(/<[^>]*>/g,"").replace(/\s{2,}/g," ");return i};function on(t,e,i,s){e=e.split(" ");for(const a of e){const e=a.match(/(.*):(.*)/);if(e){const a=s||[];"active"===e[2]?a.passive=!1:a[e[2]]=!0,t.addEventListener(e[1],i,a)}else t.addEventListener(a,i,s)}}function off(t,e,i,s){e=e.split(" ");for(const a of e)t.removeEventListener(a,i,s)}function MathField(t,e){this.setConfig(e||{}),this.element=t,t.mathfield=this,this.originalContent=t.innerHTML;let i=this.element.textContent;i&&(i=i.trim());let s="";this.config.substituteTextArea?"string"==typeof this.config.substituteTextArea?s+=this.config.substituteTextArea:s+="<span></span>":/android|ipad|ipod|iphone/i.test(navigator.userAgent)?s+="<span class='ML__textarea'>\n                <span class='ML__textarea__textarea'\n                    tabindex=\"0\" role=\"textbox\"\n                    style='display:inline-block;height:1px;width:1px' >\n                </span>\n            </span>":s+='<span class="ML__textarea"><textarea class="ML__textarea__textarea" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" aria-hidden="true" tabindex="-1"></textarea></span>',s+='<span class="ML__fieldcontainer"><span class="ML__fieldcontainer__field"></span>',"manual"===this.config.virtualKeyboardMode?(s+='<button class="ML__virtual-keyboard-toggle" data-tooltip="Toggle Virtual Keyboard">',this.config.virtualKeyboardToggleGlyph?s+=this.config.virtualKeyboardToggleGlyph:s+='<span style="width: 21px; margin-top: 4px;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm16 336c0 8.823-7.177 16-16 16H48c-8.823 0-16-7.177-16-16V112c0-8.823 7.177-16 16-16h480c8.823 0 16 7.177 16 16v288zM168 268v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-336 80v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm384 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zM120 188v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-96 152v-8c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z"/></svg></span>',s+="</button>"):s+="<span ></span>",s+="</span>",s+='\n        <div class="ML__popover" aria-hidden="true"></div>\n        <div class="ML__keystroke-caption" aria-hidden="true"></div>\n        <div class="ML__HiddenAccessibleMath">\n            <span aria-live="assertive" aria-atomic="true"></span>\n            <span></span>\n        </div>\n    ',this.element.innerHTML=s;let a=0;"function"==typeof this.config.substituteTextArea?this.textarea=this.config.substituteTextArea():this.textarea=this.element.children[a++].firstElementChild,this.field=this.element.children[a].children[0],this.virtualKeyboardToggleDOMNode=this.element.children[a++].children[1],this._attachButtonHandlers(this.virtualKeyboardToggleDOMNode,{default:"toggleVirtualKeyboard",alt:"toggleVirtualKeyboardAlt",shift:"toggleVirtualKeyboardShift"}),this.popover=this.element.children[a++],this.keystrokeCaption=this.element.children[a++],this.ariaLiveText=this.element.children[a].children[0],this.accessibleNode=this.element.children[a++].children[1],this.keystrokeCaptionVisible=!1,this.virtualKeyboardVisible=!1,this.inlineShortcutBuffer="",this.inlineShortcutStates=[],this.inlineShortcutBufferResetTimer=null,this.suggestionIndex=0,this.blurred=!0,on(window,"focus",this._onFocus.bind(this)),on(window,"blur",this._onBlur.bind(this)),on(this.element,"focus",this._onFocus.bind(this)),on(this.element,"blur",this._onBlur.bind(this)),on(this.textarea,"cut",this._onCut.bind(this)),on(this.textarea,"copy",this._onCopy.bind(this)),on(this.textarea,"paste",this._onPaste.bind(this)),Keyboard.delegateKeyboardEvents(this.textarea,{container:this.element,typedText:this._onTypedText.bind(this),paste:this._onPaste.bind(this),keystroke:this._onKeystroke.bind(this),focus:this._onFocus.bind(this),blur:this._onBlur.bind(this)}),on(this.element,"touchstart:active mousedown",this._onPointerDown.bind(this)),on(window,"resize",this._onResize.bind(this));const n=Object.assign({},e);n.onSelectionDidChange=MathField.prototype._onSelectionDidChange.bind(this),n.onContentDidChange=MathField.prototype._onContentDidChange.bind(this),n.onAnnounce=_onAnnounce,n.smartFence=this.config.smartFence,n.macros=this.config.macros,this.mathlist=new EditableMathlist$1.EditableMathlist(n,this),this.undoManager=new Undo.UndoManager(this.mathlist),i.length>0&&this.latex(i)}let lastTouchEndTouch,lastTouchEndTimestamp;MathField.prototype.revertToOriginalContent=MathField.prototype.$revertToOriginalContent=function(){this.element.innerHTML=this.originalContent,delete this.accessibleNode,delete this.ariaLiveText,delete this.field,this.textarea.remove(),delete this.textarea,this.virtualKeyboardToggleDOMNode.remove(),delete this.virtualKeyboardToggleDOMNode,this.popover.remove(),delete this.popover,delete this.keystrokeCaption,delete this.virtualKeyboard,off(this.element,"touchstart mousedown",this._onPointerDown.bind(this)),off(window,"resize",this._onResize.bind(this))},MathField.prototype._resetInlineShortcutBuffer=function(){this.inlineShortcutBuffer="",this.inlineShortcutStates=[],clearTimeout(this.inlineShortcutBufferResetTimer)},MathField.prototype._getCaretPosition=function(){const t=function t(e){if(e.classList.contains("ML__caret"))return e;let i;return Array.from(e.children).forEach(function(e){i=i||t(e)}),i}(this.field);if(t){const e=t.getBoundingClientRect();return{x:e.right+window.scrollX,y:e.bottom+window.scrollY}}return null},MathField.prototype._pathFromPoint=function(t,e){let i;const s=function t(e,i,s){let a={element:null},n=!0;if(e.getAttribute("data-atom-id")){a.element=e;const t=e.getBoundingClientRect(),o=Math.max(t.left-i,0,i-t.right),r=Math.max(t.top-s,0,s-t.bottom);a.distance=o*o+r*r,n=i>=t.left&&i<=t.right}else a.distance=Number.POSITIVE_INFINITY;return n&&e.children&&Array.from(e.children).forEach(function(e){const n=t(e,i,s);n.element&&n.distance<=a.distance&&(a=n)}),a}(this.field,t,e).element,a=s?s.getAttribute("data-atom-id"):null;if(a){const e=this.mathlist.filter(function(t,e){return e.captureSelection?e.filter(function(t){return t.id===a}).length>0:e.id===a});if(e&&e.length>0){const a=s.getBoundingClientRect();i=MathPath.pathFromString(e[0]).path,t<a.left+a.width/2&&!s.classList.contains("ML__placeholder")&&(i[i.length-1].offset=Math.max(0,i[i.length-1].offset-1))}}return i};let tapCount=0;function speakableText(t,e,i){const s=Object.assign({},t.config);return s.textToSpeechMarkup="",e+MathAtom$1.toSpeakableText(i,s)}function _onAnnounce(t,e,i,s){let a="";"plonk"===e?(t.plonkSound&&(t.plonkSound.load(),t.plonkSound.play().catch(t=>void 0)),t._resetInlineShortcutBuffer()):"delete"===e?a=speakableText(t,"deleted: ",s):"focus"===e||/move/.test(e)?a=(t.mathlist.isCollapsed()?"":"selected: ")+t._nextAtomSpeechText(i):"replacement"===e?a=speakableText(t,"",t.mathlist.sibling(0)):"line"===e?(a=speakableText(t,"",t.mathlist.root),t.accessibleNode.innerHTML='<math xmlns="http://www.w3.org/1998/Math/MathML">'+MathAtom$1.toMathML(t.mathlist.root,t.config)+"</math>",t.textarea.setAttribute("aria-label","after: "+a)):a=s?speakableText(t,e+" ",s):e;const n=/\u00a0/.test(t.ariaLiveText.textContent)?" â¯ ":" Â  ";t.ariaLiveText.textContent=a+n}MathField.prototype._onPointerDown=function(t){let e;function i(t){off(a.field,"touchmove",s),off(a.field,"touchend touchleave",i),off(window,"mousemove",s),off(window,"mouseup blur",i),n=!1,t.preventDefault(),t.stopPropagation()}function s(t){const i=t.touches?t.touches[0].clientX:t.clientX,s=t.touches?t.touches[0].clientY:t.clientY,n=a._pathFromPoint(i,s);e&&n&&a.mathlist.setRange(e,n)&&setTimeout(a._render.bind(a),0),t.preventDefault(),t.stopPropagation()}const a=this;let n=!1,o=!1;t.touches&&(lastTouchEndTouch&&Math.abs(lastTouchEndTouch.pageX-t.touches[0].pageX)<5&&Math.abs(lastTouchEndTouch.pageY-t.touches[0].pageY)<5&&Date.now()<lastTouchEndTimestamp+500?tapCount+=1:(lastTouchEndTouch=t.touches[0],tapCount=1),lastTouchEndTimestamp=Date.now());const r=this.element.getBoundingClientRect(),l=t.touches?t.touches[0].clientX:t.clientX,h=t.touches?t.touches[0].clientY:t.clientY;if(l>r.left&&l<r.right&&h>r.top&&h<r.bottom){if(this.hasFocus()||(o=!0,this.textarea.focus&&this.textarea.focus()),this._resetInlineShortcutBuffer(),off(this.field,"touchmove",s),off(this.field,"touchend touchleave",i),off(window,"mousemove",s),off(window,"mouseup blur",i),t.buttons&&1!==t.buttons)return;(e=this._pathFromPoint(l,h))&&(t.shiftKey?(this.mathlist.setRange(this.mathlist.path,e),(e=MathPath.clone(this.mathlist.path))[e.length-1].offset-=1):this.mathlist.setPath(e,0),o=!0,2===t.detail||3===t.detail||tapCount>1?(off(this.field,"touchmove",s),off(this.field,"touchend",i),off(window,"mousemove",s),off(window,"mouseup blur",i),n=!1,3===t.detail||3===tapCount?this.mathlist.selectAll_():2!==t.detail&&2!==tapCount||this.mathlist.selectGroup_()):n||(n=!0,on(window,"blur",i),t.touches?(on(t.target,"touchend",i),on(t.target,"touchmove",s)):(on(window,"mouseup",i),on(window,"mousemove",s))))}else lastTouchEndTouch=null;o&&this._render(),t.preventDefault()},MathField.prototype._onSelectionDidChange=function(){this.mathlist.commitCommandStringBeforeInsertionPoint();const t=this.mathlist.extractContents();if(t&&!this.mathlist.isCollapsed()){let e="";for(const i of t)e+=i.toLatex();this.textarea.value=e,this.hasFocus()&&this.textarea.select&&this.textarea.select()}else this.textarea.value="",this.textarea.setAttribute("aria-label","");Popover.updatePopoverPosition(this,{deferred:!0}),"function"==typeof this.config.onSelectionDidChange&&this.config.onSelectionDidChange(this)},MathField.prototype._onContentDidChange=function(){this.undoManager.canRedo()?this.element.classList.add("can-redo"):this.element.classList.remove("can-redo"),this.undoManager.canUndo()?this.element.classList.add("can-undo"):this.element.classList.remove("can-undo"),"function"==typeof this.config.onContentDidChange&&this.config.onContentDidChange(this)},MathField.prototype._nextAtomSpeechText=function(t){function e(t,e){return"body"===e.relation?{enclose:"cross out",leftright:"fence",surd:"square root",root:"math field"}[t.type]:{numer:"numerator",denom:"denominator",index:"index",body:"parent",subscript:"subscript",superscript:"superscript"}[e.relation]}const i=t?t.path:[],s=this.mathlist.path,a=s[s.length-1];let n="";for(;i.length>s.length;)n+="out of "+e(t.parent(),i[i.length-1])+"; ",i.pop();if(!this.mathlist.isCollapsed())return speakableText(this,"",this.mathlist.extractContents());const o=e(this.mathlist.parent(),a);0===a.offset&&(n+=(o?"start of "+o:"unknown")+": ");const r=this.mathlist.sibling(Math.max(1,this.mathlist.extent));return r?n+=speakableText(this,"",r):0!==a.offset&&(n+=o?"end of "+o:"unknown"),n},MathField.prototype._onFocus=function(){this.blurred&&(this.blurred=!1,this.textarea.focus&&this.textarea.focus(),"onfocus"===this.config.virtualKeyboardMode&&this.showVirtualKeyboard_(),Popover.updatePopoverPosition(this),this.config.onFocus&&this.config.onFocus(this),this._render())},MathField.prototype._onBlur=function(){this.blurred||(this.blurred=!0,this.ariaLiveText.textContent="","onfocus"===this.config.virtualKeyboardMode&&this.hideVirtualKeyboard_(),Popover.updatePopoverPosition(this),this._render(),this.config.onBlur&&this.config.onBlur(this))},MathField.prototype._onResize=function(){this.element.classList.remove("ML__isNarrowWidth","ML__isWideWidth","ML__isExtendedWidth"),window.innerWidth>=1024?this.element.classList.add("ML__isExtendedWidth"):window.innerWidth>=768?this.element.classList.add("ML__isWideWidth"):this.element.classList.add("ML__isNarrowWidth"),Popover.updatePopoverPosition(this)},MathField.prototype.toggleKeystrokeCaption_=function(){this.keystrokeCaptionVisible=!this.keystrokeCaptionVisible,this.keystrokeCaption.innerHTML="",this.keystrokeCaptionVisible||(this.keystrokeCaption.style.visibility="hidden")},MathField.prototype._showKeystroke=function(t){const e=this.keystrokeCaption;if(e&&this.keystrokeCaptionVisible){const i=this.element.getBoundingClientRect();e.style.left=i.left+"px",e.style.top=i.top-64+"px",e.innerHTML="<span>"+(Shortcuts.stringify(t)||t)+"</span>"+e.innerHTML,e.style.visibility="visible",setTimeout(function(){e.childNodes.length>0&&e.removeChild(e.childNodes[e.childNodes.length-1]),0===e.childNodes.length&&(e.style.visibility="hidden")},3e3)}},MathField.prototype.perform=MathField.prototype.$perform=function(t){if(!t)return!1;let e,i=!1,s=[],a=!1;return Array.isArray(t)?(e=t[0],s=t.slice(1)):e=t,e=e.replace(/-\w/g,t=>t[1].toUpperCase()),e+="_","function"==typeof this.mathlist[e]?(/^(delete_|transpose_|deleteToMathFieldEnd_|deleteToGroupEnd_|deleteToGroupStart_|deletePreviousWord_|deleteNextWord_|deletePreviousChar_|deleteNextChar_)$/.test(e)&&(this.undoManager.snapshot(this.config),this.selectionIsCollapsed()&&"deletePreviousChar_"===e?(this.inlineShortcutBuffer=this.inlineShortcutBuffer.substring(0,this.inlineShortcutBuffer.length-1),this.inlineShortcutStates.pop()):(this.inlineShortcutBuffer="",this.inlineShortcutStates=[])),this.mathlist[e](...s),a=!0,i=!0):"function"==typeof this[e]&&(["complete_"].includes(e)&&this.undoManager.snapshot(this.config),a=this[e](...s),i=!0),a&&this._render(),i},MathField.prototype.performWithFeedback_=function(t){return this.focus(),this.config.keypressVibration&&navigator.vibrate&&navigator.vibrate(3),"moveToNextPlaceholder"===(t=t.replace(/-\w/g,t=>t[1].toUpperCase()))||"moveToPreviousPlaceholder"===t||"complete"===t?this.returnKeypressSound?(this.returnKeypressSound.load(),this.returnKeypressSound.play().catch(t=>void 0)):this.keypressSound&&(this.keypressSound.load(),this.keypressSound.play().catch(t=>void 0)):("deletePreviousChar"===t||"deleteNextChar"===t||"deletePreviousWord"===t||"deleteNextWord"===t||"deleteToGroupStart"===t||"deleteToGroupEnd"===t||"deleteToMathFieldStart"===t||"deleteToMathFieldEnd"===t)&&this.deleteKeypressSound?(this.deleteKeypressSound.load(),this.deleteKeypressSound.play().catch(t=>void 0)):this.keypressSound&&(this.keypressSound.load(),this.keypressSound.play().catch(t=>void 0)),this.perform(t)},MathField.prototype._onKeystroke=function(t,e){if(this._showKeystroke(t),clearTimeout(this.inlineShortcutBufferResetTimer),this.config.onKeystroke&&!this.config.onKeystroke(this,t,e))return e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation()),!1;let i,s,a,n=!1;if((!e||!e.ctrlKey&&!e.metaKey)&&"math"===this.mathlist.parseMode()){const t=Keyboard.eventToChar(e);if("Backspace"!==t)if(!t||t.length>1)this._resetInlineShortcutBuffer();else{const e=this.inlineShortcutBuffer+t;let a=0;for(;!i&&a<=e.length;)i=Shortcuts.forString(e.slice(a),this.config),a+=1;s=a-1,this.inlineShortcutBuffer+=t,this.inlineShortcutStates.push(this.undoManager.save()),Shortcuts.startsWithString(e,this.config).length<=1?n=!0:this.config.inlineShortcutTimeout&&(clearTimeout(this.inlineShortcutBufferResetTimer),this.inlineShortcutBufferResetTimer=setTimeout(t=>{this._resetInlineShortcutBuffer()},this.config.inlineShortcutTimeout))}else this.mathlist.isCollapsed()&&this.inlineShortcutBuffer.length>0&&(a="undo")}return i||a||(a=Shortcuts.selectorForKeystroke(this.mathlist.parseMode(),t)),!i&&!a||(this.mathlist.decorateCommandStringAroundInsertionPoint(!1),this.perform(a)||i&&(this.undoManager.snapshot(this.config),this.mathlist.insert(Keyboard.eventToChar(e)),this.undoManager.snapshot(this.config),this.undoManager.restore(this.inlineShortcutStates[s],this.config),this.mathlist.insert(i,{format:"latex"}),this._render(),_onAnnounce(this,"replacement"),n&&this._resetInlineShortcutBuffer()),e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation()),!1)},MathField.prototype._onTypedText=function(t,e){if((e=e||{}).focus&&this.focus(),e.feedback&&(this.config.keypressVibration&&navigator.vibrate&&navigator.vibrate(3),this.keypressSound&&(this.keypressSound.load(),this.keypressSound.play().catch(t=>void 0))),e.commandMode&&"command"!==this.mathlist.parseMode()&&this.enterCommandMode_(),this.mathlist.decorateCommandStringAroundInsertionPoint(!1),e.simulateKeystroke){const e=t.charAt(0),i=Keyboard.charToEvent(e);if(!this.$keystroke(Keyboard.keyboardEventToString(i),i))return}let i="",s=!1;if(this.pasteInProgress)this.pasteInProgress=!1,this.mathlist.insert(t,{smartFence:this.config.smartFence});else{const e=GraphemeSplitter.splitGraphemes(t);for(const t of e)if("command"===this.mathlist.parseMode()){this.mathlist.removeSuggestion(),this.suggestionIndex=0;const e=this.mathlist.extractCommandStringAroundInsertionPoint(),a=Definitions.suggest(e+t);s=a.length>1,0===a.length?(this.mathlist.insert(t),/^\\[a-zA-Z\\*]+$/.test(e+t)&&this.mathlist.decorateCommandStringAroundInsertionPoint(!0),Popover.hidePopover(this)):(this.mathlist.insert(t),a[0].match!==e+t&&this.mathlist.insertSuggestion(a[0].match,-a[0].match.length+e.length+1),i=a[0].match)}else if("math"===this.mathlist.parseMode()){const e={"^":"moveToSuperscript",_:"moveToSubscript"," ":"moveAfterParent"}[t];e?this.perform(e):(this.undoManager.snapshot(this.config),this.mathlist._insertSmartFence(t)||this.mathlist.insert(t))}}this._render(),Popover.showPopoverWithLatex(this,i,s)},MathField.prototype._hash=function(){let t=0;const e=this.mathlist.root.toLatex(!1);for(let i=0;i<e.length;i++)t=31*t+e.charCodeAt(i),t|=0;return Math.abs(t)},MathField.prototype._render=function(t){t=t||{},window.mathlive||(window.mathlive={}),this.mathlist.root.forEach(t=>{t.hasCaret=!1,t.isSelected=!1});const e=this.hasFocus();if(this.mathlist.isCollapsed())this.mathlist.anchor().hasCaret=e;else{const t=this.mathlist.siblings(),e=this.mathlist.startOffset(),i=this.mathlist.endOffset();for(let s=e;s<i;s++)t[s].forEach(t=>{t.isSelected=!0})}const i=MathAtom$1.decompose({mathstyle:"displaystyle",generateID:{seed:this._hash(),groupNumbers:t.forHighlighting},macros:this.config.macros},this.mathlist.root.body),s=Span$1.makeSpan(i,"ML__base");s.attributes={"aria-hidden":"true"};const a=Span$1.makeSpan("","ML__strut");a.setStyle("height",s.height,"em");const n=[a];if(0!==s.depth){const t=Span$1.makeSpan("","ML__strut--bottom");t.setStyle("height",s.height+s.depth,"em"),t.setStyle("vertical-align",-s.depth,"em"),n.push(t)}n.push(s);const o=Span$1.makeSpan(n,"ML__mathlive");o.classes+=e?" ML__focused":" ML__blurred",this.field.innerHTML=o.toMarkup(0,this.config.horizontalSpacingScale),this.accessibleNode.innerHTML="<math xmlns='http://www.w3.org/1998/Math/MathML'>"+MathAtom$1.toMathML(this.mathlist.root,this.config)+"</math>",this.scrollIntoView_()},MathField.prototype._onPaste=function(){return this.pasteInProgress=!0,!0},MathField.prototype._onCut=function(){return setTimeout(function(){this.clearSelection(),this._render()}.bind(this),0),!0},MathField.prototype._onCopy=function(t){t.clipboardData.setData("text/plain",this.text("latex-expanded")),t.clipboardData.setData("application/json",this.text("json")),t.clipboardData.setData("application/xml",this.text("mathML")),t.preventDefault()},MathField.prototype.text=MathField.prototype.$text=function(t){let e="";if("latex"===(t=t||"latex")||"latex-expanded"===t)e=this.mathlist.root.toLatex("latex-expanded"===t);else if("mathML"===t)e=this.mathlist.root.toMathML(this.config);else if("spoken"===t)e=MathAtom$1.toSpeakableText(this.mathlist.root,this.config);else if("spoken-text"===t){const t=this.config.textToSpeechMarkup;this.config.textToSpeechMarkup="",e=MathAtom$1.toSpeakableText(this.mathlist.root,this.config),this.config.textToSpeechMarkup=t}else if("spoken-ssml"===t){const t=this.config.textToSpeechMarkup;this.config.textToSpeechMarkup="ssml",e=MathAtom$1.toSpeakableText(this.mathlist.root,this.config),this.config.textToSpeechMarkup=t}else"json"===t&&(e=JSON.stringify(MathAtom$1.toAST(this.mathlist.root.body,this.config)));return e},MathField.prototype.selectedText=MathField.prototype.$selectedText=function(t){t=t||"latex";let e="";const i=this.mathlist.extractContents();if(i)if("latex"===t||"latex-expanded"===t)for(const s of i)e+=s.toLatex("latex-expanded"===t);else if("mathML"===t)for(const t of i)e+=t.toMathML(this.config);else"spoken"===t&&(e=MathAtom$1.toSpeakableText(i,this.config));return e},MathField.prototype.selectionIsCollapsed=MathField.prototype.$selectionIsCollapsed=function(){return this.mathlist.isCollapsed()},MathField.prototype.selectionDepth=MathField.prototype.$selectionDepth=function(){return this.mathlist.path.length},MathField.prototype.selectionAtStart=MathField.prototype.$selectionAtStart=function(){return 0===this.mathlist.startOffset()},MathField.prototype.selectionAtEnd=MathField.prototype.$selectionAtEnd=function(){return this.mathlist.endOffset()>=this.mathlist.siblings().length-1},MathField.prototype.latex=MathField.prototype.$latex=function(t,e){if(t){return t!==this.mathlist.root.toLatex()&&(e=e||{},this.undoManager.snapshot(this.config),this.mathlist.insert(t,Object.assign(this.config,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",suppressContentChangeNotifications:e.suppressContentChangeNotifications})),this._render()),t}return this.mathlist.root.toLatex()},MathField.prototype.el=MathField.prototype.$el=function(){return this.element},MathField.prototype.undo_=MathField.prototype.undo=function(){return this.undoManager.undo(this.config),!0},MathField.prototype.redo_=MathField.prototype.redo=function(){return this.undoManager.redo(this.config),!0},MathField.prototype.scrollIntoView_=MathField.prototype.scrollIntoView=function(){return!1},MathField.prototype.scrollToStart_=MathField.prototype.scrollToStart=function(){return!0},MathField.prototype.scrollToEnd_=MathField.prototype.scrollToEnd=function(){return!0},MathField.prototype.enterCommandMode_=function(){return this.mathlist.decorateCommandStringAroundInsertionPoint(!1),this.mathlist.removeSuggestion(),Popover.hidePopover(this),this.suggestionIndex=0,this.virtualKeyboardVisible&&this.switchKeyboardLayer_("lower-command"),this.undoManager.snapshot(this.config),this.mathlist.insert(""),!0},MathField.prototype.copyToClipboard_=function(){return this.focus(),this.mathlist.isCollapsed()&&this.select(),document.execCommand("copy"),!1},MathField.prototype.cutToClipboard_=function(){return this.focus(),document.execCommand("cut"),!0},MathField.prototype.pasteFromClipboard_=function(){return this.focus(),document.execCommand("paste"),!0},MathField.prototype.insert_=MathField.prototype.insert=MathField.prototype.$insert=function(t,e){return"string"==typeof t&&t.length>0&&((e=e||{}).focus&&this.focus(),e.feedback&&(this.config.keypressVibration&&navigator.vibrate&&navigator.vibrate(3),this.keypressSound&&(this.keypressSound.load(),this.keypressSound.play())),this.undoManager.snapshot(this.config),"\\\\"===t?this.mathlist.addRowAfter_():"&"===t?this.mathlist.addColumnAfter_():this.mathlist.insert(t,e),!0)},MathField.prototype.complete_=function(){Popover.hidePopover(this);const t=this.mathlist.extractCommandStringAroundInsertionPoint();if(t){if("\\("===t||"\\)"===t)this.mathlist.spliceCommandStringAroundInsertionPoint([]),this.mathlist.insert(t.slice(1));else{const e="math";let i=Definitions.matchFunction(e,t);if(i||(i=Definitions.matchSymbol(e,t)),i){const t=ParserModule.parseTokens(Lexer$1.tokenize(i.latexName),e,null,this.config.macros);this.mathlist.spliceCommandStringAroundInsertionPoint(t)}else{const i=ParserModule.parseTokens(Lexer$1.tokenize(t),e,null,this.config.macros);i?this.mathlist.spliceCommandStringAroundInsertionPoint(i):this.mathlist.decorateCommandStringAroundInsertionPoint(!0)}}return _onAnnounce(this,"replacement"),!0}return!1},MathField.prototype._updateSuggestion=function(){this.mathlist.positionInsertionPointAfterCommitedCommand(),this.mathlist.removeSuggestion();const t=this.mathlist.extractCommandStringAroundInsertionPoint(),e=Definitions.suggest(t);if(0===e.length)Popover.hidePopover(this),this.mathlist.decorateCommandStringAroundInsertionPoint(!0);else{const i=this.suggestionIndex%e.length,s=t.length-e[i].match.length;0!==s&&this.mathlist.insertSuggestion(e[i].match,s),Popover.showPopoverWithLatex(this,e[i].match,e.length>1)}this._render()},MathField.prototype.nextSuggestion_=function(){return this.suggestionIndex+=1,this._updateSuggestion(),!1},MathField.prototype.previousSuggestion_=function(){if(this.suggestionIndex-=1,this.suggestionIndex<0){this.mathlist.removeSuggestion();const t=this.mathlist.extractCommandStringAroundInsertionPoint(),e=Definitions.suggest(t);this.suggestionIndex=e.length-1}return this._updateSuggestion(),!1},MathField.prototype._attachButtonHandlers=function(t,e){const i=this;let s,a,n,o,r;"object"==typeof e&&(e.default||e.pressed)?(e.default&&t.setAttribute("data-"+this.config.namespace+"command",JSON.stringify(e.default)),e.alt&&t.setAttribute("data-"+this.config.namespace+"command-alt",JSON.stringify(e.alt)),e.altshift&&t.setAttribute("data-"+this.config.namespace+"command-altshift",JSON.stringify(e.altshift)),e.shift&&t.setAttribute("data-"+this.config.namespace+"command-shift",JSON.stringify(e.shift)),e.pressed&&t.setAttribute("data-"+this.config.namespace+"command-pressed",JSON.stringify(e.pressed)),e.pressAndHoldStart&&t.setAttribute("data-"+this.config.namespace+"command-pressAndHoldStart",JSON.stringify(e.pressAndHoldStart)),e.pressAndHoldEnd&&t.setAttribute("data-"+this.config.namespace+"command-pressAndHoldEnd",JSON.stringify(e.pressAndHoldEnd))):t.setAttribute("data-"+this.config.namespace+"command",JSON.stringify(e)),on(t,"mousedown touchstart:passive",function(e){if("mousedown"!==e.type||1===e.buttons){e.stopPropagation(),t.classList.add("pressed"),s=Date.now(),"touchstart"===e.type&&(n=e.changedTouches[0].identifier);const o=t.getAttribute("data-"+i.config.namespace+"command-pressed");o&&i.perform(JSON.parse(o));const l=t.getAttribute("data-"+i.config.namespace+"command-pressAndHoldStart");l&&(a=t,r&&clearTimeout(r),r=window.setTimeout(function(){t.classList.contains("pressed")&&i.perform(JSON.parse(l))},300))}}),on(t,"mouseleave touchcancel",function(){t.classList.remove("pressed")}),on(t,"touchmove:passive",function(t){t.preventDefault();for(let e=0;e<t.changedTouches.length;e++)if(t.changedTouches[e].identifier===n){const i=document.elementFromPoint(t.changedTouches[e].clientX,t.changedTouches[e].clientY);i!==o&&o&&(o.dispatchEvent(new MouseEvent("mouseleave"),{bubbles:!0}),o=null),i&&(o=i,i.dispatchEvent(new MouseEvent("mouseenter",{bubbles:!0,buttons:1})))}}),on(t,"mouseenter",function(e){1===e.buttons&&t.classList.add("pressed")}),on(t,"mouseup touchend click",function(e){if(o){e.stopPropagation(),e.preventDefault();const t=o;return o=null,void t.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0}))}if(t.classList.remove("pressed"),t.classList.add("active"),"click"===e.type&&0!==e.detail)return e.stopPropagation(),void e.preventDefault();window.setTimeout(function(){t.classList.remove("active")},150);let n=t.getAttribute("data-"+i.config.namespace+"command-pressAndHoldEnd");const r=Date.now();(t!==a||r<s+300)&&(n=void 0),!n&&e.altKey&&e.shiftKey&&(n=t.getAttribute("data-"+i.config.namespace+"command-altshift")),!n&&e.altKey&&(n=t.getAttribute("data-"+i.config.namespace+"command-alt")),!n&&e.shiftKey&&(n=t.getAttribute("data-"+i.config.namespace+"command-shift")),n||(n=t.getAttribute("data-"+i.config.namespace+"command")),n&&i.perform(JSON.parse(n)),e.stopPropagation(),e.preventDefault()})},MathField.prototype._makeButton=function(t,e,i,s){const a=document.createElement("span");return a.innerHTML=t,e&&a.classList.add([].slice.call(e.split(" "))),i&&a.setAttribute("aria-label",i),this._attachButtonHandlers(a,s),a},MathField.prototype.showAlternateKeys_=function(t,e){let i=this.virtualKeyboard.getElementsByClassName("alternate-keys");if(!i||0===i.length)return!1;i=i[0],e.length>=7?i.style.width="286px":4===e.length||2===e.length?i.style.width="146px":1===e.length?i.style.width="86px":i.style.width="146px",i.style.height="auto";let s="";for(const t of e)s+="<li","string"==typeof t?s+=' data-latex="'+t.replace(/"/g,"&quot;")+'"':(t.latex&&(s+=' data-latex="'+t.latex.replace(/"/g,"&quot;")+'"'),t.content&&(s+=' data-content="'+t.content.replace(/"/g,"&quot;")+'"'),t.insert&&(s+=' data-insert="'+t.insert.replace(/"/g,"&quot;")+'"'),t.command&&(s+=" data-command='"+t.command.replace(/"/g,"&quot;")+"'"),t.aside&&(s+=' data-aside="'+t.aside.replace(/"/g,"&quot;")+'"'),t.classes&&(s+=' data-classes="'+t.classes+'"')),s+=">",s+=t.label||"",s+="</li>";s="<ul>"+s+"</ul>",i.innerHTML=s,VirtualKeyboard.makeKeycap(this,i.getElementsByTagName("li"),"performAlternateKeys");const a=this.virtualKeyboard.querySelector('div.keyboard-layer.is-visible div.rows ul li[data-alt-keys="'+t+'"]').getBoundingClientRect();return a&&(a.top-i.clientHeight<0?(i.style.width="auto",e.length<=6?i.style.height="56px":e.length<=12?i.style.height="108px":i.style.height="205px",i.style.top=a.top-i.clientHeight+5+"px"):i.style.top=(a.top-i.clientHeight+5).toString()+"px",i.style.left=Math.max(0,Math.min(window.innerWidth-i.offsetWidth,(a.left+a.right-i.offsetWidth)/2))+"px",i.classList.add("is-visible")),!1},MathField.prototype.hideAlternateKeys_=function(){let t=this.virtualKeyboard.getElementsByClassName("alternate-keys");return t&&t.length>0&&((t=t[0]).classList.remove("is-visible"),t.innerHTML=""),!1},MathField.prototype.performAlternateKeys_=function(t){return this.hideAlternateKeys_(),this.perform(t)},MathField.prototype.switchKeyboardLayer_=function(t){if(this.config.virtualKeyboardMode){"lower-command"!==t&&"upper-command"!==t&&"symbols-command"!==t&&this.complete_(),this.showVirtualKeyboard_(),this.hideAlternateKeys_(),this.unshiftKeyboardLayer_();const e=this.virtualKeyboard.getElementsByClassName("keyboard-layer");let i=!1;for(let s=0;s<e.length;s++)if(e[s].id===t){i=!0;break}if(i)for(let i=0;i<e.length;i++)e[i].id===t?e[i].classList.add("is-visible"):e[i].classList.remove("is-visible");this.focus()}return!0},MathField.prototype.shiftKeyboardLayer_=function(){const t=this.virtualKeyboard.querySelectorAll("div.keyboard-layer.is-visible .rows .keycap, div.keyboard-layer.is-visible .rows .action");if(t)for(let e=0;e<t.length;e++){const i=t[e];let s=i.getAttribute("data-shifted");if(s||/^[a-z]$/.test(i.innerHTML)){i.setAttribute("data-unshifted-content",i.innerHTML),s||(s=i.innerHTML.toUpperCase()),i.innerHTML=s;const t=i.getAttribute("data-"+this.config.namespace+"command");if(t){i.setAttribute("data-unshifted-command",t);const e=i.getAttribute("data-shifted-command");if(e)i.setAttribute("data-"+this.config.namespace+"command",e);else{const e=JSON.parse(t);Array.isArray(e)&&(e[1]=e[1].toUpperCase()),i.setAttribute("data-"+this.config.namespace+"command",JSON.stringify(e))}}}}return!1},MathField.prototype.unshiftKeyboardLayer_=function(){const t=this.virtualKeyboard.querySelectorAll("div.keyboard-layer.is-visible .rows .keycap, div.keyboard-layer.is-visible .rows .action");if(t)for(let e=0;e<t.length;e++){const i=t[e],s=i.getAttribute("data-unshifted-content");s&&(i.innerHTML=s);const a=i.getAttribute("data-unshifted-command");a&&i.setAttribute("data-"+this.config.namespace+"command",a)}return!1},MathField.prototype.insertAndUnshiftKeyboardLayer_=function(t){return this.insert_(t),this.unshiftKeyboardLayer_(),!0},MathField.prototype.toggleVirtualKeyboardAlt_=function(){let t=!1;return this.virtualKeyboard&&(t=this.virtualKeyboard.classList.contains("material"),this.virtualKeyboard.remove(),delete this.virtualKeyboard,this.virtualKeyboard=null),this.showVirtualKeyboard_(t?"":"material"),!1},MathField.prototype.toggleVirtualKeyboardShift_=function(){this.config.virtualKeyboardLayout={qwerty:"azerty",azerty:"qwertz",qwertz:"dvorak",dvorak:"colemak",colemak:"qwerty"}[this.config.virtualKeyboardLayout];let t=this.virtualKeyboard?this.virtualKeyboard.querySelector("div.keyboard-layer.is-visible"):null;return t=t?t.id:"",this.virtualKeyboard&&(this.virtualKeyboard.remove(),delete this.virtualKeyboard,this.virtualKeyboard=null),this.showVirtualKeyboard_(),t&&this.switchKeyboardLayer_(t),!1},MathField.prototype.showVirtualKeyboard_=function(t){return this.virtualKeyboardVisible=!1,this.toggleVirtualKeyboard_(t),!1},MathField.prototype.hideVirtualKeyboard_=function(){return this.virtualKeyboardVisible=!0,this.toggleVirtualKeyboard_(),!1},MathField.prototype.toggleVirtualKeyboard_=function(t){if(this.virtualKeyboardVisible=!this.virtualKeyboardVisible,this.virtualKeyboardVisible){this.virtualKeyboard?this.virtualKeyboard.classList.add("is-visible"):(this.virtualKeyboard=VirtualKeyboard.make(this,t),on(this.virtualKeyboard,"touchstart:passive mousedown",function(){e.focus()}),this.element.appendChild(this.virtualKeyboard));const e=this;window.setTimeout(function(){e.virtualKeyboard.classList.add("is-visible")},1)}else this.virtualKeyboard&&this.virtualKeyboard.classList.remove("is-visible");return"function"==typeof this.config.onVirtualKeyboardToggle&&this.config.onVirtualKeyboardToggle(this,this.virtualKeyboardVisible,this.virtualKeyboard),!1},MathField.prototype.applyStyle_=function(t){return this.undoManager.snapshot(this.config),this.mathlist._applyStyle(t),!1},MathField.prototype.hasFocus=MathField.prototype.$hasFocus=function(){return document.hasFocus()&&document.activeElement===this.textarea},MathField.prototype.focus=MathField.prototype.$focus=function(){this.hasFocus()||(this.textarea.focus&&this.textarea.focus(),_onAnnounce(this,"line"))},MathField.prototype.blur=MathField.prototype.$blur=function(){this.hasFocus()&&this.textarea.blur&&this.textarea.blur()},MathField.prototype.select=MathField.prototype.$select=function(){this.mathlist.selectAll_()},MathField.prototype.clearSelection=MathField.prototype.$clearSelection=function(){this.mathlist.delete_()},MathField.prototype.keystroke=MathField.prototype.$keystroke=function(t,e){return this._onKeystroke(t,e)},MathField.prototype.typedText=MathField.prototype.$typedText=function(t){this._onTypedText(t)},MathField.prototype.typedText_=function(t,e){return this._onTypedText(t,e)},MathField.prototype.setConfig=MathField.prototype.$setConfig=function(t){if(this.config||(this.config={smartFence:!0,overrideDefaultInlineShortcuts:!1,virtualKeyboard:"",virtualKeyboardLayout:"qwerty",namespace:""}),this.config=Object.assign(this.config,t),this.config.macros=Object.assign({},Definitions.MACROS,this.config.macros),!/^[a-z]*[-]?$/.test(this.config.namespace))throw Error("options.namespace must be a string of lowercase characters only");/-$/.test(this.config.namespace)||(this.config.namespace+="-"),this.keypressSound=void 0,this.spacebarKeypressSound=void 0,this.returnKeypressSound=void 0,this.deleteKeypressSound=void 0,this.config.keypressSound&&("string"==typeof this.config.keypressSound?(this.keypressSound=new Audio,this.keypressSound.preload="none",this.keypressSound.src=this.config.keypressSound,this.keypressSound.volume=.5,this.spacebarKeypressSound=this.keypressSound,this.returnKeypressSound=this.keypressSound,this.deleteKeypressSound=this.keypressSound):(this.keypressSound=new Audio,this.keypressSound.preload="none",this.keypressSound.src=this.config.keypressSound.default,this.keypressSound.volume=.5,this.spacebarKeypressSound=this.keypressSound,this.returnKeypressSound=this.keypressSound,this.deleteKeypressSound=this.keypressSound,this.config.keypressSound.spacebar&&(this.spacebarKeypressSound=new Audio,this.spacebarKeypressSound.preload="none",this.spacebarKeypressSound.src=this.config.keypressSound.spacebar,this.spacebarKeypressSound.volume=.5),this.config.keypressSound.return&&(this.returnKeypressSound=new Audio,this.returnKeypressSound.preload="none",this.returnKeypressSound.src=this.config.keypressSound.return,this.returnKeypressSound.volume=.5),this.config.keypressSound.delete&&(this.deleteKeypressSound=new Audio,this.deleteKeypressSound.preload="none",this.deleteKeypressSound.src=this.config.keypressSound.delete,this.deleteKeypressSound.volume=.5))),this.config.plonkSound&&(this.plonkSound=new Audio,this.plonkSound.preload="none",this.plonkSound.src=this.config.plonkSound,this.plonkSound.volume=.5)},MathField.prototype._speakWithSynchronizedHighlighting=function(t){this.config.handleReadAloud&&this.config.handleReadAloud(this.field,t,this.config)},MathField.prototype._speak=function(t){this.config.handleSpeak&&this.config.handleSpeak(t,this.config)},MathField.prototype.speakSelection_=function(){let t="Nothing selected.";return this.isCollapsed()||(t=MathAtom$1.toSpeakableText(this.extractContents(),this.config)),this._speak(t),!1},MathField.prototype.speakSelectionWithSynchronizedHighlighting_=function(){if(this.mathlist.isCollapsed())this._speak("Nothing selected.");else{window.mathlive.readAloudMathField=this,this._render({forHighlighting:!0});const t=this.config;t.textToSpeechMarkup="ssml";const e=MathAtom$1.toSpeakableText(this.mathlist.extractContents(),t);this._speakWithSynchronizedHighlighting(e)}return!1},MathField.prototype.speakParent_=function(){let t="No parent.";const e=this.mathlist.parent();return e&&"root"!==e.type&&(t=MathAtom$1.toSpeakableText(this.mathlist.parent(),this.config)),this._speak(t),!1},MathField.prototype.speakRightSibling_=function(){let t="At the end.";const e=this.mathlist.siblings(),i=this.mathlist.startOffset()+1;if(i<e.length-1){const s=[];for(let t=i;t<=e.length-1;t++)s.push(e[t]);t=MathAtom$1.toSpeakableText(s,this.config)}return this._speak(t),!1},MathField.prototype.speakLeftSibling_=function(){let t="At the beginning.";const e=this.mathlist.siblings(),i=this.mathlist.isCollapsed()?this.mathlist.startOffset():this.mathlist.startOffset()-1;if(i>=1){const s=[];for(let t=1;t<=i;t++)s.push(e[t]);t=MathAtom$1.toSpeakableText(s,this.config)}return this._speak(t),!1},MathField.prototype.speakGroup_=function(){return this._speak(MathAtom$1.toSpeakableText(this.mathlist.siblings(),this.config)),!1},MathField.prototype.speakAll_=function(){return this._speak(MathAtom$1.toSpeakableText(this.mathlist.root,this.config)),!1},MathField.prototype.speakAllWithSynchronizedHighlighting_=function(){window.mathlive.readAloudMathField=this,this._render({forHighlighting:!0});const t=this.config;t.textToSpeechMarkup="ssml";const e=MathAtom$1.toSpeakableText(this.mathlist.root,t);return this._speakWithSynchronizedHighlighting(e),!1};var MathField$1={MathField:MathField};function findEndOfMath(t,e,i){let s=i,a=0;const n=t.length;for(;s<e.length;){const i=e[s];if(a<=0&&e.slice(s,s+n)===t)return s;"\\"===i?s++:"{"===i?a++:"}"===i&&a--,s++}return-1}function splitAtDelimiters(t,e,i,s){const a=[];for(let n=0;n<t.length;n++)if("text"===t[n].type){const o=t[n].data;let r,l=!0,h=0;-1!==(r=o.indexOf(e))&&((h=r)>0&&a.push({type:"text",data:o.slice(0,h)}),l=!1);let c=!1;for(;!c;){if(l){if(-1===(r=o.indexOf(e,h))){c=!0;break}h!==r&&a.push({type:"text",data:o.slice(h,r)}),h=r}else{if(-1===(r=findEndOfMath(i,o,h+e.length))){c=!0;break}a.push({type:"math",data:o.slice(h+e.length,r),rawData:o.slice(h,r+i.length),mathstyle:s}),h=r+i.length}l=!l}h<o.length&&a.push({type:"text",data:o.slice(h)})}else a.push(t[n]);return a}function splitWithDelimiters(t,e){let i=[{type:"text",data:t}];for(let t=0;t<e.inline.length;t++){const s=e.inline[t];i=splitAtDelimiters(i,s[0],s[1],"textstyle")}for(let t=0;t<e.display.length;t++){const s=e.display[t];i=splitAtDelimiters(i,s[0],s[1],"displaystyle")}return i}function createAccessibleMarkupPair(t,e,i,s,a,n){const o=function(t,e,i,s,a){let n=document.createElement("span");n.setAttribute("aria-hidden","true"),e.preserveOriginalContent&&(n.setAttribute("data-"+e.namespace+"original-content",t),i&&n.setAttribute("data-"+e.namespace+"original-mathstyle",i));try{n.innerHTML=s(t,i||"displaystyle",e.macros)}catch(e){if(!a)return null;n=document.createTextNode(t)}return n}(t,i,e,s,n);if(null===o)return null;const r=document.createDocumentFragment();return r.appendChild(function(t,e,i){const s=document.createElement("span");try{s.innerHTML="<math xmlns='http://www.w3.org/1998/Math/MathML'>"+e(t,i)+"</math>"}catch(e){s.innerText=t}return s.setAttribute("class","ML__HiddenAccessibleMath"),s}(t,a,i)),r.appendChild(o),r}function scanText(t,e,i,s){let a=null;if(e.TeX.processEnvironments&&/^\s*\\begin/.test(t))(a=document.createDocumentFragment()).appendChild(createAccessibleMarkupPair(t,void 0,e,i,s,!0));else{const n=splitWithDelimiters(t,e.TeX.delimiters);if(1===n.length&&"text"===n[0].type)return null;a=document.createDocumentFragment();for(let t=0;t<n.length;t++)"text"===n[t].type?a.appendChild(document.createTextNode(n[t].data)):a.appendChild(createAccessibleMarkupPair(n[t].data,n[t].mathstyle,e,i,s,!0))}return a}const defaultOptions={namespace:"",skipTags:["noscript","style","textarea","pre","code","annotation","annotation-xml"],processScriptType:"math/tex",ignoreClass:"tex2jax_ignore",processClass:"tex2jax_process",preserveOriginalContent:!0,TeX:{disabled:!1,processEnvironments:!0,delimiters:{inline:[["\\(","\\)"]],display:[["$$","$$"],["\\[","\\]"]]}}};var AutoRender={renderMathInElement:function(t,e,i,s){try{if((e=Object.assign({},defaultOptions)).ignoreClassPattern=new RegExp(e.ignoreClass),e.processClassPattern=new RegExp(e.processClass),e.processScriptTypePattern=new RegExp(e.processScriptType),e.macros=Definitions.MACROS,e.namespace){if(!/^[a-z]+[-]?$/.test(e.namespace))throw Error("options.namespace must be a string of lowercase characters only");/-$/.test(e.namespace)||(e.namespace+="-")}!function t(e,i,s,a){const n=e.getAttribute("data-"+i.namespace+"original-content");if(n){const t=createAccessibleMarkupPair(n,e.getAttribute("data-"+i.namespace+"mathstyle"),i,s,a,!1);null!=t&&(e.textContent="",e.appendChild(t))}else{if(1===e.childNodes.length&&3===e.childNodes[0].nodeType){const t=e.childNodes[0].textContent;if(i.TeX.processEnvironments&&/^\s*\\begin/.test(t))return e.textContent="",void e.appendChild(createAccessibleMarkupPair(n,void 0,i,s,!0));const o=splitWithDelimiters(t,i.TeX.delimiters);if(1===o.length&&"math"===o[0].type)return e.textContent="",void e.appendChild(createAccessibleMarkupPair(o[0].data,o[0].mathstyle,i,s,a,!0));if(1===o.length&&"text"===o[0].type)return}for(let n=0;n<e.childNodes.length;n++){const o=e.childNodes[n];if(3===o.nodeType){const t=scanText(o.textContent,i,s,a);t&&(n+=t.childNodes.length-1,e.replaceChild(t,o))}else if(1===o.nodeType){const e=o.nodeName.toLowerCase();if("script"===e&&i.processScriptTypePattern.test(o.type)){let t="displaystyle";for(const e of o.type.split(";")){const i=e.split("=");"mode"===i[0].toLowerCase()&&(t="display"===i[1].toLoweCase()?"displaystyle":"textstyle")}const e=createAccessibleMarkupPair(o.textContent,t,i,s,a,!0);o.parentNode.replaceChild(e,o)}else(i.processClassPattern.test(o.className)||!i.skipTags.includes(e)&&!i.ignoreClassPattern.test(o.className))&&t(o,i,s,a)}}}}(t,e,i,s)}catch(t){Error}}};function toMarkup(t,e,i,s){e=e||"displaystyle";const a=Lexer$1.tokenize(t),n=ParserModule.parseTokens(a,"math",null,s);if("mathlist"===i)return n;let o=MathAtom$1.decompose({mathstyle:e},n);if(o=Span$1.coalesce(o),"span"===i)return o;const r=Span$1.makeSpan(o,"ML__base"),l=Span$1.makeSpan("","ML__strut");l.setStyle("height",r.height,"em");const h=[l];if(0!==r.depth){const t=Span$1.makeSpan("","ML__strut--bottom");t.setStyle("height",r.height+r.depth,"em"),t.setStyle("vertical-align",-r.depth,"em"),h.push(t)}return h.push(r),Span$1.makeSpan(h,"ML__mathlive").toMarkup()}function toMathML$1(t,e){if(!MathAtom$1.toMathML)return"";(e=e||{macros:{}}).macros=e.macros||{},Object.assign(e.macros,Definitions.MACROS);const i=ParserModule.parseTokens(Lexer$1.tokenize(t),"math",null,e.macros);return MathAtom$1.toMathML(i,e)}function speak(t,e){if(!e&&window&&window.mathlive&&(e=window.mathlive.config),(e=e||{}).speechEngine&&"local"!==e.speechEngine)if("amazon"===e.speechEngine)if(window&&window.AWS){const i=new window.AWS.Polly({apiVersion:"2016-06-10"}),s={OutputFormat:"mp3",VoiceId:e.speechEngineVoice||"Joanna",Text:t,TextType:"ssml"};i.synthesizeSpeech(s,function(t,e){if(t);else if(e&&e.AudioStream){const t=new Uint8Array(e.AudioStream),i=new Blob([t.buffer],{type:"audio/mpeg"}),s=URL.createObjectURL(i);new Audio(s).play().catch(t=>void 0)}})}else;else e.speechEngine;else{const e=new SpeechSynthesisUtterance(t);window&&window.speechSynthesis.speak(e)}}function readAloud(t,e,i){if(!window)return;if(!i&&window.mathlive&&(i=window.mathlive.config),"amazon"!==(i=i||{}).speechEngine)return void(i.handleSpeak&&i.handleSpeak(e));if(!window.AWS)return;const s=new window.AWS.Polly({apiVersion:"2016-06-10"}),a={OutputFormat:"json",VoiceId:i.speechEngineVoice||"Joanna",Text:e,TextType:"ssml",SpeechMarkTypes:["ssml"]};window.mathlive=window.mathlive||{},window.mathlive.readAloudElement=t;const n=i.onReadAloudStatus||window.mathlive.onReadAloudStatus;s.synthesizeSpeech(a,function(t,e){if(t);else if(e&&e.AudioStream){const t=new TextDecoder("utf-8").decode(new Uint8Array(e.AudioStream));window.mathlive.readAloudMarks=t.split("\n").map(t=>t?JSON.parse(t):{}),window.mathlive.readAloudTokens=[];for(const t of window.mathlive.readAloudMarks)t.value&&window.mathlive.readAloudTokens.push(t.value);window.mathlive.readAloudCurrentMark="",a.OutputFormat="mp3",a.SpeechMarkTypes=[],s.synthesizeSpeech(a,function(t,e){if(t);else if(e&&e.AudioStream){const t=new Uint8Array(e.AudioStream),i=new Blob([t.buffer],{type:"audio/mpeg"}),s=URL.createObjectURL(i);window.mathlive.readAloudAudio?window.mathlive.readAloudAudio.pause():(window.mathlive.readAloudAudio=new Audio,window.mathlive.readAloudAudio.addEventListener("ended",()=>{n&&n(window.mathlive.readAloudMathField,"ended"),window.mathlive.readAloudMathField?(window.mathlive.readAloudMathField._render(),window.mathlive.readAloudElement=null,window.mathlive.readAloudMathField=null,window.mathlive.readAloudTokens=[],window.mathlive.readAloudMarks=[],window.mathlive.readAloudCurrentMark=""):function t(e){e.classList.remove("highlight"),e.children&&Array.from(e.children).forEach(e=>{t(e)})}(window.mathlive.readAloudElement)}),window.mathlive.readAloudAudio.addEventListener("timeupdate",()=>{let t="";const e=1e3*window.mathlive.readAloudAudio.currentTime+100;for(const i of window.mathlive.readAloudMarks)i.time<e&&(t=i.value);window.mathlive.readAloudCurrentMark!==t&&(window.mathlive.readAloudCurrentToken=t,t&&t===window.mathlive.readAloudFinalToken?window.mathlive.readAloudAudio.pause():(window.mathlive.readAloudCurrentMark=t,function t(e,i){i&&e.dataset.atomId!==i?(e.classList.remove("highlight"),e.children&&e.children.length>0&&Array.from(e.children).forEach(e=>{t(e,i)})):(e.classList.add("highlight"),e.children&&e.children.length>0&&Array.from(e.children).forEach(e=>{t(e)}))}(window.mathlive.readAloudElement,window.mathlive.readAloudCurrentMark)))})),window.mathlive.readAloudAudio.src=s,n&&n(window.mathlive.readAloudMathField,"playing"),window.mathlive.readAloudAudio.play()}})}})}function getElement(t){let e=t;if("string"==typeof t&&!(e=document.getElementById(t)))throw Error(`The element with ID "${t}" could not be found.`);return e}function validateNamespace(t){if(t.namespace){if(!/^[a-z]+[-]?$/.test(t.namespace))throw Error("options.namespace must be a string of lowercase characters only");/-$/.test(t.namespace)||(t.namespace+="-")}}export default{latexToMarkup:toMarkup,latexToMathML:toMathML$1,latexToAST:function(t,e){if(!MathAtom$1.toAST)return{};e=e||{macros:{}},Object.assign(e.macros,Definitions.MACROS);const i=ParserModule.parseTokens(Lexer$1.tokenize(t),"math",null,e.macros);return MathAtom$1.toAST(i,e)},makeMathField:function(t,e){if(!MathField$1)throw Error("The MathField module is not loaded.");return(e=e||{}).handleSpeak=e.handleSpeak||speak,e.handleReadAloud=e.handleReadAloud||readAloud,new MathField$1.MathField(getElement(t),e)},renderMathInDocument:function(t){AutoRender&&AutoRender.renderMathInElement(document.body,t,toMarkup,toMathML$1)},renderMathInElement:function(t,e){AutoRender&&AutoRender.renderMathInElement(getElement(t),e,toMarkup,toMathML$1)},revertToOriginalContent:function(t,e){(t=(t=getElement(t)).children[1])instanceof MathField$1.MathField?t.revertToOriginalContent():(validateNamespace(e=e||{}),t.innerHTML=t.getAttribute("data-"+(e.namespace||"")+"original-content"))},getOriginalContent:function(t,e){return(t=(t=getElement(t)).children[1])instanceof MathField$1.MathField?t.originalContent:(validateNamespace(e=e||{}),t.getAttribute("data-"+(e.namespace||"")+"original-content"))},readAloud:readAloud,readAloudStatus:function(){return window?(window.mathlive=window.mathlive||{},window.mathlive.readAloudAudio?window.mathlive.readAloudAudio.paused?"paused":window.mathlive.readAloudAudio.ended?"ready":"playing":"ready"):"unavailable"},pauseReadAloud:function(){window&&(window.mathlive=window.mathlive||{},window.mathlive.readAloudAudio&&(window.mathlive.onReadAloudStatus&&window.mathlive.onReadAloudStatus(window.mathlive.readAloudMathField,"paused"),window.mathlive.readAloudAudio.pause()))},resumeReadAloud:function(){window&&(window.mathlive=window.mathlive||{},window.mathlive.readAloudAudio&&(window.mathlive.onReadAloudStatus&&window.mathlive.onReadAloudStatus(window.mathlive.readAloudMathField,"playing"),window.mathlive.readAloudAudio.play()))},playReadAloud:function(t,e){if(window&&(window.mathlive=window.mathlive||{},window.mathlive.readAloudAudio)){let i=0;if(window.mathlive.readAloudFinalToken=null,t){window.mathlive.readAloudMarks=window.mathlive.readAloudMarks||[];for(const e of window.mathlive.readAloudMarks)e.value===t&&(i=e.time/1e3);let s=window.mathlive.readAloudTokens.indexOf(t);s>=0&&(s+=e)<window.mathlive.readAloudTokens.length&&(window.mathlive.readAloudFinalToken=s)}window.mathlive.readAloudAudio.currentTime=i,window.mathlive.onReadAloudStatus&&window.mathlive.onReadAloudStatus(window.mathlive.readAloudMathField,"playing"),window.mathlive.readAloudAudio.play()}}};
