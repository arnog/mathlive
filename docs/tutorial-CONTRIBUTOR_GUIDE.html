<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"><title>Contributor Guide - MathLive Docs</title><meta name="description" content="Beautifully typeset math made easy"><meta name="keywords" content="latex, tex, math, typesetting, documentation, docs">

    <meta name="viewport" content="width=device-width, initial-scale=1">


    
        <link rel="stylesheet" href="http://mathlive.io/deploy/mathlive/mathlive.core.css" type="text/css"><link rel="stylesheet" href="http://mathlive.io/deploy/mathlive/mathlive.css" type="text/css">
    


    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700|Source+Sans+Pro:400,400i,700,900" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=IBM+Plex+Mono:400,700|Source+Code+Pro:400,700" rel="stylesheet">

    <style>pre.prettyprint{background: #35434e;}</style>
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow-night.css">

    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
    <link type="text/css" rel="stylesheet" href="styles/custom.css">
</head>
<body>


<div class="forkme"><a href="https://github.com/arnog/mathlive"><img style="position: absolute; top: 0; right: 0; border: 0; z-index:1;" src="https://camo.githubusercontent.com/52760788cde945287fbb584134c4cbc2bc36f904/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f77686974655f6666666666662e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png"></a></div>


<section role="navigation">
    <input type="checkbox" id="nav-trigger" class="nav-trigger" />
    <label for="nav-trigger" class="navicon-button x">
        <div class="navicon"></div>
    </label>

    <label for="nav-trigger" class="overlay"></label>

    <nav id="nav">
        <h3 class="group-title home"><a href="index.html">MathLive Docs</a></h3><input class="search" placeholder="Search" type="text"><div class="list"><h3 class="group-title">Tutorials</h3><ul><li><a href="tutorial-CONTRIBUTOR_GUIDE.html">Contributor Guide</a><ul></ul></li><li><a href="tutorial-MASTON.html">MASTON</a><ul></ul></li><li><a href="tutorial-USAGE_GUIDE.html">Usage Guide/Start Here</a><ul><li><a href="tutorial-EXAMPLES.html">Examples</a></li><li><a href="tutorial-CONFIG.html">Configuration options</a></li><li><a href="tutorial-SELECTORS.html">Selectors for perform()</a></li><li><a href="tutorial-COMMANDS_REFERENCE.html">Commands Reference</a></li></ul></li></ul><h3 class="group-title">Modules</h3><ul><li class="private"><a href="module-addons_debug.html" class="className">addons/debug</a><ul class='methods private'><li data-type='method' class='private'><a href="module-addons_debug.html#~getSymbol" class="methodName">getSymbol</a></li><li data-type='method' class='private'><a href="module-addons_debug.html#~getTag" class="methodName">getTag</a></li><li data-type='method' class='private'><a href="module-addons_debug.html#~getType" class="methodName">getType</a></li></ul></li><li class="private"><a href="module-addons_maston.html" class="className">addons/maston</a><ul class='methods private'><li data-type='method' class='private'><a href="module-addons_maston.html#~asLatex" class="methodName">asLatex</a></li><li data-type='method' class='private'><a href="module-addons_maston.html#~asMachineNumber" class="methodName">asMachineNumber</a></li><li data-type='method' class='private'><a href="module-addons_maston.html#~asSymbol" class="methodName">asSymbol</a></li><li data-type='method' class='private'><a href="module-addons_maston.html#~escapeText" class="methodName">escapeText</a></li><li data-type='method' class='private'><a href="module-addons_maston.html#~formatMantissa" class="methodName">formatMantissa</a></li><li data-type='method' class='private'><a href="module-addons_maston.html#~getCanonicalName" class="methodName">getCanonicalName</a></li><li data-type='method' class='private'><a href="module-addons_maston.html#~getLatexForSymbol" class="methodName">getLatexForSymbol</a></li><li data-type='method' class='private'><a href="module-addons_maston.html#~getLatexTemplateForFunction" class="methodName">getLatexTemplateForFunction</a></li><li data-type='method' class='private'><a href="module-addons_maston.html#~getPrecedence" class="methodName">getPrecedence</a></li><li data-type='method' class='private'><a href="module-addons_maston.html#~isAtom" class="methodName">isAtom</a></li><li data-type='method' class='private'><a href="module-addons_maston.html#~negate" class="methodName">negate</a></li><li data-type='method' class='private'><a href="module-addons_maston.html#~numberAsLatex" class="methodName">numberAsLatex</a></li><li data-type='method' class='private'><a href="module-addons_maston.html#~opPrec" class="methodName">opPrec</a></li><li data-type='method' class='private'><a href="module-addons_maston.html#~parse" class="methodName">parse</a></li><li data-type='method' class='private'><a href="module-addons_maston.html#~parseDelim" class="methodName">parseDelim</a></li><li data-type='method' class='private'><a href="module-addons_maston.html#~parseDigraph" class="methodName">parseDigraph</a></li><li data-type='method' class='private'><a href="module-addons_maston.html#~parseExpression" class="methodName">parseExpression</a></li><li data-type='method' class='private'><a href="module-addons_maston.html#~parsePostfix" class="methodName">parsePostfix</a></li><li data-type='method' class='private'><a href="module-addons_maston.html#~parseSentence" class="methodName">parseSentence</a></li><li data-type='method' class='private'><a href="module-addons_maston.html#~parseSupsub" class="methodName">parseSupsub</a></li><li data-type='method' class='private'><a href="module-addons_maston.html#~wrapFence" class="methodName">wrapFence</a></li><li data-type='method' class='private'><a href="module-addons_maston.html#~wrapFn" class="methodName">wrapFn</a></li></ul></li><li class="private"><a href="module-addons_outputLatex.html" class="className">addons/outputLatex</a><ul class='methods private'><li data-type='method' class='private'><a href="module-addons_outputLatex.html#~latexify" class="methodName">latexify</a></li><li data-type='method' class='private'><a href="module-addons_outputLatex.html#~latexifyArray" class="methodName">latexifyArray</a></li></ul></li><li class="private"><a href="module-addons_outputMathML.html" class="className">addons/outputMathML</a><ul class='methods private'><li data-type='method' class='private'><a href="module-addons_outputMathML.html#~isSuperscriptAtom" class="methodName">isSuperscriptAtom</a></li><li data-type='method' class='private'><a href="module-addons_outputMathML.html#~toMathML" class="methodName">toMathML</a></li></ul></li><li class="private"><a href="module-core_color.html" class="className">core/color</a></li><li class="private"><a href="module-core_definitions.html" class="className">core/definitions</a><ul class='methods private'><li data-type='method' class='private'><a href="module-core_definitions.html#~getSimpleString" class="methodName">getSimpleString</a></li><li data-type='method' class='private'><a href="module-core_definitions.html#~mathVariantToUnicode" class="methodName">mathVariantToUnicode</a></li></ul></li><li class="private"><a href="module-core_delimiters.html" class="className">core/delimiters</a><ul class='methods private'><li data-type='method' class='private'><a href="module-core_delimiters.html#~delimTypeToFont" class="methodName">delimTypeToFont</a></li></ul></li><li class="private"><a href="module-core_fontMetrics.html" class="className">core/fontMetrics</a><ul class='methods private'><li data-type='method' class='private'><a href="module-core_fontMetrics.html#~convertDimenToEm" class="methodName">convertDimenToEm</a></li></ul></li><li class="private"><a href="module-core_lexer.html" class="className">core/lexer</a><ul class='methods private'><li data-type='method' class='private'><a href="module-core_lexer.html#.tokenize" class="methodName">tokenize</a></li></ul></li><li class="private"><a href="module-core_mathatom.html" class="className">core/mathatom</a><ul class='methods private'><li data-type='method' class='private'><a href="module-core_mathatom.html#.decompose" class="methodName">decompose</a></li><li data-type='method' class='private'><a href="module-core_mathatom.html#.makeRoot" class="methodName">makeRoot</a></li></ul></li><li class="private"><a href="module-core_mathstyle.html" class="className">core/mathstyle</a></li><li class="private"><a href="module-core_parser.html" class="className">core/parser</a><ul class='methods private'><li data-type='method' class='private'><a href="module-core_parser.html#parseTokens" class="methodName">parseTokens</a></li></ul></li><li class="private"><a href="module-core_span.html" class="className">core/span</a><ul class='methods private'><li data-type='method' class='private'><a href="module-core_span.html#.coalesce" class="methodName">coalesce</a></li><li data-type='method' class='private'><a href="module-core_span.html#.exports.makeHlist" class="methodName">exports.makeHlist</a></li><li data-type='method' class='private'><a href="module-core_span.html#.exports.makeSpan" class="methodName">exports.makeSpan</a></li><li data-type='method' class='private'><a href="module-core_span.html#.exports.makeVlist" class="methodName">exports.makeVlist</a></li><li data-type='method' class='private'><a href="module-core_span.html#.makeFontSizer" class="methodName">makeFontSizer</a></li><li data-type='method' class='private'><a href="module-core_span.html#.makeSpanOfType" class="methodName">makeSpanOfType</a></li><li data-type='method' class='private'><a href="module-core_span.html#.makeSymbol" class="methodName">makeSymbol</a></li><li data-type='method' class='private'><a href="module-core_span.html#.toString" class="methodName">toString</a></li><li data-type='method' class='private'><a href="module-core_span.html#~makeSVG" class="methodName">makeSVG</a></li></ul></li><li class="private"><a href="module-editor_editableMathlist.html" class="className">editor/editableMathlist</a><ul class='methods private'><li data-type='method' class='private'><a href="module-editor_editableMathlist.html#.parseMathString" class="methodName">parseMathString</a></li><li data-type='method' class='private'><a href="module-editor_editableMathlist.html#~arrayAdjustRow" class="methodName">arrayAdjustRow</a></li><li data-type='method' class='private'><a href="module-editor_editableMathlist.html#~arrayCell" class="methodName">arrayCell</a></li><li data-type='method' class='private'><a href="module-editor_editableMathlist.html#~arrayCellCount" class="methodName">arrayCellCount</a></li><li data-type='method' class='private'><a href="module-editor_editableMathlist.html#~arrayColRow" class="methodName">arrayColRow</a></li><li data-type='method' class='private'><a href="module-editor_editableMathlist.html#~arrayColumnCellCount" class="methodName">arrayColumnCellCount</a></li><li data-type='method' class='private'><a href="module-editor_editableMathlist.html#~arrayFirstCellByRow" class="methodName">arrayFirstCellByRow</a></li><li data-type='method' class='private'><a href="module-editor_editableMathlist.html#~arrayIndex" class="methodName">arrayIndex</a></li><li data-type='method' class='private'><a href="module-editor_editableMathlist.html#~arrayJoinColumns" class="methodName">arrayJoinColumns</a></li><li data-type='method' class='private'><a href="module-editor_editableMathlist.html#~arrayJoinRows" class="methodName">arrayJoinRows</a></li><li data-type='method' class='private'><a href="module-editor_editableMathlist.html#~arrayRemoveColumn" class="methodName">arrayRemoveColumn</a></li><li data-type='method' class='private'><a href="module-editor_editableMathlist.html#~arrayRemoveRow" class="methodName">arrayRemoveRow</a></li><li data-type='method' class='private'><a href="module-editor_editableMathlist.html#~atomContains" class="methodName">atomContains</a></li><li data-type='method' class='private'><a href="module-editor_editableMathlist.html#~isNumber" class="methodName">isNumber</a></li><li data-type='method' class='private'><a href="module-editor_editableMathlist.html#~parseMathArgument" class="methodName">parseMathArgument</a></li></ul></li><li class="private"><a href="module-editor_keyboard.html" class="className">editor/keyboard</a><ul class='methods private'><li data-type='method' class='private'><a href="module-editor_keyboard.html#.delegateKeyboardEvents" class="methodName">delegateKeyboardEvents</a></li><li data-type='method' class='private'><a href="module-editor_keyboard.html#.keyboardEventToString" class="methodName">keyboardEventToString</a></li></ul></li><li class="private"><a href="module-editor_mathfield.html" class="className">editor/mathfield</a><ul class='methods private'><li data-type='method' class='private'><a href="module-editor_mathfield.html#nearestElementFromPoint" class="methodName">nearestElementFromPoint</a></li><li data-type='method' class='private'><a href="module-editor_mathfield.html#~_findElementWithCaret" class="methodName">_findElementWithCaret</a></li><li data-type='method' class='private'><a href="module-editor_mathfield.html#~validateStyle" class="methodName">validateStyle</a></li></ul></li><li class="private"><a href="module-editor_mathpath.html" class="className">editor/mathpath</a><ul class='methods private'><li data-type='method' class='private'><a href="module-editor_mathpath.html#.pathCommonAncestor" class="methodName">pathCommonAncestor</a></li><li data-type='method' class='private'><a href="module-editor_mathpath.html#.pathDistance" class="methodName">pathDistance</a></li><li data-type='method' class='private'><a href="module-editor_mathpath.html#.pathFromString" class="methodName">pathFromString</a></li><li data-type='method' class='private'><a href="module-editor_mathpath.html#.pathToString" class="methodName">pathToString</a></li></ul></li><li class="private"><a href="module-editor_shortcuts.html" class="className">editor/shortcuts</a><ul class='methods private'><li data-type='method' class='private'><a href="module-editor_shortcuts.html#.forString" class="methodName">forString</a></li><li data-type='method' class='private'><a href="module-editor_shortcuts.html#.platform" class="methodName">platform</a></li><li data-type='method' class='private'><a href="module-editor_shortcuts.html#.selectorForKeystroke" class="methodName">selectorForKeystroke</a></li><li data-type='method' class='private'><a href="module-editor_shortcuts.html#.stringify" class="methodName">stringify</a></li><li data-type='method' class='private'><a href="module-editor_shortcuts.html#~startsWithString" class="methodName">startsWithString</a></li><li data-type='method' class='private'><a href="module-editor_shortcuts.html#~validateShortcut" class="methodName">validateShortcut</a></li></ul></li><li class="private"><a href="module-editor_virtualKeyboard.html" class="className">editor/virtualKeyboard</a><ul class='methods private'><li data-type='method' class='private'><a href="module-editor_virtualKeyboard.html#~expandLayerMarkup" class="methodName">expandLayerMarkup</a></li><li data-type='method' class='private'><a href="module-editor_virtualKeyboard.html#~make" class="methodName">make</a></li><li data-type='method' class='private'><a href="module-editor_virtualKeyboard.html#~makeKeyboardToolbar" class="methodName">makeKeyboardToolbar</a></li></ul></li><li><a href="module-mathlive.html" class="className">mathlive</a><ul class='methods'><li data-type='method'><a href="module-mathlive.html#getOriginalContent" class="methodName">getOriginalContent</a></li><li data-type='method'><a href="module-mathlive.html#latexToAST" class="methodName">latexToAST</a></li><li data-type='method'><a href="module-mathlive.html#latexToMarkup" class="methodName">latexToMarkup</a></li><li data-type='method'><a href="module-mathlive.html#latexToMathML" class="methodName">latexToMathML</a></li><li data-type='method'><a href="module-mathlive.html#latexToSpeakableText" class="methodName">latexToSpeakableText</a></li><li data-type='method'><a href="module-mathlive.html#makeMathField" class="methodName">makeMathField</a></li><li data-type='method'><a href="module-mathlive.html#pauseReadAloud" class="methodName">pauseReadAloud</a></li><li data-type='method'><a href="module-mathlive.html#playReadAloud" class="methodName">playReadAloud</a></li><li data-type='method' class='private'><a href="module-mathlive.html#readAloud" class="methodName">readAloud</a></li><li data-type='method'><a href="module-mathlive.html#readAloudStatus" class="methodName">readAloudStatus</a></li><li data-type='method'><a href="module-mathlive.html#renderMathInElement" class="methodName">renderMathInElement</a></li><li data-type='method'><a href="module-mathlive.html#resumeReadAloud" class="methodName">resumeReadAloud</a></li><li data-type='method'><a href="module-mathlive.html#revertToOriginalContent" class="methodName">revertToOriginalContent</a></li><li data-type='method'><a href="module-mathlive.html#~highlightAtomID" class="methodName">highlightAtomID</a></li><li data-type='method'><a href="module-mathlive.html#~renderMathInDocument" class="methodName">renderMathInDocument</a></li></ul></li></ul><h3 class="group-title">Classes</h3><ul><li class="private"><a href="Context.html" class="className">Context</a><ul class='methods private'><li data-type='method' class='private'><a href="Context.html#clone" class="methodName">clone</a></li><li data-type='method' class='private'><a href="Context.html#setMathstyle" class="methodName">setMathstyle</a></li></ul></li><li class="private"><a href="EditableMathlist.html" class="className">EditableMathlist</a><ul class='methods private'><li data-type='method' class='private'><a href="EditableMathlist.html#_addCell" class="methodName">_addCell</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#_deleteAtoms" class="methodName">_deleteAtoms</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#addColumnAfter_" class="methodName">addColumnAfter_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#addColumnBefore_" class="methodName">addColumnBefore_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#addRowAfter_" class="methodName">addRowAfter_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#addRowBefore_" class="methodName">addRowBefore_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#ancestor" class="methodName">ancestor</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#anchor" class="methodName">anchor</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#applyStyle" class="methodName">applyStyle</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#commandOffsets" class="methodName">commandOffsets</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#commitCommandStringBeforeInsertionPoint" class="methodName">commitCommandStringBeforeInsertionPoint</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#contains" class="methodName">contains</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#decorateCommandStringAroundInsertionPoint" class="methodName">decorateCommandStringAroundInsertionPoint</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#delete" class="methodName">delete</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#delete_" class="methodName">delete_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#deleteAll_" class="methodName">deleteAll_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#deleteNextChar_" class="methodName">deleteNextChar_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#deleteNextWord_" class="methodName">deleteNextWord_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#deletePreviousChar_" class="methodName">deletePreviousChar_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#deletePreviousWord_" class="methodName">deletePreviousWord_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#deleteToGroupEnd_" class="methodName">deleteToGroupEnd_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#deleteToGroupStart_" class="methodName">deleteToGroupStart_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#deleteToMathFieldEnd_" class="methodName">deleteToMathFieldEnd_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#endOffset" class="methodName">endOffset</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#extend" class="methodName">extend</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#extendDown_" class="methodName">extendDown_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#extendToGroupEnd_" class="methodName">extendToGroupEnd_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#extendToGroupStart_" class="methodName">extendToGroupStart_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#extendToMathFieldEnd_" class="methodName">extendToMathFieldEnd_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#extendToMathFieldStart_" class="methodName">extendToMathFieldStart_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#extendToNextBoundary_" class="methodName">extendToNextBoundary_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#extendToNextChar_" class="methodName">extendToNextChar_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#extendToNextWord_" class="methodName">extendToNextWord_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#extendToPreviousBoundary_" class="methodName">extendToPreviousBoundary_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#extendToPreviousChar_" class="methodName">extendToPreviousChar_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#extendToPreviousWord_" class="methodName">extendToPreviousWord_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#extendUp_" class="methodName">extendUp_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#extractArgBeforeInsertionPoint" class="methodName">extractArgBeforeInsertionPoint</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#extractCommandStringAroundInsertionPoint" class="methodName">extractCommandStringAroundInsertionPoint</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#filter" class="methodName">filter</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#getSelectedAtoms" class="methodName">getSelectedAtoms</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#insert" class="methodName">insert</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#insertFirstAtom" class="methodName">insertFirstAtom</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#isCollapsed" class="methodName">isCollapsed</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#jump" class="methodName">jump</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#leap" class="methodName">leap</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#moveAfterParent_" class="methodName">moveAfterParent_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#moveBeforeParent_" class="methodName">moveBeforeParent_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#moveDown_" class="methodName">moveDown_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#moveToGroupEnd_" class="methodName">moveToGroupEnd_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#moveToGroupStart_" class="methodName">moveToGroupStart_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#moveToMathFieldEnd_" class="methodName">moveToMathFieldEnd_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#moveToMathFieldStart_" class="methodName">moveToMathFieldStart_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#moveToNextChar_" class="methodName">moveToNextChar_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#moveToNextPlaceholder_" class="methodName">moveToNextPlaceholder_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#moveToNextWord_" class="methodName">moveToNextWord_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#moveToOpposite_" class="methodName">moveToOpposite_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#moveToPreviousChar_" class="methodName">moveToPreviousChar_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#moveToPreviousPlaceholder_" class="methodName">moveToPreviousPlaceholder_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#moveToPreviousWord_" class="methodName">moveToPreviousWord_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#moveToSubscript_" class="methodName">moveToSubscript_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#moveToSuperscript_" class="methodName">moveToSuperscript_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#moveUp_" class="methodName">moveUp_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#next" class="methodName">next</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#selectAll_" class="methodName">selectAll_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#selectGroup_" class="methodName">selectGroup_</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#setExtent" class="methodName">setExtent</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#setRange" class="methodName">setRange</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#setSelection" class="methodName">setSelection</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#sibling" class="methodName">sibling</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#siblings" class="methodName">siblings</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#skip" class="methodName">skip</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#startOffset" class="methodName">startOffset</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#toString" class="methodName">toString</a></li><li data-type='method' class='private'><a href="EditableMathlist.html#transpose_" class="methodName">transpose_</a></li></ul></li><li class="private"><a href="MathAtom.html" class="className">MathAtom</a><ul class='methods private'><li data-type='method' class='private'><a href="MathAtom.html#.toSpeakableText" class="methodName">toSpeakableText</a></li><li data-type='method' class='private'><a href="MathAtom.html#bind" class="methodName">bind</a></li><li data-type='method' class='private'><a href="MathAtom.html#decompose" class="methodName">decompose</a></li><li data-type='method' class='private'><a href="MathAtom.html#decomposeGenfrac" class="methodName">decomposeGenfrac</a></li><li data-type='method' class='private'><a href="MathAtom.html#decomposeLeftright" class="methodName">decomposeLeftright</a></li><li data-type='method' class='private'><a href="MathAtom.html#decomposeLine" class="methodName">decomposeLine</a></li><li data-type='method' class='private'><a href="MathAtom.html#decomposeRule" class="methodName">decomposeRule</a></li><li data-type='method' class='private'><a href="MathAtom.html#filter" class="methodName">filter</a></li><li data-type='method' class='private'><a href="MathAtom.html#makeSpan" class="methodName">makeSpan</a></li><li data-type='method' class='private'><a href="MathAtom.html#toAST" class="methodName">toAST</a></li><li data-type='method' class='private'><a href="MathAtom.html#toLatex" class="methodName">toLatex</a></li></ul></li><li><a href="MathField.html" class="className">MathField</a><ul class='methods'><li data-type='method'><a href="MathField.html#$el" class="methodName">$el</a></li><li data-type='method'><a href="MathField.html#$insert" class="methodName">$insert</a></li><li data-type='method'><a href="MathField.html#$keystroke" class="methodName">$keystroke</a></li><li data-type='method'><a href="MathField.html#$latex" class="methodName">$latex</a></li><li data-type='method'><a href="MathField.html#$perform" class="methodName">$perform</a></li><li data-type='method'><a href="MathField.html#$revertToOriginalContent" class="methodName">$revertToOriginalContent</a></li><li data-type='method'><a href="MathField.html#$selectedText" class="methodName">$selectedText</a></li><li data-type='method'><a href="MathField.html#$selectionAtEnd" class="methodName">$selectionAtEnd</a></li><li data-type='method'><a href="MathField.html#$selectionAtStart" class="methodName">$selectionAtStart</a></li><li data-type='method'><a href="MathField.html#$selectionDepth" class="methodName">$selectionDepth</a></li><li data-type='method'><a href="MathField.html#$selectionIsCollapsed" class="methodName">$selectionIsCollapsed</a></li><li data-type='method'><a href="MathField.html#$setConfig" class="methodName">$setConfig</a></li><li data-type='method'><a href="MathField.html#$text" class="methodName">$text</a></li><li data-type='method'><a href="MathField.html#$typedText" class="methodName">$typedText</a></li><li data-type='method' class='private'><a href="MathField.html#_getCaretPosition" class="methodName">_getCaretPosition</a></li><li data-type='method' class='private'><a href="MathField.html#_onAnnounce" class="methodName">_onAnnounce</a></li><li data-type='method' class='private'><a href="MathField.html#_onKeystroke" class="methodName">_onKeystroke</a></li><li data-type='method' class='private'><a href="MathField.html#complete_" class="methodName">complete_</a></li><li data-type='method' class='private'><a href="MathField.html#enterCommandMode_" class="methodName">enterCommandMode_</a></li><li data-type='method' class='private'><a href="MathField.html#getTextBeforeAnchor_" class="methodName">getTextBeforeAnchor_</a></li><li data-type='method' class='private'><a href="MathField.html#render" class="methodName">render</a></li><li data-type='method' class='private'><a href="MathField.html#smartMode_" class="methodName">smartMode_</a></li><li data-type='method'><a href="MathField.html#speak_" class="methodName">speak_</a></li></ul></li><li class="private"><a href="module-core_lexer_Lexer.html" class="className">Lexer</a><ul class='methods private'><li data-type='method' class='private'><a href="module-core_lexer_Lexer.html#end" class="methodName">end</a></li><li data-type='method' class='private'><a href="module-core_lexer_Lexer.html#get" class="methodName">get</a></li><li data-type='method' class='private'><a href="module-core_lexer_Lexer.html#isWhiteSpace" class="methodName">isWhiteSpace</a></li><li data-type='method' class='private'><a href="module-core_lexer_Lexer.html#makeToken" class="methodName">makeToken</a></li><li data-type='method' class='private'><a href="module-core_lexer_Lexer.html#peek" class="methodName">peek</a></li><li data-type='method' class='private'><a href="module-core_lexer_Lexer.html#scan" class="methodName">scan</a></li></ul></li><li class="private"><a href="module-core_lexer_Token.html" class="className">Token</a></li><li><a href="module-core_mathatom-MathAtom.html" class="className">MathAtom</a></li><li class="private"><a href="module-core_mathstyle_Mathstyle.html" class="className">Mathstyle</a></li><li class="private"><a href="module-core_parser_Parser.html" class="className">Parser</a><ul class='methods private'><li data-type='method' class='private'><a href="module-core_parser_Parser.html#end" class="methodName">end</a></li><li data-type='method' class='private'><a href="module-core_parser_Parser.html#hasLiteralPattern" class="methodName">hasLiteralPattern</a></li><li data-type='method' class='private'><a href="module-core_parser_Parser.html#hasToken" class="methodName">hasToken</a></li><li data-type='method' class='private'><a href="module-core_parser_Parser.html#parseAtom" class="methodName">parseAtom</a></li><li data-type='method' class='private'><a href="module-core_parser_Parser.html#parseKeyword" class="methodName">parseKeyword</a></li><li data-type='method' class='private'><a href="module-core_parser_Parser.html#parseLimits" class="methodName">parseLimits</a></li><li data-type='method' class='private'><a href="module-core_parser_Parser.html#parseSupSub" class="methodName">parseSupSub</a></li><li data-type='method' class='private'><a href="module-core_parser_Parser.html#parseToken" class="methodName">parseToken</a></li><li data-type='method' class='private'><a href="module-core_parser_Parser.html#scanArg" class="methodName">scanArg</a></li><li data-type='method' class='private'><a href="module-core_parser_Parser.html#scanColor" class="methodName">scanColor</a></li><li data-type='method' class='private'><a href="module-core_parser_Parser.html#scanDimen" class="methodName">scanDimen</a></li><li data-type='method' class='private'><a href="module-core_parser_Parser.html#scanEnvironment" class="methodName">scanEnvironment</a></li><li data-type='method' class='private'><a href="module-core_parser_Parser.html#scanGroup" class="methodName">scanGroup</a></li><li data-type='method' class='private'><a href="module-core_parser_Parser.html#scanImplicitGroup" class="methodName">scanImplicitGroup</a></li><li data-type='method' class='private'><a href="module-core_parser_Parser.html#scanLeftRight" class="methodName">scanLeftRight</a></li><li data-type='method' class='private'><a href="module-core_parser_Parser.html#scanModeSet" class="methodName">scanModeSet</a></li><li data-type='method' class='private'><a href="module-core_parser_Parser.html#scanString" class="methodName">scanString</a></li><li data-type='method' class='private'><a href="module-core_parser_Parser.html#scanToken" class="methodName">scanToken</a></li></ul></li><li class="private"><a href="UndoManager.html" class="className">UndoManager</a><ul class='methods private'><li data-type='method' class='private'><a href="UndoManager.html#canRedo" class="methodName">canRedo</a></li><li data-type='method' class='private'><a href="UndoManager.html#canUndo" class="methodName">canUndo</a></li><li data-type='method' class='private'><a href="UndoManager.html#pop" class="methodName">pop</a></li><li data-type='method' class='private'><a href="UndoManager.html#redo" class="methodName">redo</a></li><li data-type='method' class='private'><a href="UndoManager.html#restore" class="methodName">restore</a></li><li data-type='method' class='private'><a href="UndoManager.html#save" class="methodName">save</a></li><li data-type='method' class='private'><a href="UndoManager.html#snapshot" class="methodName">snapshot</a></li><li data-type='method' class='private'><a href="UndoManager.html#snapshotAndCoalesce" class="methodName">snapshotAndCoalesce</a></li><li data-type='method' class='private'><a href="UndoManager.html#undo" class="methodName">undo</a></li></ul></li></ul><div class="checkbox"><input id="toggle-private" type="checkbox" onclick="
if (!document.getElementById('toggle-private').checked) {
document.documentElement.classList.add('no-private')
writeCookie('symbol-access', 'no-private')
} else {
document.documentElement.classList.remove('no-private')
writeCookie('symbol-access', 'private')
}
"><label for="toggle-private">Include Private Symbols</label></div></div>
        <footer role="contentInfo">
            Made with <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.1</a>. 
            
        </footer>
    </nav>
</section>

<main id="main">
    
        <h1 class="page-title">Contributor Guide</h1>
    

    <section class="tutorial">


<article>
    <p>This guide is for developers who want to contribute code to MathLive,
or who want to understand in more depth how MathLive works.</p>
<p>If you simply want to use MathLive with your web content, see the <a href="tutorial-USAGE_GUIDE.html">Usage Guide/Start Here</a>.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#getting-started-setting-up-your-development-environment">Getting Started: Setting up Your Development Environment</a></li>
<li><a href="#code-structure">Code Structure</a></li>
<li><a href="#language-and-coding-style">Language and Coding Style</a></li>
<li><a href="#naming-conventions">Naming Conventions</a></li>
<li><a href="#browser-support">Browser Support</a></li>
<li><a href="#accessibility-a11y">Accessibility</a></li>
<li><a href="#architecture">Architecture</a></li>
<li><a href="#files">Files</a></li>
<li><a href="#common-tasks">Common Tasks</a></li>
</ul>
<h2 id="getting-started%3A-setting-up-your-development-environment">Getting Started: Setting up Your Development Environment</h2>
<p>The project uses <a href="https://docs.npmjs.com/misc/scripts">NPM scripts</a>
for its build system. The <code>package.json</code>
file contains the definitions of the build scripts.</p>
<p>To get started developing:</p>
<ol>
<li>Install <a href="http://nodejs.org">Node.js</a> on your dev machine</li>
<li>In your shell, type:</li>
</ol>
<pre class="prettyprint source lang-bash"><code>$ git clone https://github.com/arnog/mathlive
$ cd mathlive
$ npm ci
</code></pre>
<p>The <code>npm ci</code> command installs in the <code>mathlive/node_modules</code> directory all the Node
modules necessary to build and test the MathLive library and its documentation.</p>
<p>Depending on your system setup, you may need to run as admin, in which case use <code>sudo npm ci</code> or equivalent.</p>
<p>Once the installation is successful, you can use the following commands:</p>
<pre class="prettyprint source lang-bash"><code># Build the project for local use
# 1. Compile the `.css/.less` file to `build/*.css`
# 2. &quot;npm run lint&quot; on the .js files
# 3. &quot;npm run docs&quot; to generate the documentation
$ npm run build

# Auto re-build the project when a file changes.
# Watch for changed files, and does &quot;npm run build&quot; and &quot;npm run test&quot;
# Run a local server to view the examples and do some simple debugging
# Note that the use of native modules require a server (they do not work
# with local files)
# After running this command, visit http://localhost:8080/examples/ in a browser
$ npm start

# Run test scripts
$ npm test

# Lint JavaScript files
$ npm run lint

# Calculate the code coverage and output to build/coverage/
$ npm run coverage

# Build the documentation file to `docs/`
$ npm run docs

# Clean up (deletes) the contents of the `build/`, `dist/` and `docs/` directories
$ npm run clean

# Clean, build, then minimize and bundle to `dist/`.
# The `dist/` folder will contain the `.js`, `.css` and font files necessary to 
# use MathLive. The `docs/` folder will also be updated.
$ npm run dist

</code></pre>
<p>During development, it is recommended that you keep the <code>npm start</code>
command running in a terminal window while you make the necessary changes
to the source files of the project in your favorite editor. When you
save a file, if any problem with your code is detected (linting
failure, unit test failure), it will be displayed in the terminal window.</p>
<p>Before doing a commit to <code>master</code> it is also recommended that you do a
<code>npm run dist</code> to make sure that the content of the <code>dist/</code>
and <code>docs/</code> directory are in sync with your latest changes.</p>
<p>After you push your changes to <code>master</code>, a Travis continuous integration
task will run <code>npm run dist</code> and <code>npm run test</code>. If either of those tasks
fail, the build will be marked as failed and will need immediate fixing.</p>
<h3 id="publishing">Publishing</h3>
<p>Once you have made significant changes that are ready to be shared broadly,
use the following commands:</p>
<pre class="prettyprint source lang-bash"><code># Increase the version number of the library
# Only do this before making a new public distribution
# After doing this, you can `npm publish`
$ npm version major | minor | patch

# Do a full build (code, docs, test), then publish the package to npmjs.com
$ npm publish

</code></pre>
<p><strong>Note on versioning</strong> Use the <a href="http://semver.org/">semver</a> convention for
versions:</p>
<ul>
<li><code>npm version patch</code>: bug fixes and other minor changes. Last number of the
version is incremented, e.g. <code>1.2.41</code> → <code>1.2.42</code></li>
<li><code>npm version minor</code>: new features which don't break existing features. Middle
number of the version is incremented, e.g. <code>1.2.42</code> → <code>1.3.0</code></li>
<li><code>npm version major</code>: changes which break backward compatibility of the API.
Increment the first number, e.g. <code>1.3.56</code> → <code>2.0.0</code></li>
</ul>
<h2 id="code-structure">Code Structure</h2>
<p>The MathLive library consists of the following key directories:</p>
<ul>
<li><code>css/</code> the stylesheets and fonts used by MathLive</li>
<li><code>src/core</code> the core JavaScript code needed to render math. This module depends
on the <code>css/</code> module.</li>
<li><code>src/editor</code> the JavaScript code needed for the editor. This module depends
on the <code>src/core</code> module.</li>
<li><code>src/addons</code> some optional modules that provide additional functionality</li>
</ul>
<p>You can include only the files you need. For example, if you only
need to display math, you can skip <code>src/editor/</code> and <code>src/addons</code>.</p>
<p>In addition, the <code>dist/</code> directories contain optimized
output generated from the <code>css/</code> and <code>src/</code> directories:</p>
<ul>
<li>the <code>build/</code> directory contains intermediary build results. These
intermediary results can be used for debugging during development, but are
not suitable for distribution. For example, this directory will contain the
<code>.css</code> files generated from the <code>.less</code> in <code>css/</code>. However, a transpiled or
minified <code>.js</code> file would not, as those are intended for distribution and
should be in the <code>dist/</code> directory.</li>
<li>the <code>dist/</code> directory contains the build results that are ready
for distribution. The files in this directory should be transpiled (for
<code>.js</code> files), autoprefixed (for <code>.css</code> files), minimized and bundled.</li>
<li>finally, the <code>docs/</code> directory contain documentation generated from the
source code.</li>
</ul>
<p>The content of the <code>build/</code>, <code>dist/</code> and <code>docs/</code> directories are entirely
generated as part of the build process. No other directory should contain
intermediated files generated as part of the build process.</p>
<h2 id="language-and-coding-style">Language and Coding Style</h2>
<p>MathLive is written in JavaScript, using the <a href="https://www.ecma-international.org/ecma-262/7.0/">ES2016 dialect</a>. This
includes in particular these features:</p>
<ul>
<li>native modules: <code>import</code> and <code>export</code></li>
<li><code>let</code> and <code>const</code> instead of <code>var</code></li>
<li>block-scoped variables and functions</li>
<li><code>Array.prototype.includes()</code></li>
<li><code>Object.assign()</code></li>
<li>arrow functions: <code>() =&gt; {}</code></li>
<li>template strings</li>
<li><code>for (...of...)</code> iterators</li>
<li>string searching <code>String.startsWith()</code>, <code>String.endsWith()</code></li>
<li>number formatting</li>
</ul>
<p>Some features have been partially adopted, and the codebase should get
cleaned up whenever the opportunity arises:</p>
<ul>
<li>classes</li>
<li>use of rest/spread</li>
</ul>
<p>Features that have not been adopted include:</p>
<ul>
<li>getters/setters: would probably be a good idea</li>
<li>destructuring: probably some opportunities to simplify some code</li>
<li>default parameters: would clean up some code</li>
<li>generators</li>
</ul>
<p>The code is minified and bundled to reduce the load time.</p>
<p>The code base attempts to follow these general guidelines:</p>
<ul>
<li><strong>Consistency</strong> All code in the codebase should look as if it had been
written by a single person. Don't write code for yourself, but for the many
people who will read it later.</li>
<li><strong>Clarity before performance</strong> Write code that is easy to read, and avoid
obscure constructs that may obfuscate the code to improve performance. For
example, RegEx are crazy fast in all modern browsers, and trying to roll out
your own pattern matching will result in more code and less performance.
If you think something could be made faster, use <a href="https://http://jsben.ch/">http://jsben.ch/</a> to
try out options in various browsers and compare the results. You might be
surprised.</li>
<li><strong>Follow Postel's Law, the Robustness Principle</strong> &quot;Be conservative in what
you do, be liberal in what you accept from others&quot;. For example, functions that
are invoked internally do not need to check that the input parameters are valid.
However, public APIs should check the validity of parameters, and behave
reasonably when they aren't.</li>
</ul>
<p>Use the <code>.eslintrc.json</code> file to follow the linting conventions used in the
project. In addition, follow these guidelines:</p>
<ul>
<li><strong>Tabs</strong> are expanded to <strong>four spaces</strong></li>
<li>Quotes are preferably <strong>single quotes</strong>. Use double-quotes when inside a
single-quoted string. Using backtick (template strings)for multiline
quotes is OK.</li>
</ul>
<pre class="prettyprint source lang-javascript"><code>   let s = 'hello, ' + 'world';
   s = 'hello, &quot;world&quot;';
   s = `hello:
world`;
</code></pre>
<ul>
<li>Use camelCase for variables and function names, PascalCase for Objects and Classes and UPPERCASE for constants. Use underscore-prefixed arguments for unused arguments,</li>
</ul>
<pre class="prettyprint source lang-javascript"><code>bar.filter((element, _, array) => { console.log(array, element); });
// or
bar.filter((element, _index, array) => { console.log(array, element); });
</code></pre>
<ul>
<li><strong>Typecheck</strong> using <code>typeof v === 'string'</code>, <code>typeof v === 'number'</code>, etc...
Use <code>Array.isArray(v)</code> to check for arrays.</li>
<li><strong>Conditional evaluation.</strong> Use conditional evaluation shortcuts when applicable
for example, use <code>if (string)</code> instead of <code>if (string !== '')</code></li>
<li>The variable holding the return value of a function is usually named
<strong><code>result</code></strong></li>
<li><strong>Avoid boolean as arguments.</strong> Instead, use an <code>options</code> object with
key/value pairs spelling out the meaning of the boolean.</li>
</ul>
<p>Don't do:</p>
<pre class="prettyprint source lang-javascript"><code>    f(true);
</code></pre>
<p>Do:</p>
<pre class="prettyprint source lang-javascript"><code>    f({reverse: true})
</code></pre>
<ul>
<li><strong>Use <code>||</code> for default values.</strong> For example</li>
</ul>
<pre class="prettyprint source lang-javascript"><code>    m = f(n) || d;
</code></pre>
<p>If the function <code>f</code> returns <code>null</code>, <code>undefined</code> or an empty string,
<code>m</code> will have the value <code>d</code></p>
<ul>
<li><strong>Braces for control structures</strong> should always be used, except for short
<code>if</code> statement that can fit on one line, for example <code>if (done) return;</code></li>
<li><strong>Avoid method chaining.</strong> Method chaining is a programming style where a
method returns the <code>this</code> object so that it can be called again. For example
<code>div.css('color', 'white').height(50).width(50)</code>.</li>
<li><strong>Use loose typing.</strong> For example, a function argument could accept a string
or an array and behave appropriately:</li>
</ul>
<pre class="prettyprint source lang-javascript"><code>    function f(argument) {
        if (Array.isArray(argument)) {
            argument = argument.join(';');
        }
    }
</code></pre>
<h2 id="naming-conventions">Naming Conventions</h2>
<p>Those naming conventions are particularly important for objects that are exposed
as part of the public API, such as <code>MathLive</code> and <code>MathField</code>.</p>
<ul>
<li>variables and function names that begin with <code>_</code> are private and should not
be used.</li>
<li>functions that end in <code>_</code> are selectors and should not be invoked directly by
a client of the MathLive library (they can be called internally).
Instead, a <a href="MathField.html#$perform"><code>MathField.$perform()</code></a> call should be
made. Note that the perform call does not include the <code>_</code>, so you would call
<code>mathfield.$perform('selectAll')</code>.</li>
</ul>
<p>Also note that <code>$perform</code> accepts both CamelCase and kebab-case, so
<code>mathfield.$perform('select-all')</code> is valid as well.</p>
<ul>
<li>functions that begin with <code>$</code> are public.</li>
<li>functions that neither begin nor end with an <code>_</code> are public and can be called
directly.</li>
</ul>
<h2 id="browser-support">Browser Support</h2>
<p>MathLive is designed for the modern web. Supporting older browsers complicates
the effort involved in building new features, but it is also an insecure
practice that should not be encouraged.</p>
<p>In this context, <em>modern</em> means the latest two releases of Chrome, Edge, Safari
and Firefox. Both desktop and mobile are supported.</p>
<p>Note that the HTML quirks mode is not supported. This means that the host page
should use the strict mode, indicated by a <code>&lt;!doctype html&gt;</code> directive at the
top of the page.</p>
<h2 id="accessibility---a11y">Accessibility - A11Y</h2>
<h3 id="rendering">Rendering</h3>
<p>MathLive renders math using HTML and CSS. Digits, letters and math symbols are
displayed in <code>&lt;span&gt;</code> tags with the necessary CSS styling to display them in
the right place. In addition, rules (lines) such as the fraction line, are
rendered using CSS borders. In a few rare cases, SVG is used to render
some decorations, such as the annotations of the <code>\enclose</code> command.</p>
<p>The rendered math is not purely graphical, and as such can be accessed by
screen readers.</p>
<h3 id="alternate-renditions">Alternate renditions</h3>
<p>However, in addition to the &quot;visual&quot; HTML+CSS representation that MathLive
outputs, it can also generate alternate renditions, including:</p>
<ul>
<li><strong>LaTeX</strong>: a string of LaTeX code equivalent to the formula.</li>
<li><strong>Spoken Text</strong>: a text representation of the formula as someone would speak it,
for example: <code>f(x) = x^2</code> → &quot;f of x equals x squared&quot;</li>
<li><strong>Annotated Spoken Text</strong>: as above, but in addition prosody hints are
inserted for a more natural rendition by text to speech systems (breathing
pauses, variation in pitch, etc...).</li>
</ul>
<p>Those alternate renditions can be rendered as an ARIA-label, or as an element
that is not visually rendered, but visible to screen readers.</p>
<h3 id="speech">Speech</h3>
<p>Although MathLive works with screen readers, since math is its own language
MathLive has its own built-in text to speech renderer. With the speech interface
it is possible to:</p>
<ul>
<li>read the current group (numerator or subscript, for example)
<ul>
<li>Mac: <code>Ctrl + Command + Down</code></li>
<li>Windows/Linux/ChromeOS: <code>Ctrl + Alt + Down</code></li>
</ul>
</li>
<li>read what's before or after the selection
<ul>
<li>Mac: <code>Ctrl + Command + Left/Right</code></li>
<li>Windows/Linux/ChromeOS: <code>Ctrl + Alt + Left/Right</code></li>
</ul>
</li>
<li>read the parent of the current group
<ul>
<li>Mac: <code>Ctrl + Command + Up</code></li>
<li>Windows/Linux/ChromeOS: <code>Ctrl + Alt + Up</code></li>
</ul>
</li>
<li>read the current selection
<ul>
<li>Mac: <code>Ctrl + Command + Shift + Down</code></li>
<li>Windows/Linux/ChromeOS: <code>Ctrl + Alt + Shift + Down</code></li>
</ul>
</li>
</ul>
<p>With these convenient keyboard shortcuts, it is possible to aurally navigate
and understand even complex formulas.</p>
<h3 id="input-and-navigation">Input and navigation</h3>
<p>MathLive supports multiple modalities for input: in addition to pointer devices
(mouse, trackpad, touch screen), MathLive has an extensive set of keyboard
shortcuts that allow navigation and editing of the most complex formulas.
Every operation is possible without the use of a pointing device.</p>
<p>Conversely, it is possible to enter commands and complex mathematical symbols
using only a pointing device: the command bar can be invoked by tapping a round
toggle button displayed to the right of the formula. The command bar offers
large buttons that act as a virtual keyboard, but offer contextual operations
depending on the current selection, and the content around it. Those buttons
are easy to use on touch screens and for users of alternative pointing devices.</p>
<h2 id="architecture">Architecture</h2>
<p>The core of MathLive is a math rendering engine that can output to HTML and
CSS. This engine uses the TeX layout algorithms because of their quality.
Given the same input, MathLive will render pixel for pixel what TeX would
have rendered.
To do so, it makes use of a web version of the fonts used by TeX and which are
included in the <code>dist/fonts/</code> directory.
Although the rendering engine follows the TeX algorithms, MathLive also has
an in-memory data structure to represent a math expression while it is being
edited (the math atom tree).</p>
<p>Here are some of the key concepts used throughout the code base.</p>
<h3 id="span">Span</h3>
<p>A span is an object that is used to represent an element displayed in
a web page:
a symbol such as <em>x</em> or <em>=</em>, an open brace, a line separating the numerator
and denominator of a fraction, etc...</p>
<p>The basic layout strategy is to calculate the vertical placement of the spans and
position them accordingly, while letting the HTML rendering engine position
and display the horizontal items. When horizontal adjustments need to be made,
such as additional space between items the CSS margin are adjusted.</p>
<p><strong>Spans</strong> can be rendered to HTML markup with <code>Span.toMarkup()</code> before being
displayed on the page.</p>
<h3 id="math-atom">Math Atom</h3>
<p>An atom is an object encapsulating an elementary mathematical unit, independent
of its graphical representation.</p>
<p>It can be of one of the following types:</p>
<ul>
<li><strong>ord</strong>: ordinary symbol, e.g. <em>x</em>, <em>\alpha</em></li>
<li><strong>bin</strong>: binary operator: <em>+</em>, <em>*</em>, etc...</li>
<li><strong>rel</strong>: relational operator: <em>=</em>, <em>\ne</em>, etc...</li>
<li><strong>punct</strong>: punctuation: <em>,</em>, <em>:</em>, etc...</li>
<li><strong>open</strong>: opening fence: <em>(</em>, <em>\langle</em>, etc...</li>
<li><strong>close</strong>: closing fence: <em>)</em>, <em>\rangle</em>, etc...</li>
<li><strong>op</strong>: (big) operators, <em>\sum</em>, <em>\cap</em>.</li>
<li><strong>inner</strong>: special layout cases, overlap</li>
<li><strong>accent</strong>: a diacritic mark above a symbol</li>
</ul>
<p>In addition to these basic types, which correspond to the TeX atom types,
some atoms represent more complex compounds, including:</p>
<ul>
<li><strong>space</strong> and <strong>spacing</strong>: blank space between atoms</li>
<li><strong>mathstyle</strong>: to change the math style used: <strong>display</strong> or <strong>text</strong>. The
layout rules are different for each, the latter being more compact and intended
to be incorporated with surrounding non-math text.</li>
<li><strong>font</strong>: to change the font used. Used by <code>\mathbb</code>, <code>\mathbb</code>, etc...</li>
<li><strong>sizing</strong>: to change the size of the font used</li>
<li><strong>color</strong>: to change the foreground color</li>
<li><strong>rule</strong>: a line, for the <code>\rule</code> command</li>
<li><strong>line</strong>: used by <code>\overline</code> and <code>\underline</code> commands</li>
<li><strong>box</strong>: to draw a border around an expression and change its background color</li>
<li><strong>overlap</strong>: display a symbol <em>over</em> another</li>
<li><strong>overunder</strong>: displays an annotation above or below a symbol</li>
<li><strong>group</strong>: a simple group of atoms</li>
<li><strong>root</strong>: a group, which has no parent</li>
<li><strong>array</strong>: a group, which has children arranged in columns and rows. Used
by environments such as <code>matrix</code>, <code>cases</code>, etc...</li>
<li><strong>genfrac</strong>: a generalized fraction: a numerator and denominator, separated
by an optional line, and surrounded by optional fences</li>
<li><strong>surd</strong>: a surd, aka root</li>
<li><strong>leftright</strong>: used by the <code>\left</code> and <code>\right</code> commands</li>
<li><strong>delim</strong>: some delimiter</li>
<li><strong>sizeddelim</strong>: a delimiter that can grow</li>
</ul>
<p>The following types are used by the editor:</p>
<ul>
<li><strong>command</strong> indicate a command being entered. The text is displayed in
blue in the editor.</li>
<li><strong>error</strong>: indicate a command that is unknown, for example <code>\xyzy</code>. The text
is displayed with a dotted red underline in the editor.</li>
<li><strong>placeholder</strong>: indicate a temporary item. Placeholders are displayed with a
a pill (rounded box) in the editor.</li>
<li><strong>first</strong>: a special, empty, atom put as the first atom in math lists in
order to more easily represent the cursor position. They are not displayed.</li>
</ul>
<h3 id="math-list">Math List</h3>
<p>A <strong>math list</strong> is simply an array of atoms. Although it's a common data
structure there is no class to represent it: it's simply an <code>Array</code> of
<code>MathAtom</code> objects.</p>
<h3 id="lexer">Lexer</h3>
<p>The <strong>lexer</strong> converts a string of TeX code into tokens that can be digested
by the parser.</p>
<h3 id="parser">Parser</h3>
<p>The <strong>parser</strong> turns a stream of tokens generated by the lexer into
<strong>math atoms</strong>. Those atoms then can be rendered into <strong>spans</strong>, or back into
LaTeX or into spoken text.</p>
<h3 id="editable-math-list">Editable Math List</h3>
<p>An <strong>Editable Math List</strong> is a class specific to the editor. It
encapsulates the operations that can be done to an editable math list, including
adding and removing content and keeping track of and modifying an insertion
point and selection.</p>
<h3 id="math-field">Math Field</h3>
<p>A <strong>MathField</strong> is a user interface widget that captures the keyboard and
pointing device events, and present an appropriate user experience. It
uses the <strong>EditableMathList</strong> to manipulate the in-memory representation of
the math expression being edited.</p>
<h2 id="files">Files</h2>
<p>Here's a brief guide to the files of the project:</p>
<ul>
<li>
<p><strong>mathlive.js</strong> The public API to Mathlive</p>
</li>
<li>
<p><strong>core/lexer.js</strong> Implements the <code>Lexer</code> class: strings to tokens</p>
</li>
<li>
<p><strong>core/parser.js</strong> Implements the <code>Parser</code> class: tokens to atoms</p>
</li>
<li>
<p><strong>core/definitions.js</strong> Dictionary of all the known LaTeX commands, and
which symbol or atom type they map to. Used by the <code>Parser</code></p>
</li>
<li>
<p><strong>core/color.js</strong> Support to parse color arguments</p>
</li>
<li>
<p><strong>core/mathAtom.js</strong> Implements the <code>MathAtom</code> class: atoms to spans</p>
</li>
<li>
<p><strong>core.delimiters.js</strong> Rendering (atoms to span) for delimiters.</p>
</li>
<li>
<p><strong>core/context.js</strong> Rendering context of the current parse level (math style,
color, font size, font family, font style, etc...). Used by MathAtom while
generating spans</p>
</li>
<li>
<p><strong>core/mathstyle.js</strong> Provides info about the ** math styles**: display, text,
scripttext, scripscripttext and their tight variants.</p>
</li>
<li>
<p><strong>core/fontMetrics.js</strong> Provides glyph metrics: height above baseline, depth
below baseline, italic correction.</p>
</li>
<li>
<p><strong>core/fontMetricsData.js</strong> Used by <code>fontMetrics.js</code></p>
</li>
<li>
<p><strong>core/span.js</strong> Implements the <code>Span</code> class: spans to markup</p>
</li>
<li>
<p><strong>editor/editableMathlist.js</strong>: The <code>EditableMathlist</code> keeps track of a tree
of math atoms representing the math expression being edited, and a selection
with can either be <em>collapsed</em> (only the insertion point is visible) or not, in
which case it has an <em>extent</em> indicating how big the selection is. This class
has no UI logic in it.</p>
</li>
<li>
<p><strong>editor/mathpath.js</strong> A utility class that represents a path in an atom
tree to a specific atom</p>
</li>
<li>
<p><strong>editor/mathfield.js</strong> Public API for the editor. Implements the UI for the
mathfield, including mouse and touch interaction, and  the popover and the
command bar</p>
</li>
<li>
<p><strong>editor/shortcuts.js</strong> Defines the keyboard shortcuts</p>
</li>
<li>
<p><strong>editor/commands.js</strong>: list of commands displayed in the command bar</p>
</li>
<li>
<p><strong>editor/popover.js</strong> Implements the popover panel</p>
</li>
<li>
<p><strong>editor/keyboard.js</strong> A utility class that captures keyboard events from
a <em>Textarea</em> DOM element.</p>
</li>
<li>
<p><strong>editor/undo.js</strong> Implements the <em>Undo Manager</em> which keeps tracks of the
state of the mathfield as it is being edited in order to support undo/redo.</p>
</li>
</ul>
<h2 id="common-tasks">Common Tasks</h2>
<p>So, you want to...</p>
<h3 id="add-a-new-latex-command%3F">Add a new LaTeX command?</h3>
<p><strong>(1)</strong> Start with <code>core/definitions.js</code>. Add a new entry to the appropriate table
by calling <code>defineSymbol()</code> for commands that need no parameters, <code>defineFunction()</code> for commands that need some parameters or <code>defineEnvironment()</code> for environments, that is <code>\begin{}...\end{}</code> blocks.</p>
<p>For functions, the handler function in the definition will be called by the parser at the right
time. It's your chance to return info that will be used by to render the atom.</p>
<p><strong>(2)</strong> If you can use the existing atom types, great. If needed, modify an
existing atom type to support what you want, including passing additional
parameters. If no atom types match, create a new one by adding a new
<code>MathAtom.decompose&lt;atom-type&gt;()</code> function and calling it from
<code>MathAtom.decompose()</code>.</p>
<p><strong>(3)</strong> Call <code>makeSpan()</code> and its variants in your decompose function to construct
a representation of the atom.</p>
</article>

    


</section>

</main>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="scripts/namis.search.jquery.js"></script>
<script>
    function readCookie(a) {
        var b = document.cookie.match('(^|;)\\s*' + a + '\\s*=\\s*([^;]+)');
        return b ? b.pop() : '';
    }
    function writeCookie(a, v) {
		var date = new Date();
		date.setTime(date.getTime()+(30*24*60*60*1000));
    	document.cookie = a + "=" + v + "; expires=" + date.toUTCString() + "; path=/";
    }

    var cookie = readCookie('symbol-access');
    if (!cookie || cookie === 'no-private') {
        document.documentElement.classList.add('no-private');
    }
    
   document.getElementById('toggle-private').checked = 
    !document.documentElement.classList.contains('no-private');


    prettyPrint();
    (function($){
        $('#nav').search(['className', 'methodName']);
    })(jQuery);
</script>
<script src="scripts/linenumber.js"></script>


    <script src="http://mathlive.io/deploy/mathlive/mathlive.js"></script><script>if (MathLive) {MathLive.renderMathInDocument();}</script>


</body>
</html>